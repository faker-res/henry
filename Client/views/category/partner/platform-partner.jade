.text-center
    p(ng-if="!vm.curPlatformText")
        label.text-danger {{"NO_PLATFORM_MESSAGE" | translate}}
.col-md-6(ng-if="!checkViewPermission('Partner', 'Partner', 'AdvancedSearch') && vm.curPlatformText")
    .search-box
        .fa.fa-search.pull-right.margin-all-5
        a.fa.fa-times.pull-right.margin-all-5(ng-if='vm.searchText', ng-click='vm.searchText=null')
        input#partnerSearch.span.input-sm(type="text", ng-model="vm.searchText", placeholder='{{"SEARCH_HERE" | translate}}')
.col-md-12(ng-show="checkViewPermission('Partner', 'Partner', 'AdvancedSearch') && vm.curPlatformText")
    //.col-xs-11.col-sm-10.col-md-12.search-filters-container#partnerTable-search-filters.well
    .col-xs-11.col-sm-10.col-md-12.search-filters-container.well
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'PARTNER_ID' | translate}}
            input.form-control(ng-model='vm.partnerAdvanceSearchQuery.partnerId', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'PARTNER_NAME' | translate}}
            input.form-control(ng-model='vm.partnerAdvanceSearchQuery.partnerName', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'REAL_NAME' | translate}}
            input.form-control(ng-model='vm.partnerAdvanceSearchQuery.realName', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'COMMISSION_TYPE' | translate}}
            select.form-control(ng-model='vm.partnerAdvanceSearchQuery.commissionType', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                option(value='') —
                option(ng-repeat="(i,v) in vm.constPartnerCommisionType", value='{{v}}') {{i | translate}}
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'CREDIT' | translate}}
            div
                select.form-control(ng-model='vm.partnerAdvanceSearchQuery.creditsOperator', style="width:75px;display:inline-block", ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                    option(value='>=') >=
                    option(value='=') =
                    option(value='<=') <=
                    option(value='range') {{'range' | translate}}
                div(style= "width:8px;display:inline-block")
                input.form-control(ng-model='vm.partnerAdvanceSearchQuery.creditsInput1', style="width:80px;display:inline-block", type = 'number', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                div.text-center(style="width:15px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.creditsOperator === 'range'") ~
                input.form-control(type="number" ng-model="vm.partnerAdvanceSearchQuery.creditsInput2" style="width:80px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.creditsOperator === 'range'" ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')

        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'REGISTRATION_TIME' | translate}}
            #regDateTimePicker2.datetimepicker.form-control
                input.input-append.playerDate(style='width:76%,border:0;', data-format="dd/MM/yyyy hh:mm:ss", type='text')
                span.add-on
                    i.fa-calendar.fa(data-time-icon='fa fa-clock-o', data-date-icon='fa fa-calendar')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'REGISTRATION_TIME_END' | translate}}
            #regEndDateTimePicker2.datetimepicker.form-control
                input.input-append.playerDate(style='width:76%,border:0;', data-format="dd/MM/yyyy hh:mm:ss", type='text')
                span.add-on
                    i.fa-calendar.fa(data-time-icon='fa fa-clock-o', data-date-icon='fa fa-calendar')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'LAST_ACCESS_TIME' | translate}}
            #lastAccessDateTimePicker2.datetimepicker.form-control
                input.input-append.playerDate(style='width:76%,border:0;', data-format="dd/MM/yyyy hh:mm:ss", type='text')
                span.add-on
                    i.fa-calendar.fa(data-time-icon='fa fa-clock-o', data-date-icon='fa fa-calendar')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'LAST_ACCESS_TIME_END' | translate}}
            #lastAccessEndDateTimePicker2.datetimepicker.form-control
                input.input-append.playerDate(style='width:76%,border:0;', data-format="dd/MM/yyyy hh:mm:ss", type='text')
                span.add-on
                    i.fa-calendar.fa(data-time-icon='fa fa-clock-o', data-date-icon='fa fa-calendar')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'TELEPHONE' | translate}}
            input.form-control(ng-model='vm.partnerAdvanceSearchQuery.phoneNumber', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'DAILY_ACTIVE' | translate}}
            div
                select.form-control(ng-model='vm.partnerAdvanceSearchQuery.dailyActivePlayerOperator', style="width:75px;display:inline-block", ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                    option(value='>=') >=
                    option(value='=') =
                    option(value='<=') <=
                    option(value='range') {{'range' | translate}}
                div(style= "width:8px;display:inline-block")
                input.form-control(ng-model='vm.partnerAdvanceSearchQuery.dailyActivePlayerInput1', style="width:80px;display:inline-block", type = 'number', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                div.text-center(style="width:15px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.dailyActivePlayerOperator === 'range'") ~
                input.form-control(type="number" ng-model="vm.partnerAdvanceSearchQuery.dailyActivePlayerInput2" style="width:80px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.dailyActivePlayerOperator === 'range'" ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'WEEKLY_ACTIVE' | translate}}
            div
                select.form-control(ng-model='vm.partnerAdvanceSearchQuery.weeklyActivePlayerOperator', style="width:75px;display:inline-block", ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                    option(value='>=') >=
                    option(value='=') =
                    option(value='<=') <=
                    option(value='range') {{'range' | translate}}
                div(style= "width:8px;display:inline-block")
                input.form-control(ng-model='vm.partnerAdvanceSearchQuery.weeklyActivePlayerInput1', style="width:80px;display:inline-block", type = 'number', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                div.text-center(style="width:15px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.weeklyActivePlayerOperator === 'range'") ~
                input.form-control(type="number" ng-model="vm.partnerAdvanceSearchQuery.weeklyActivePlayerInput2" style="width:80px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.weeklyActivePlayerOperator === 'range'" ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'MONTHLY_ACTIVE' | translate}}
            div
                select.form-control(ng-model='vm.partnerAdvanceSearchQuery.monthlyActivePlayerOperator', style="width:75px;display:inline-block", ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                    option(value='>=') >=
                    option(value='=') =
                    option(value='<=') <=
                    option(value='range') {{'range' | translate}}
                div(style= "width:8px;display:inline-block")
                input.form-control(ng-model='vm.partnerAdvanceSearchQuery.monthlyActivePlayerInput1', style="width:80px;display:inline-block", type = 'number', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                div.text-center(style="width:15px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.monthlyActivePlayerOperator === 'range'") ~
                input.form-control(type="number" ng-model="vm.partnerAdvanceSearchQuery.monthlyActivePlayerInput2" style="width:80px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.monthlyActivePlayerOperator === 'range'" ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'VALID_PLAYER' | translate}}
            div
                select.form-control(ng-model='vm.partnerAdvanceSearchQuery.validPlayersOperator', style="width:75px;display:inline-block", ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                    option(value='>=') >=
                    option(value='=') =
                    option(value='<=') <=
                    option(value='range') {{'range' | translate}}
                div(style= "width:8px;display:inline-block")
                input.form-control(ng-model='vm.partnerAdvanceSearchQuery.validPlayersInput1', style="width:80px;display:inline-block", type = 'number', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                div.text-center(style="width:15px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.validPlayersOperator === 'range'") ~
                input.form-control(type="number" ng-model="vm.partnerAdvanceSearchQuery.validPlayersInput2" style="width:80px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.validPlayersOperator === 'range'" ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'TOTAL_CHILDREN_COUNT' | translate}}
            div
                select.form-control(ng-model='vm.partnerAdvanceSearchQuery.totalPlayerDownlineOperator', style="width:75px;display:inline-block", ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                    option(value='>=') >=
                    option(value='=') =
                    option(value='<=') <=
                    option(value='range') {{'range' | translate}}
                div(style= "width:8px;display:inline-block")
                input.form-control(ng-model='vm.partnerAdvanceSearchQuery.totalPlayerDownlineInput1', style="width:80px;display:inline-block", type = 'number', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                div.text-center(style="width:15px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.totalPlayerDownlineOperator === 'range'") ~
                input.form-control(type="number" ng-model="vm.partnerAdvanceSearchQuery.totalPlayerDownlineInput2" style="width:80px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.totalPlayerDownlineOperator === 'range'" ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'TOTAL_CHILDREN_DEPOSIT' | translate}}
            div
                select.form-control(ng-model='vm.partnerAdvanceSearchQuery.totalChildrenDepositOperator', style="width:75px;display:inline-block", ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                    option(value='>=') >=
                    option(value='=') =
                    option(value='<=') <=
                    option(value='range') {{'range' | translate}}
                div(style= "width:8px;display:inline-block")
                input.form-control(ng-model='vm.partnerAdvanceSearchQuery.totalChildrenDepositInput1', style="width:80px;display:inline-block", type = 'number', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                div.text-center(style="width:15px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.totalChildrenDepositOperator === 'range'") ~
                input.form-control(type="number" ng-model="vm.partnerAdvanceSearchQuery.totalChildrenDepositInput2" style="width:80px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.totalChildrenDepositOperator === 'range'" ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'TOTAL_CHILDREN_BALANCE' | translate}}
            div
                select.form-control(ng-model='vm.partnerAdvanceSearchQuery.totalChildrenBalanceOperator', style="width:75px;display:inline-block", ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                    option(value='>=') >=
                    option(value='=') =
                    option(value='<=') <=
                    option(value='range') {{'range' | translate}}
                div(style= "width:8px;display:inline-block")
                input.form-control(ng-model='vm.partnerAdvanceSearchQuery.totalChildrenBalanceInput1', style="width:80px;display:inline-block", type = 'number', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                div.text-center(style="width:15px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.totalChildrenBalanceOperator === 'range'") ~
                input.form-control(type="number" ng-model="vm.partnerAdvanceSearchQuery.totalChildrenBalanceInput2" style="width:80px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.totalChildrenBalanceOperator === 'range'" ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
        .search-filter.col-xs-12.col-sm-6.col-md-3
            label.control-label {{'SETTLED_COMMISSION' | translate}}
            div
                select.form-control(ng-model='vm.partnerAdvanceSearchQuery.totalSettledCommissionOperator', style="width:75px;display:inline-block", ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                    option(value='>=') >=
                    option(value='=') =
                    option(value='<=') <=
                    option(value='range') {{'range' | translate}}
                div(style= "width:8px;display:inline-block")
                input.form-control(ng-model='vm.partnerAdvanceSearchQuery.totalSettledCommissionInput1', style="width:80px;display:inline-block", type = 'number', ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
                div.text-center(style="width:15px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.totalSettledCommissionOperator === 'range'") ~
                input.form-control(type="number" ng-model="vm.partnerAdvanceSearchQuery.totalSettledCommissionInput2" style="width:80px;display:inline-block" ng-if="vm.partnerAdvanceSearchQuery.totalSettledCommissionOperator === 'range'" ng-change='vm.getPartnersByAdvanceQueryDebounced(vm.partnerAdvanceSearchQuery)')
        .search-filter.col-md-3
            label.control-label
            button#resetPartnerQuery.btn.btn-primary.common-button-sm(style="display:block;") {{'Reset' | translate}}

.col-md-12
    .pull-right.margin-top-5
        text.margin-right-5 {{"Refresh" | translate}}
        a#partnerRefreshIcon.fa.fa-refresh(ng-click='vm.getPlatformPartnersData()')
.col-md-12
    label(ng-show='vm.platformPartnerCount') {{'Total Partner' | translate}} : {{vm.platformPartnerCount}} ({{"Search Result" | translate}} : {{vm.searchPartnerCount}})
    #partnerLoadingIcon(style="margin-left:10px")

p
.col-md-12(style="min-height:150px;")
    table.common-table#partnerDataTable.display(style="width:100% ;overflow-x: scroll")
    #partnerTablePage
p
.col-md-12
    .btn-group.text-center.margin-small
        button.btn.btn-primary.common-button(ng-if="checkViewPermission('Partner', 'Partner', 'Create')", ng-disabled="!vm.selectedPlatform", data-toggle="modal", data-target='#modalCreatePartner', ng-click='vm.prepareCreatePartner()')
            text {{"CREATE" | translate}}
            img.img-create
        button.btn.btn-primary.common-button(ng-if="checkViewPermission('Partner', 'Partner', 'SettleCommission') && !vm.partnerSettlementSubmitted[prev.settMode]", ng-repeat="prev in vm.allPartnerCommSettPreview", ng-click='vm.initSettlePartnerComm(prev)')
            text {{constPartnerCommissionSettlementType[prev.settMode] | translate}}
            .fa.fa-book
        //button.btn.btn-primary.common-button(ng-if="checkViewPermission('Platform', 'Partner', 'Delete')",ng-disabled="vm.selectedPartnerCount==0", data-toggle="modal", data-target='#modalDeletePartner')
            text {{"DELETE" | translate}}
            img.img-delete
        //button.btn.btn-primary.common-button(ng-if="checkViewPermission('Platform', 'Partner', 'Edit')",ng-disabled="vm.selectedPartnerCount!=1 || !vm.selectedSinglePartner", data-toggle="modal", data-target='#modalUpdatePartner', ng-click='vm.preUpdatePartner()')
            text {{"EDIT" | translate}}
            img.img-edit
        //button.btn.btn-primary.common-button(ng-if="checkViewPermission('Platform', 'Partner', 'EditContact')", ng-disabled="vm.selectedPartnerCount!=1 || !vm.selectedSinglePartner", data-toggle="modal", ng-click='vm.prepareEditCritical("partner")', data-target='#modalEditCritical')
            text {{"EDIT_CRITICAL_INFO" | translate}}
            img.img-edit
        //button.btn.btn-primary.common-button(ng-if="checkViewPermission('Platform', 'Partner', 'BankDetail')",ng-disabled="vm.selectedPartnerCount!=1 || !vm.selectedSinglePartner", data-toggle="modal", ng-click='vm.prepareEditPartnerPayment()', data-target='#modalBankDetail')
            text {{"BANK_DETAIL" | translate}}
            img.img-edit
        //button.btn.btn-primary.common-button(ng-if="checkViewPermission('Platform', 'Partner', 'ResetPassword')",ng-disabled="vm.selectedPartnerCount!=1 || !vm.selectedSinglePartner", data-toggle="modal", data-target='#modalPartnerPasswordReset',ng-click='vm.newPartner=vm.selectedSinglePartner; vm.partnerNewPassword = false')
            text {{"RESET_PASSWORD" | translate}}
            img.img-edit
        //button.btn.btn-primary.common-button(ng-if="checkViewPermission('Platform', 'Partner', 'LinkPlayer')",ng-disabled="vm.selectedPartnerCount!=1 || !vm.selectedSinglePartner", data-toggle="modal", data-target='#modalLinkPlayer', ng-click='vm.preLinkedPlayertoPartner()')
            text {{"Link Player" | translate}}
            img.img-edit

// Partner actions
//p
//.col-md-12
    hr.margin-top-bottom-small
    .btn-group.text-center.margin-small
        button.btn.btn-primary.common-button(ng-if="checkViewPermission('Platform', 'Partner', 'ApplyBonus')", ng-disabled="vm.selectedPartnerCount!=1 || !vm.selectedSinglePartner", data-toggle="modal", ng-click='vm.initPartnerBonus();', data-target='#modalPartnerBonus')
            text {{"APPLY_BONUS" | translate}}
            img.img-edit
        button.btn.btn-primary.common-button(ng-if="checkViewPermission('Platform', 'Partner', 'CreditAdjustment')", ng-disabled="vm.selectedPartnerCount!=1 || !vm.selectedSinglePartner", data-toggle="modal", ng-click='vm.prepareShowPartnerCreditAdjustment("adjust");', data-target='#modalPartnerCreditAdjustment')
            text {{"CREDIT_ADJUSTMENT" | translate}}
            img.img-edit

#modalPartnerInfo.modal.fade(role='dialog', data-backdrop=true, keyboard=true,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:80%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{'Partner' | translate}} : {{vm.selectedSinglePartner.partnerName}}
            .modal-body
                .panel.panel-primary
                    .panel-heading.panel-heading-sm
                        h5.text-center {{"Partner Information" | translate}}
                    .panel-body
                        table.playerInfoModalDivs
                            thead
                                tr
                                    th
                                        div {{'Type' | translate}}
                                    th {{'CONTENT' | translate}}
                                    th
                                        div {{'ACTION_BUTTON' | translate}}
                            tbody
                                tr
                                    td
                                        div {{'Basic' | translate}}
                                    td
                                        .row
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"PARTNER_NAME" | translate}}
                                                    .col-sm-8
                                                        text {{vm.selectedSinglePartner.partnerName}}
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"PARTNER_ID" | translate}}
                                                    .col-sm-8
                                                        text {{vm.selectedSinglePartner.partnerId}}
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"realName" | translate}}
                                                    .col-sm-8
                                                        text {{vm.selectedSinglePartner.realName || 'NONE' | translate}}
                                        .row
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"GENDER" | translate}}
                                                    .col-sm-8
                                                        text {{vm.getGenderFromBool(vm.selectedSinglePartner.gender) || 'NONE' | translate}}
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"DOB" | translate}}
                                                    .col-sm-8
                                                        text(style='height:inherit') {{vm.convertDOBFormat(vm.selectedSinglePartner.DOB) || 'NONE' | translate}}
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"Bind Player" | translate}}
                                                    .col-sm-8
                                                        text(style='height:inherit') {{vm.selectedSinglePartner.player.name || 'NONE' | translate}}
                                        .row
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"REGISTRATION_TIME" | translate}}
                                                    .col-sm-8
                                                        text(style='height:inherit') {{vm.selectedSinglePartner.registrationTime || 'NONE' | translate}}
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"own domain" | translate}}
                                                    .col-sm-8
                                                        text(style='height:inherit') {{vm.selectedSinglePartner.ownDomain$ || 'NONE' | translate}}
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"REMARK" | translate}}
                                                    .col-sm-8
                                                        text(style='height:inherit') {{vm.selectedSinglePartner.remarks || 'NONE' | translate}}
                                        td.text-left
                                            button.btn.btn-primary.common-button-sm(ng-click="vm.openEditPartnerDialog('basicInfo');", ng-if="checkViewPermission('Partner', 'Partner', 'Edit')", ng-disabled="vm.selectedPartnerCount!=1 || !vm.selectedSinglePartner") {{"EDIT" | translate}}
                                            br
                                            button.btn.btn-primary.common-button-sm(ng-click='vm.getPartnerInfoHistory()') {{"EDIT_HISTORY" | translate}}
                                            br
                                            button.btn.btn-primary.common-button-sm(ng-if="checkViewPermission('Partner', 'Partner', 'ResetPassword')", ng-disabled="vm.selectedPartnerCount!=1 || !vm.selectedSinglePartner", data-toggle="modal",ng-click='vm.initResetPartnerPasswordModal()',data-target='#modalPartnerPasswordReset') {{"RESET_PASSWORD" | translate}}

                                tr
                                    td
                                        div {{"CONTACT_INFO" | translate}}
                                    td
                                        .row
                                            div(style='min-width:max-content;display:inline-block;width:11.11111112%;padding-left:15px;padding-right:15px;white-space: nowrap;')
                                                label {{"TELEPHONE" | translate}}
                                            div(style='display:inline-block;min-width:max-content;width:60%;padding-left:15px;padding-right:15px;white-space: nowrap;')
                                                text.
                                                    {{vm.selectedSinglePartner.phoneNumber || 'Unknown' | translate}}&nbsp;
                                                    ({{vm.selectedSinglePartner.phoneCity || 'Unknown' | translate}},&nbsp;
                                                    {{vm.selectedSinglePartner.phoneProvince || 'Unknown' | translate}}/
                                                    {{vm.selectedSinglePartner.phoneType || 'Unknown' | translate}})
                                        .row
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"WECHAT" | translate}}
                                                    .col-sm-8
                                                        text {{vm.selectedSinglePartner.wechat || 'Unknown' | translate}}
                                        .row
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"QQ" | translate}}
                                                    .col-sm-8
                                                        text {{vm.selectedSinglePartner.qq || 'Unknown' | translate}}
                                        .row
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"EMAIL" | translate}}
                                                    .col-sm-8
                                                        text {{vm.selectedSinglePartner.email || 'Unknown' | translate}}

                                        td.text-left
                                            button.btn.btn-primary.common-button-sm(ng-if="checkViewPermission('Partner', 'Partner', 'EditContact')", ng-disabled="vm.selectedPartnerCount!=1 || !vm.selectedSinglePartner", data-toggle="modal", ng-click="vm.openEditPartnerDialog('contactInfo')") {{"EDIT" | translate}}
                                            br
                                            button.btn.btn-primary.common-button-sm(ng-click='vm.getPartnerContactHistory()') {{"EDIT_HISTORY" | translate}}

                                tr
                                    td
                                        div {{'WITHDRAW_INFO' | translate}}
                                    td
                                        .row
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"BANK_NAME" | translate}}
                                                    .col-sm-8
                                                        text {{vm.allBankTypeList[vm.selectedSinglePartner.bankName] || vm.selectedSinglePartner.bankName || 'Unknown' | translate}}
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"BANK_ACCOUNT_NAME" | translate}}
                                                    .col-sm-8
                                                        text {{vm.selectedSinglePartner.bankAccountName || 'Unknown' | translate}}
                                            //.col-md-4
                                            //    .row
                                            //        .col-sm-4(style='white-space: nowrap;')
                                            //            label {{"BANK_ACCOUNT_TYPE" | translate}}
                                            //        .col-sm-8
                                            //            text(ng-if='vm.selectedSinglePartner.bankAccountType==2 || vm.selectedSinglePartner.bankAccountType=="2"') {{'Debit Card '|translate}}
                                            //            text(ng-if='vm.selectedSinglePartner.bankAccountType==1 || vm.selectedSinglePartner.bankAccountType=="1"') {{'Credit Card '|translate}}
                                            //            text(ng-if='vm.selectedSinglePartner.bankAccountType==3 || vm.selectedSinglePartner.bankAccountType=="3"') {{'储存卡'|translate}}
                                            //            text(ng-if='vm.selectedSinglePartner.bankAccountType==4 || vm.selectedSinglePartner.bankAccountType=="4"') {{'储蓄卡'|translate}}
                                            //            text(ng-if='vm.selectedSinglePartner.bankAccountType==5 || vm.selectedSinglePartner.bankAccountType=="5"') {{'商务理财卡'|translate}}
                                            //            text(ng-if='vm.selectedSinglePartner.bankAccountType==6 || vm.selectedSinglePartner.bankAccountType=="6"') {{'工商银行一卡通'|translate}}
                                        .row
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"BANK_ACCOUNT" | translate}}
                                                    .col-sm-8
                                                        text {{vm.selectedSinglePartner.encodedBankAccount || 'Unknown' | translate}}
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"BANK_ACCOUNT_PROVINCE" | translate}}
                                                    .col-sm-8
                                                        text {{vm.showProvinceStr ? vm.showProvinceStr : 'Unknown' | translate}}
                                        .row
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"BANK_ACCOUNT_CITY" | translate}}
                                                    .col-sm-8
                                                        text {{vm.showCityStr ? vm.showCityStr : 'Unknown' | translate}}
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"BANK_ACCOUNT_DISTRICT" | translate}}
                                                    .col-sm-8
                                                        text {{vm.showDistrictStr ? vm.showDistrictStr : 'Unknown' | translate}}
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"Bank Address" | translate}}
                                                    .col-sm-8(style='min-width:max-content;')
                                                        text {{vm.selectedSinglePartner.bankAddress || 'Unknown' | translate}}

                                        td.text-left
                                            button.btn.btn-primary.common-button-sm(ng-if="checkViewPermission('Partner', 'Partner', 'BankDetail')",ng-disabled="vm.selectedPartnerCount!=1 || !vm.selectedSinglePartner", data-toggle="modal", ng-click="vm.openEditPartnerDialog('withdrawInfo');") {{"EDIT" | translate}}
                                            br
                                            button.btn.btn-primary.common-button-sm(ng-if="checkViewPermission('Partner', 'Partner', 'PaymentInformationHistory')",ng-disabled="vm.selectedPartnerCount!=1 || !vm.selectedSinglePartner", ng-click='vm.getPaymentInfoHistory()') {{"EDIT_HISTORY" | translate}}

                                tr
                                    td
                                        div {{'IP' | translate}}
                                    td
                                        .row
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"IP" | translate}}
                                                    .col-sm-8
                                                        text {{vm.selectedSinglePartner.lastLoginIp || 'Unknown' | translate}}
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{'COUNTRY' | translate}}
                                                    .col-sm-8
                                                        text {{vm.selectedSinglePartner.country || 'Unknown' | translate}}
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{"CITY" | translate}}
                                                    .col-sm-8
                                                        text {{vm.selectedSinglePartner.city || 'Unknown' | translate}}
                                        .row
                                            .col-md-4
                                                .row
                                                    .col-sm-4(style='white-space: nowrap;')
                                                        label {{'Registration Domain' | translate}}
                                                    .col-sm-8(style='word-wrap:break-word;')
                                                        a(href='{{vm.selectedSinglePartner.domain}}', title='{{vm.selectedSinglePartner.domain}}', target='_blank') {{vm.selectedSinglePartner.$displayDomain || 'Unknown' | translate}}

                                    td.text-left
                                        button.btn.btn-primary.common-button-sm(ng-click='vm.showPartnerIPHistory()') {{"View Details" | translate}}

                                tr
                                    td
                                        div {{'Partner Architecture' | translate}}
                                    td
                                        .row
                                            .col-md-4
                                                div
                                                    label {{"Parent Partner Name" | translate}}
                                                    text.margin-left-5 {{vm.selectedSinglePartner.parent.partnerName || 'NONE' | translate}}
                                        .row
                                            .col-md-4
                                                div
                                                    label {{'Child Partner Headcount' | translate}}
                                                    text.margin-left-5 ({{vm.selectedSinglePartner.childrencount || 0}})

                                    td.text-left
                                        button.btn.btn-primary.common-button-sm(ng-if="checkViewPermission('Partner', 'Partner', 'EditChildPartner')", data-toggle="modal", ng-click='vm.initEditChildPartner()', data-target='#modalEditChildPartner') {{"EDIT" | translate}}

                div(ng-if="vm.selectedPartnerCommissionPreview")
                    table.simple-table
                        thead
                            tr
                                th {{'PARTNER_NAME' | translate}}
                                th {{'REAL_NAME' | translate}}
                                th(ng-repeat= "grp in vm.selectedPartnerCommissionPreview.rawCommissions") {{grp.groupName=="noGroup" ? "" : grp.groupName | translate}} {{"Commission" | translate}}
                                th {{'TOTAL_REWARD_FEE' | translate}}
                                th {{'TOTAL_PLATFORM_FEE' | translate}}
                                th {{'TOTAL_TOPUP_FEE' | translate}}
                                th {{'TOTAL_WITHDRAWAL_FEE' | translate}}
                                th {{'NET_COMMISSION' | translate}}
                                th {{'PARTNER_ACCOUNT_BALANCE' | translate}}
                                th {{'ACTIVE_DOWNLINES' | translate}}
                                th {{'PREVIOUS_THREE_INTERVAL_ACTIVE_DOWNLINES' | translate}}
                                th {{'PREVIOUS_THREE_INTERVAL_NET_COMMISSSION' | translate}}
                        tbody
                            tr
                                td {{vm.selectedPartnerCommissionPreview.partnerName}}
                                td {{vm.selectedPartnerCommissionPreview.partnerRealName}}
                                td(ng-repeat= "(igrp, grp) in vm.selectedPartnerCommissionPreview.rawCommissions")
                                    a(ng-style='grp.isCustomCommissionRate ? {color:"red"} : {}', data-toggle="modal", data-target='#modalCommissionTable', ng-click="vm.partnerCommVar.partner=i; vm.partnerCommVar.group=grp; vm.partnerCommVar.selectTab=igrp; vm.calculatePartnerDLTotalDetail(vm.selectedPartnerCommissionPreview.downLinesRawCommissionDetail,'consumptionDetail')") {{grp.amount}}
                                td
                                    a(data-toggle="modal", data-target='#modalRewardFeeTable', ng-click="vm.partnerCommVar.partner=i; vm.calculatePartnerDLTotalDetail(vm.selectedPartnerCommissionPreview.downLinesRawCommissionDetail,'rewardDetail')", ng-style='vm.selectedPartnerCommissionPreview.partnerCommissionRateConfig.rateAfterRebatePromoIsCustom ? {color:"red"} : {}') {{vm.selectedPartnerCommissionPreview.totalRewardFee}}
                                td
                                    a(ng-style='vm.selectedPartnerCommissionPreview.isAnyCustomPlatformFeeRate ? {color:"red"} : {}', data-toggle="modal", data-target='#modalCommissionTable', ng-click="vm.partnerCommVar.partner=i; vm.partnerCommVar.group=vm.selectedPartnerCommissionPreview.rawCommissions[vm.partnerCommVar.platformFeeTab]; vm.partnerCommVar.selectTab=vm.partnerCommVar.platformFeeTab; vm.calculatePartnerDLTotalDetail(vm.selectedPartnerCommissionPreview.downLinesRawCommissionDetail,'consumptionDetail')") {{vm.selectedPartnerCommissionPreview.totalPlatformFee}}
                                td
                                    a(data-toggle="modal", data-target='#modalTopUpFeeTable', ng-click="vm.partnerCommVar.partner=i; vm.calculatePartnerDLTotalDetail(vm.selectedPartnerCommissionPreview.downLinesRawCommissionDetail,'topUpDetail')", ng-style='vm.selectedPartnerCommissionPreview.partnerCommissionRateConfig.rateAfterRebateTotalDepositIsCustom ? {color:"red"} : {}') {{vm.selectedPartnerCommissionPreview.totalTopUpFee}}
                                td
                                    a(data-toggle="modal", data-target='#modalWithdrawalFeeTable', ng-click="vm.partnerCommVar.partner=i; vm.calculatePartnerDLTotalDetail(vm.selectedPartnerCommissionPreview.downLinesRawCommissionDetail,'withdrawalDetail')", ng-style='vm.selectedPartnerCommissionPreview.partnerCommissionRateConfig.rateAfterRebateTotalWithdrawalIsCustom ? {color:"red"} : {}') {{vm.selectedPartnerCommissionPreview.totalWithdrawalFee}}
                                td {{vm.selectedPartnerCommissionPreview.nettCommission}}
                                td {{vm.selectedPartnerCommissionPreview.partnerCredit}}
                                td
                                    a(data-toggle="modal", data-target='#modalActivePlayerTable', ng-click="vm.partnerCommVar.partner=i") {{vm.selectedPartnerCommissionPreview.activeDownLines}}
                                td
                                    text.span {{vm.selectedPartnerCommissionPreview.pastActiveDownLines[0]? vm.selectedPartnerCommissionPreview.pastActiveDownLines[0] : "-" | translate}} {{","}} {{vm.selectedPartnerCommissionPreview.pastActiveDownLines[1]? vm.selectedPartnerCommissionPreview.pastActiveDownLines[1] : "-" | translate}} {{","}} {{vm.selectedPartnerCommissionPreview.pastActiveDownLines[2]? vm.selectedPartnerCommissionPreview.pastActiveDownLines[2] : "-" | translate}}
                                td
                                    text.span {{calculateTotalSum(vm.selectedPartnerCommissionPreview.pastNettCommission, "", "")}} {{" ("}} {{vm.selectedPartnerCommissionPreview.pastNettCommission[0]? vm.selectedPartnerCommissionPreview.pastNettCommission[0] : "-" | translate}} {{","}} {{vm.selectedPartnerCommissionPreview.pastNettCommission[1]? vm.selectedPartnerCommissionPreview.pastNettCommission[1] : "-" | translate}} {{","}} {{vm.selectedPartnerCommissionPreview.pastNettCommission[2]? vm.selectedPartnerCommissionPreview.pastNettCommission[2] : "-" | translate}} {{")"}}


#modalCreatePartner.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"CREATE_PARTNER" | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .well
                            .row
                                include partner-create-form
            .modal-footer
                //button.btn.btn-primary.common-button(ng-if='form_new_partner.$invalid', disabled='true') {{"CREATE" | translate}}
                button.btn.btn-primary.common-button(data-dismiss='modal',ng-disabled='form_new_partner.$invalid || vm.passwordLengthCheck(vm.newPlayer.password) || !vm.partnerParentValid', ng-click="vm.createNewPartner();") {{"CREATE" | translate}}
                button.btn.btn-warning.common-button(data-dismiss='modal') {{"CANCEL" | translate}}

#modalDeletePartner.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:80%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"DELETE_PARTNER" | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .row
                            .col-md-12
                                .well
                                    label {{"Are you sure you want to delete partner"|translate}}
                                    strong.text-danger &nbsp;{{vm.selectedSinglePartner.partnerName}}
                                    label ?
            .modal-footer
                button.btn-sm.margin-right-5.btn.btn-primary.col-md-2(data-dismiss='modal',ng-click="vm.deletePartners();") {{"CONFIRM" | translate}}
                button.btn-sm.margin-right-5.btn.btn-warning.col-md-2(data-dismiss='modal') {{"CANCEL" | translate}}

//#modalUpdatePartner.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"EDIT_PARTNER" | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .well
                            .row
                                include partner-edit-form
            .modal-footer
                button.common-button.margin-right-5.btn.btn-primary(ng-if='!vm.isEditingPartner', ng-click="vm.isEditingPartner=true") {{"EDIT" | translate}}
                button.common-button.margin-right-5.btn.btn-primary(ng-if='vm.isEditingPartner', ng-click="vm.preUpdatePartner()") {{"CANCEL" | translate}}
                button.common-button.margin-right-5.btn.btn-primary(data-dismiss='modal',ng-if='vm.isEditingPartner', ng-disabled='form_edit_partner.$invalid || form_edit_partner.$pristine', ng-click="vm.updatePartner();") {{"UPDATE" | translate}}
                button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CLOSE" | translate}}

//#modalBankDetail.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:50%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"BANK_DETAIL" | translate}} of {{vm.selectedSinglePartner.partnerName}}
            .modal-body
                .well
                    .form-group-col-md-6
                        label.control-label {{'BANK_ACCOUNT_NAME' | translate}}
                        input.form-control(ng-model='vm.partnerBank.bankAccountName', disabled)
                    .form-group-col-md-6
                        label.control-label {{'BANK_NAME' | translate}}
                        select.form-control(ng-model='vm.partnerBank.bankName', ng-disabled='!vm.isEditingPartnerPayment')
                            option(ng-repeat="(i,v) in vm.allBankTypeList", value='{{i}}') {{v}}
                    .form-group-col-md-6
                        label.control-label {{'BANK_ACCOUNT' | translate}}
                        div
                            input.form-control.inlineBlk(ng-model='vm.partnerBank.bankAccount', style='width:calc(100% - 100px)', ng-disabled='!vm.isEditingPartnerPayment')
                            button.btn.btn-info.pull-right(style='width:80px', ng-click='vm.isEditingPartnerPaymentShowVerify=!vm.isEditingPartnerPaymentShowVerify')
                                text(ng-if='vm.isEditingPartnerPaymentShowVerify') {{::'CLOSE' | translate}}
                                text(ng-if='!vm.isEditingPartnerPaymentShowVerify') {{::'VERIFY' | translate}}
                    .panel.panel-default.margin-top-10(ng-if='vm.isEditingPartnerPaymentShowVerify')
                        .panel-body
                            label.control-label {{"VERIFY_BANK_ACCOUNT" | translate}}
                            input.form-control(type="text", placeholder="{{'VERIFY_BANK_ACCOUNT' | translate}}", ng-model="vm.verifyBankAccount")
                            p
                            button.btn.btn-primary.common-button(ng-disabled='!vm.verifyBankAccount', ng-click="vm.verifyPlayerBankAccount()") {{"VERIFY" | translate}}
                            label.fa.fa-check.colorGreen(ng-if='vm.correctVerifyBankAccount')
                            label.fa.fa-times.colorRed(ng-if='(!vm.correctVerifyBankAccount && (vm.correctVerifyBankAccount !== undefined))')
                    .form-group-col-md-6
                        label.control-label {{'BANK_ACCOUNT_TYPE' | translate}}
                        select.form-control(ng-model='vm.partnerBank.bankAccountType', ng-disabled='!vm.isEditingPartnerPayment')
                            option(value='2') {{'Debit Card '|translate}}
                            option(value='1') {{'Credit Card '|translate}}
                            option(value='3') {{'储存卡'|translate}}
                            option(value='4') {{'储蓄卡'|translate}}
                            option(value='5') {{'商务理财卡'|translate}}
                            option(value='6') {{'工商银行一卡通'|translate}}
                    .form-group-col-md-6
                        label.control-label {{'BANK_ACCOUNT_CITY' | translate}}
                        input.form-control(ng-model='vm.partnerBank.bankAccountCity', ng-disabled='!vm.isEditingPartnerPayment')
                    .form-group-col-md-6
                        label.control-label {{'Bank Address' | translate}}
                        input.form-control(ng-model='vm.partnerBank.bankAddress', ng-disabled='!vm.isEditingPartnerPayment')
                    .form-group-col-md-6
                        label.control-label {{'BANK_BRANCH' | translate}}
                        input.form-control(ng-model='vm.partnerBank.bankBranch', ng-disabled='!vm.isEditingPartnerPayment')
            .modal-footer
                button.common-button.margin-right-5.btn.btn-primary(ng-if='!vm.isEditingPartnerPayment', ng-click="vm.isEditingPartnerPayment=true") {{"EDIT" | translate}}
                button.common-button.margin-right-5.btn.btn-primary(ng-if='vm.isEditingPartnerPayment', ng-click="vm.prepareEditPartnerPayment()") {{"CANCEL" | translate}}
                button.common-button.margin-right-5.btn.btn-primary(data-dismiss='modal',ng-if='vm.isEditingPartnerPayment', ng-click="vm.updatePartnerBank();") {{"UPDATE" | translate}}
                button.common-button.margin-right-5.btn.btn-primary(data-dismiss='modal') {{"CLOSE" | translate}}

//#telPopover.hide(style="width: 600px")
//    button.playerMessage.common-button.margin-right-5.btn.btn-success() {{'MESSAGE' | translate}}
    button.playerTelephone.common-button.margin-right-5.btn.btn-success() {{'TELPHONE' | translate}}
#totalReferralPopover.hide(style="width: 900px")
    label {{vm.referralPopoverTitle}} {{vm.partnerData.partnerName}}
    br(ng-show ='vm.referralPartner.length == 0')
    text.text-danger(ng-show ='vm.referralPartner.length == 0') No Referral.
    table.simple-table(ng-show ='vm.referralPartner.length > 0')
        thead
            tr
                th {{'INDEX' | translate}}
                th {{'NAME' | translate}}
                th {{'REAL_NAME' | translate}}
                th {{'CONSUMPTION' | translate}}
                th {{'TOP_UP_SUM' | translate}}
                th {{'TOP_UP_TIMES' | translate}}
                th {{'LOCKED_CREDIT' | translate}}
                th {{'VALID_CREDIT' | translate}}
                th {{'STATUS' | translate}}
                th {{'TRUST_LEVEL' | translate}}
        tbody
            tr(ng-repeat='(i,v) in vm.referralPartner')
                td {{i+1}}
                td {{v.name}}
                td {{v.realName}}
                td {{v.consumptionSum}}
                td {{v.topUpSum}}
                td {{v.topUpTimes}}
                td {{v.lockedCredit}}
                td {{v.validCredit}}
                td {{v.status}}
                td {{v.trustLevel}}
                //-label Referral Details for {{vm.selectedSinglePartner.partnerName}}

#totalReferralModal.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"Total referral players for" | translate}} : {{vm.selectedSinglePartner.partnerName}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .well
                            .inlineBlk
                                label {{"REGISTRATION_TIME_START" | translate}}
                                .regStartTime
                                //input.form-control(type='text', ng-model='vm.totalReferralPlayer.regStartTime')
                            .inlineBlk
                                label {{"REGISTRATION_TIME_END" | translate}}
                                .regEndTime
                                //input.form-control(type='text', ng-model='vm.totalReferralPlayer.regEndTime')
                            .inlineBlk
                                label {{"LAST_ACCESS_TIME_START" | translate}}
                                .loginStartTime
                                //input.form-control(type='text', ng-model='vm.totalReferralPlayer.loginStartTime')
                            .inlineBlk
                                label {{"LAST_ACCESS_TIME_END" | translate}}
                                .loginEndTime
                                //input.form-control(type='text', ng-model='vm.totalReferralPlayer.loginEndTime')
                            .inlineBlk
                                label {{"PLAYER_NAME" | translate}}
                                input.form-control(type='text', ng-model='vm.totalReferralPlayer.playerName')
                            .inlineBlk
                                label {{"realName" | translate}}
                                input.form-control(type='text', ng-model='vm.totalReferralPlayer.realName')
                            .inlineBlk
                                label {{"Qty_Min" | translate}} {{"topUpTimes" | translate}}
                                input.form-control(type='number', ng-model='vm.totalReferralPlayer.minTopupTimes', style='width: 80px;')
                            .inlineBlk
                                label {{"Qty_Max" | translate}} {{"topUpTimes" | translate}}
                                input.form-control(type='number', ng-model='vm.totalReferralPlayer.maxTopupTimes', style='width: 80px;')
                            .inlineBlk
                                label {{"source" | translate}}
                                input.form-control(type='text', ng-model='vm.totalReferralPlayer.domain')
                            .inlineBlk
                                button.btn.btn-primary(ng-click='vm.getPagePartnerReferralPlayers(true)') {{'SEARCH' | translate}}

                        label {{"Total" | translate}} {{vm.totalReferralPlayer.totalCount}} {{"records" | translate}}
                        table#totalReferralPlayersTable.common-table.display(style='width:100%')
                        #totalReferralPlayersTablePage


#partnerChildrenPopover.hide(style="width: auto")
    table.simple-table
        thead
            tr
                th {{'ID' | translate}}
                th {{'NAME' | translate}}
                th {{'CHILDREN' | translate}}
        tbody
            tr(ng-repeat='(i,v) in vm.partnerChildren')
                td {{vm.partnerIdObj[v].partnerId}}
                td {{vm.partnerIdObj[v].partnerName}}
                td {{vm.partnerIdObj[v].children.length || 0}}

// Popover - Partner Permission
#partnerPermissionPopover.hide(style="width: 600px")
    #partnerPermissionTable
        table.paddingTbl
            tbody
                tr(ng-repeat='(key,v) in vm.partnerPermissionTypes')
                    td
                        i.text-primary(ng-show='v.imgType=="i"', ng-class='v.iconClass+" fa-2x"')
                        img(async=on ng-show='v.imgType=="img"', src='{{v.src}}', width='{{v.width}}', height='{{v.height}}')
                    td {{key | translate}}
                    td.permitOn(ng-class='vm.permissionPartner.permission[key] ? "":"hide"', class='{{key}}')
                        i.fa.fa-toggle-on.text-primary.margin-right-5.togglePartner(data-which='{{key}}', data-on=true)
                        a.text-primary.togglePartner(data-which='{{key}}', data-on=true) {{"ON" | translate}}
                    td.permitOff(ng-class='vm.permissionPartner.permission[key] ? "hide":""', class='{{key}}')
                        i.fa.fa-toggle-off.text-danger.margin-right-5.togglePartner(data-which='{{key}}', data-on=false)
                        a.text-danger.togglePartner(data-which='{{key}}', data-on=false) {{"OFF" | translate}}
        .textareaDetail.margin-top-bottom-small
            textarea.permissionRemark(placeholder='{{"Please add remark." | translate}}')
        .text-center
            button.btn.btn-primary.submit {{'CONFIRM' | translate}}

#modalPartnerPasswordReset.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:60%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{'RESET_PARTNER_PASSWORD' | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .well
                            .form-group
                                text.control-label {{"The password of partner"|translate}}
                                text.text-success &nbsp;{{vm.selectedSinglePartner.partnerName}}
                                span &nbsp;{{"will be reset. Are you sure?"|translate}}
                            .form-group
                                label.control-label {{'NEW_PASSWORD' | translate}} ({{'optional' | translate}})
                                input.form-control(ng-model='vm.customNewPassword', placeholder='{{"Leaving empty will generate a random password." | translate}}')
                                text {{"Note: " | translate}}{{"Leaving empty will generate a random password." | translate}}
                        .well(ng-if='vm.partnerNewPassword')
                            .form-group
                                text The new password for&nbsp;
                                span.text-success {{vm.selectedSinglePartner.partnerName}}
                                span &nbsp;is&nbsp;
                                strong.text-danger {{vm.partnerNewPassword}}
            .modal-footer
                button.common-button.margin-right-5.btn.btn-success(ng-if='!vm.partnerNewPassword', ng-click='vm.submitResetPartnerPassword()') {{'RESET_PASSWORD' | translate}}
                button.common-button.margin-right-5.btn.btn-success(ng-if='vm.partnerNewPassword', data-dismiss='modal') {{'OK' | translate}}
                button.common-button.margin-right-5.btn.btn-warning(ng-if='!vm.partnerNewPassword', data-dismiss='modal') {{"CANCEL" | translate}}


#modalLinkPlayer.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{'Link Player' | translate}} {{"To Partner" | translate}} : {{vm.selectedSinglePartner.partnerName}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .well
                            .inlineBlk
                                label {{'playerName' | translate}}:&nbsp;
                                input.form-control(type='text', ng-model='vm.linkPlayerText', ng-change='vm.linkPlayerTextChange()')
                            .inlineBlk
                                i.linkPlayerTextFalse.margin-left-5.fa.fa-times.text-danger(style='width:10px;display:none')
                                i.linkPlayerTextTrue.margin-left-5.fa.fa-check.text-success(style='width:10px;display:none')
                                .inlineBlk.text-danger.margin-left-5 {{vm.linkPlayerStatement}}
            .modal-footer
                button.common-button.margin-right-5.btn.btn-success(data-dismiss='modal', ng-click='vm.submitLinkPlayer()', ng-disabled="!vm.linkPlayerFound") {{'Link Player' | translate}}
                button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CANCEL" | translate}}

// add partner feedback - Modal
#modalAddPartnerFeedback.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false, aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:60%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"FEEDBACK_PARTNER" | translate}}
            .modal-body
                .panel.panel-primary
                    ul.nav.nav-tabs.common-nav-tabs.popupHeaderMenu
                        .pull-left.padding-all-5
                        li.active(id='addPartnerFeedbackTab', ng-show="checkViewPermission('Partner', 'Feedback','AddFeedback')")
                            a.common-tab(data-toggle="tab", ng-disabled="!vm.canEditPartner() || vm.selectedPartnerCount != 1", ng-click="vm.feedbackModalTabPartner = 'addPartnerFeedbackPanel'")
                                .fa.fa-file-text.margin-right-5
                                text.span {{"ADD_FEEDBACK" | translate}}
                        li(id='partnerFeedbackHistoryTab', ng-show="checkViewPermission('Partner', 'Feedback','FeedbackHistory')")
                            a.common-tab(data-toggle="tab", ng-disabled="!vm.canEditPartner() || vm.selectedPartnerCount != 1", ng-click="vm.feedbackModalTabPartner = 'partnerFeedbackHistoryPanel'; vm.prepareShowFeedbackRecord( vm.canEditPartner() );")
                                .fa.fa-file-text.margin-right-5
                                text.span {{"Feedback History" | translate}}

                #addPartnerFeedbackPanel.panel-body(ng-if="vm.feedbackModalTabPartner === 'addPartnerFeedbackPanel'")
                    form(name='form_feedback').well
                        .form-group
                            label.control-label {{'PARTNER_NAME' | translate}}
                            label.form-control {{vm.isOneSelectedPartner().partnerName}}
                        .form-group
                            label.control-label {{'FEEDBACK_RESULTS' | translate}}
                            button.btn.btn-primary(style='margin-left:20px;', ng-click="vm.addPartnerFeedbackResultData={}; vm.deletePartnerFeedbackResultData={};", ng-show="checkViewPermission('Partner', 'Feedback','ModifyFeedbackResult')", data-toggle="modal", data-target="#modalAddPartnerFeedbackResult") {{"ADD" | translate}}
                            select.form-control(style='margin-top:5px;', ng-model='vm.partnerFeedback.result', required)
                                option(ng-repeat='(i,v) in vm.allPartnerFeedbackResults', value='{{v.key}}') {{v.value}}
                        .form-group
                            label.control-label {{'FEEDBACK_TOPIC' | translate}}
                            button.btn.btn-primary(style='margin-left:20px;', ng-click="vm.addPartnerFeedbackTopicData={}; vm.deletePartnerFeedbackTopicData={};", ng-show="checkViewPermission('Partner', 'Feedback','ModifyFeedbackTopic')", data-toggle="modal", data-target="#modalAddPartnerFeedbackTopic") {{"ADD" | translate}}
                            select.form-control(style='margin-top:5px;', ng-model='vm.partnerFeedback.topic', required)
                                option(ng-repeat='(i,v) in vm.partnerFeedbackTopic', value='{{v.key}}') {{v.value}}
                        .form-group
                            label.control-label {{'FEEDBACK_CONTENT' | translate}}
                            .textareaDetail
                                textarea.form-control(rows='4', ng-model='vm.partnerFeedback.content')

                #partnerFeedbackHistoryPanel.panel-body(ng-show="vm.feedbackModalTabPartner === 'partnerFeedbackHistoryPanel'")
                    .well.searchDiv
                        .inlineBlk
                            label {{"Start date" | translate}}
                            .startTime
                        .inlineBlk
                            label {{"End date" | translate}}
                            .endTime
                        .inlineBlk
                            button.common-button.btn.btn-primary(ng-click='vm.getFeedbackRecord()') {{'FILTER' | translate}}
                            i.fa.fa-spinner.fa-spin(ng-if='vm.partnerFeedbackRecord.searching')
                    #partnerFeedbackRecord
                        label {{"Total" | translate}} {{vm.partnerFeedbackRecord.totalCount}} {{"records" | translate}}
                            .inlineBlk.margin-left-5(ng-if='vm.partnerFeedbackRecord.searching')
                                i.fa.fa-spin.fa-spinner
                    table#partnerFeedbackRecordTable.common-table.wordWrap.tbodyNoWrap.display(style='width:100%')
                    #partnerFeedbackRecordTablePage

            .modal-footer(ng-if="vm.feedbackModalTabPartner === 'addPartnerFeedbackPanel'")
                button.common-button.margin-right-5.btn.btn-primary(data-dismiss='modal', ng-disabled='form_feedback.$invalid', ng-click="vm.updatePartnerFeedback();") {{"ADD" | translate}}
                button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CANCEL" | translate}}

// Partner actions - Modal
#modalPartnerBonus.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:50%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"APPLY_BONUS" | translate}} : {{vm.selectedSinglePartner.partnerName}}
            .modal-body
                form(name='form_partner_bonus').well
                    .form-group-col-md-6
                        label.control-label {{'CREDIT' | translate}}
                        input.leftALignNumber.form-control(type='number', ng-model='vm.partnerBonus.amount', required)
                    //.form-group-col-md-6
                    //    label.control-label {{'BONUS_ID' | translate}}
                    //    input.form-control(ng-model='vm.partnerBonus.bonusId', required)
                    .form-group-col-md-6
                        label.control-label {{'HONOREE_DETAIL' | translate}}
                        input.form-control(ng-model='vm.partnerBonus.honoreeDetail')
                    .form-group-col-md-6.margin-top-5
                        label.control-label.margin-right-5 {{'FORCE' | translate}}
                        input(type='checkbox', ng-model='vm.partnerBonus.bForce')
            .modal-footer
                button.common-button.margin-right-5.btn.btn-success(ng-disabled='form_partner_bonus.$invalid || form_partner_bonus.$pristine', ng-show='vm.partnerBonus.showSubmit', ng-click='vm.applyPartnerBonus()') {{'APPLY' | translate}}
                button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CLOSE" | translate}}
                label.inlineBlk.margin-right-5(ng-if='vm.partnerBonus.resMsg') {{vm.partnerBonus.resMsg}}
                i.fa.fa-spin.fa-spinner.margin-right-5(ng-if='!vm.partnerBonus.showSubmit && !vm.partnerBonus.resMsg')



#partnerStatusPopover.hide(style="width: 600px", ng-non-bindable)
    //- label The status for {{vm.statusPopover.name}}
    //- .well
    table.simple-table
        tr
            td(style='text-align:left')
                div(ng-repeat='(i,v) in vm.allPartnersStatusString')
                    label
                        input.partnerStatusChange.pull-left(data-row='{{vm.partnerStatusPopover}}' data-status='{{v}}' type='radio' name='partnerstatus' ng-checked='v==vm.partnerStatusPopover.status')
                        span.padding-left-5 {{vm.allPartnersStatusKeys[v-1]|translate}}
                //- .well.showGames.collapse
                //-     label {{"BANNED_FROM_THESE_PROVIDERS" | translate}}
                //-     div(ng-repeat='(i,v) in vm.showPlatform.gameProviders')
                //-         label {{vm.getProviderText(v)}}
                //-             input.playerStatusProviderForbid.pull-left.margin-right-5(type='checkbox', data-provider='{{v}}', ng-checked='vm.statusPopover.forbidProviders.indexOf(v)>-1')
                div.partnerStatusConfirmation
                    label {{'REASON' | translate}}
                    .textareaDetail
                        .well(style='padding:5px;')
                            textarea.partnerStatusChangeReason(rows="3" style="border:none")
                    button.common-button.margin-right-5.btn.btn-success.partnerStatusConfirm.disabled {{'CONFIRM' | translate}}
                    button.common-button.margin-right-5.btn.btn-warning.partnerStatusCancel {{'CANCEL' | translate}}
            td
                button.btn.common-button.btn-primary.partnerStatusHistory {{'SHOW_CHANGE_HISTORY' | translate}}
                table(ng-if='vm.partnerStatusHistory && vm.partnerStatusHistory.length>0')
                    thead
                        tr
                            th {{'TIME' | translate}}
                            th {{'REASON' | translate}}
                            th {{'STATUS' | translate}}
                            th {{'ADMIN' | translate}}
                    tbody
                        tr(ng-repeat='(i,v) in vm.partnerStatusHistory')
                            td {{vm.dateReformat(v.createTime)}}
                            td(style='max-width:200px') {{v.reason}}
                            td {{vm.allPartnersStatusKeys[v.status-1] | translate}}
                            td {{v.adminName}}
                div(ng-if='vm.partnerStatusHistory.length==0') {{'NO_RECORD' | translate}}

// credit adjustment - Modal
#modalPartnerCreditAdjustment.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:60%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{vm.partnerCreditChange.modaltitle | translate}} : {{vm.selectedSinglePartner.partnerName}} {{vm.selectedSinglePartner.realName && '(' + vm.selectedSinglePartner.realName + ')'}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        label {{'VALID_CREDIT' | translate}}
                        table.col-md-12.paddingTbl.text-center.datatable-sm
                            tbody
                                tr
                                    td.col-md-4.oblique {{'curData' | translate}}
                                    td.col-md-4.oblique {{'CHANGE_AMOUNT' | translate}}
                                    td.col-md-4.oblique {{'updateData' | translate}}
                                tr
                                    td {{vm.selectedSinglePartner.credits | number:2}}
                                    td
                                        input.text-success(type='number', ng-model='vm.partnerCreditChange.updateAmount',ng-change="vm.partnerCreditChange.finalValidAmount=vm.selectedSinglePartner.credits+vm.partnerCreditChange.updateAmount")
                                    td
                                        label.text-danger {{vm.partnerCreditChange.finalValidAmount || 0 | number:2}}
                                        .text-danger(ng-show='vm.partnerCreditChange.finalValidAmount<0') {{'Partner credit cannot be less than 0' | translate}}
                        .row
                            .col-md-6
                                label.control-label {{'REMARKS' | translate}}
                            .col-md-12.textareaDetail
                                textarea.form-control(type = "textarea",name = "Remarks", rows = '5', placeholder="{{'REMARKS' | translate}}", ng-model="vm.partnerCreditChange.remark")
            .modal-footer
                button.common-button.margin-right-5.btn.btn-primary(data-dismiss='modal',ng-disabled='!vm.partnerCreditChange.updateAmount || vm.partnerCreditChange.finalValidAmount<0', ng-click="vm.updatePartnerCredit();") {{"UPDATE" | translate}}
                button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CANCEL" | translate}}

#modalPartnerApiLog.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:80%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"PARTNER_LOGIN_LOG" | translate}} : {{vm.selectedSinglePartner.partnerName}}
            .modal-body
                #partnerApiLogQuery.well
                    .inlineBlk
                        label {{"Start date" | translate}}
                        .startTime
                    .inlineBlk
                        label {{"End date" | translate}}
                        .endTime
                    button.btn.btn-primary.common-button(ng-click='vm.getPartnerApiLogData(true)', style='vertical-align: bottom') {{"SEARCH" | translate}}
                    .inlineBlk(ng-show='vm.loadingPartnerApiLogTable')
                        i.fa.fa-spin.fa-spinner
                div
                    label {{"Total" | translate}} {{vm.partnerApiLog.totalCount}} {{"records" | translate}}
                    table#partnerApiLogTbl.common-table.display(style='min-width:100%')
                    #partnerApiLogTblPage.height30

#dialogEditPartner.dialog-dialog.hidden(ng-non-bindable style='width:60%;max-width:800px;')
    .dialog-content(style="overflow: scroll;height:600px;")
        .dialog-header
            a.fa.fa-times.close.btn.btn-sm(type='button', data-dismiss='dialog')
            a.fa.fa-minus.close.btn.btn-sm(type='button', data-toggle='minimize')
            h4.dialog-title {{"EDIT_PARTNER" | translate}} : {{partnerBeforeEditing.partnerName}}
        .dialog-body
            .panel
                .panel-body
                    .padding-all-5
                        .panel.panel-primary
                            .panel-heading.common-left-panel-heading
                                ul.nav.nav-tabs.common-nav-tabs
                                    li(ng-show="editPartnerPermission",ng-class="selectedTab=='basicInfo'?'active':''")
                                        a.common-tab(data-toggle="tab", ng-click="selectedTab ='basicInfo';tabClicked('basicInfo')")
                                            text.span {{"Basic" | translate}}
                                    li(ng-show="editPartnerContactPermission",ng-class="selectedTab=='contactInfo'?'active':''")
                                        a.common-tab(data-toggle="tab", ng-click="selectedTab ='contactInfo';tabClicked('contactInfo');prepareEditCritical('partner');")
                                            text.span {{"CONTACT_INFO" | translate}}
                                    li(ng-show="editPartnerWithdrawPermission",ng-class="selectedTab=='withdrawInfo'?'active':''")
                                        a.common-tab(data-toggle="tab", ng-click="selectedTab ='withdrawInfo';tabClicked('withdrawInfo');prepareEditPartnerPayment();")
                                            text.span {{"WITHDRAW_INFO" | translate}}
                                    li(ng-show="editPartnerCommissionPermission",ng-class="selectedTab=='commissionInfo'?'active':''")
                                        a.common-tab(data-toggle="tab", ng-click="selectedTab ='commissionInfo';tabClicked('commissionInfo')")
                                            text.span {{"Partner Commission Info" | translate}}

                            .panel-body.common-right-panel-body
                                div.tab-content
                                    #basicGroup.tab-pane.fade(ng-class="selectedTab =='basicInfo'?'in active':''")
                                        include partner-edit-form
                                        button.btn.btn-warning.common-button(data-dismiss='dialog') {{"CANCEL" | translate}}
                                        button.btn.btn-primary.common-button(data-dismiss='dialog', ng-disabled='form_edit_partner.$invalid', ng-click="updateEditedPartner();") {{"UPDATE" | translate}}
                                    #contactGroup.tab-pane.fade(ng-class="selectedTab =='contactInfo'?'in active':''")
                                        include partner-edit-contact
                                    #withdrawGroup.tab-pane.fade(ng-class="selectedTab =='withdrawInfo'?'in active':''")
                                        include partner-edit-withdraw
                                    #commissionGroup.tab-pane.fade(ng-class="selectedTab =='commissionInfo'?'in active':''")
                                        include partner-edit-commission-type-form

#modalPartnerInfoHistory.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:90%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{'Partner' | translate}} : {{vm.selectedSinglePartner.partnerName}}
            .modal-body
                .row
                    .col-md-12
                        label {{"Total" | translate}} {{vm.partnerInfoHistoryCount}} {{"records" | translate}}
                        table#partnerInfoHistoryTbl.common-table.display(style='min-width:100%;width:inherit')

#modalPartnerContactHistory.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:90%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{'Partner' | translate}} : {{vm.selectedSinglePartner.partnerName}}
            .modal-body
                .row
                    .col-md-12
                        label {{"Total" | translate}} {{vm.partnerContactHistoryCount}} {{"records" | translate}}
                        table#partnerContactHistoryTbl.common-table.display(style='min-width:100%;width:inherit')

#modalPartnerPaymentHistory.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:90%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{'Partner' | translate}} : {{vm.selectedSinglePartner.partnerName}}
            .modal-body
                .row
                    .col-md-12
                        label {{"Total" | translate}} {{vm.paymetHistoryCount}} {{"records" | translate}}
                        table#partnerPaymentHistoryTbl.common-table.display(style='min-width:100%;width:inherit')

#partnerIpHistory.collapse
    .panel.panel-info
        .panel-heading
            .panel-title {{'REGISTRATION' | translate}}
        .panel-body
            .inlineBlk
                text {{'registrationTime' | translate}} :&nbsp;
                label {{vm.dateReformat(vm.partnerIpHistoryData.reg[0].loginTime)}}
            .inlineBlk
                text {{'IP_ADDRESS' | translate}}:&nbsp;
                label {{vm.partnerIpHistoryData.reg[0].loginIP}}
            .inlineBlk
                text {{'country' | translate}}:&nbsp;
                label {{vm.partnerIpHistoryData.reg.country || 'Unknown' | translate}}
            .inlineBlk
                text {{'city' | translate}}:&nbsp;
                label {{vm.partnerIpHistoryData.reg.city || 'Unknown' | translate}}
    .panel.panel-info
        .panel-heading
            .panel-title {{'LAST_LOGIN_IP' | translate}}
        .panel-body
            .col-md-12(style='max-height:300px')
                table#partnerIpHistoryTable.common-table.display(style="width:100%")

#duplicatePhoneNumberLog.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false, aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:95%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"Duplicate Phone Number"|translate}}
            .modal-body
                div
                    label {{"Total" | translate}} {{vm.duplicatePhoneNumber.totalCount}} {{"records" | translate}}
                    table#duplicatePhoneNumberLogTable.common-table.display(style='min-width:100%')
                    #duplicatePhoneNumberLogTablePage.height30

#modalPartnerCommPreview.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false, aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:100%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title
                    |{{ constPartnerCommissionSettlementType[vm.selectedSettlePartnerCommPrev.settMode] | translate }}
                    | ( {{ vm.dateReformat(vm.selectedSettlePartnerCommPrev.startTime) }} -
                    | {{ vm.dateReformat(vm.selectedSettlePartnerCommPrev.endTime) }} )
            .modal-body
                div(ng-if="vm.partnerCommissionLog && vm.partnerCommissionLog.length > 0")
                    table.simple-table
                        thead
                            tr
                                th {{'PARTNER_NAME' | translate}}
                                th {{'REAL_NAME' | translate}}
                                th(ng-repeat= "grp in vm.partnerCommissionLog[0].rawCommissions") {{grp.groupName=="noGroup" ? "" : grp.groupName | translate}} {{"Commission" | translate}}
                                th {{'TOTAL_REWARD_FEE' | translate}}
                                th {{'TOTAL_PLATFORM_FEE' | translate}}
                                th {{'TOTAL_TOPUP_FEE' | translate}}
                                th {{'TOTAL_WITHDRAWAL_FEE' | translate}}
                                th {{'NET_COMMISSION' | translate}}
                                th {{'parentPartnerCommission' | translate}}
                                th {{'PARTNER_ACCOUNT_BALANCE' | translate}}
                                th {{'ACTIVE_DOWNLINES' | translate}}
                                th {{'PREVIOUS_THREE_INTERVAL_ACTIVE_DOWNLINES' | translate}}
                                th {{'PREVIOUS_THREE_INTERVAL_NET_COMMISSSION' | translate}}
                                th(width="10%") {{'ACTION_BUTTON' | translate}}
                                th(width="15%") {{'REMARKS' | translate}}
                        tbody
                            tr(ng-repeat="(i,v) in vm.partnerCommissionLog", ng-click="vm.partnerCommVar.highlightRow = $index", ng-class="{'sn-selected': $index == vm.partnerCommVar.highlightRow}")
                                td {{v.partnerName}}
                                td {{v.partnerRealName}}
                                td(ng-repeat= "(igrp, grp) in v.rawCommissions")
                                    a(ng-style='grp.isCustomCommissionRate ? {color:"red"} : {}', data-toggle="modal", data-target='#modalCommissionTable', ng-click="vm.partnerCommVar.partner=i; vm.partnerCommVar.group=grp; vm.partnerCommVar.selectTab=igrp; vm.calculatePartnerDLTotalDetail(v.downLinesRawCommissionDetail,'consumptionDetail')") {{grp.amount}}
                                td
                                    a(data-toggle="modal", data-target='#modalRewardFeeTable', ng-click="vm.partnerCommVar.partner=i; vm.calculatePartnerDLTotalDetail(v.downLinesRawCommissionDetail,'rewardDetail')", ng-style='v.partnerCommissionRateConfig.rateAfterRebatePromoIsCustom ? {color:"red"} : {}') {{v.totalRewardFee}}
                                td
                                    a(ng-style='v.isAnyCustomPlatformFeeRate ? {color:"red"} : {}', data-toggle="modal", data-target='#modalCommissionTable', ng-click="vm.partnerCommVar.partner=i; vm.partnerCommVar.group=v.rawCommissions[vm.partnerCommVar.platformFeeTab]; vm.partnerCommVar.selectTab=vm.partnerCommVar.platformFeeTab; vm.calculatePartnerDLTotalDetail(v.downLinesRawCommissionDetail,'consumptionDetail')") {{v.totalPlatformFee}}
                                td
                                    a(data-toggle="modal", data-target='#modalTopUpFeeTable', ng-click="vm.partnerCommVar.partner=i; vm.calculatePartnerDLTotalDetail(v.downLinesRawCommissionDetail,'topUpDetail')", ng-style='v.partnerCommissionRateConfig.rateAfterRebateTotalDepositIsCustom ? {color:"red"} : {}') {{v.totalTopUpFee}}
                                td
                                    a(data-toggle="modal", data-target='#modalWithdrawalFeeTable', ng-click="vm.partnerCommVar.partner=i; vm.calculatePartnerDLTotalDetail(v.downLinesRawCommissionDetail,'withdrawalDetail')", ng-style='v.partnerCommissionRateConfig.rateAfterRebateTotalWithdrawalIsCustom ? {color:"red"} : {}') {{v.totalWithdrawalFee}}
                                td {{v.nettCommission}}
                                td {{v.parentPartnerCommissionDetail.totalParentCommissionFee || 0}}
                                td {{v.partnerCredit}}
                                td
                                    a(data-toggle="modal", data-target='#modalActivePlayerTable', ng-click="vm.partnerCommVar.partner=i") {{v.activeDownLines}}
                                td
                                    text.span {{v.pastActiveDownLines[0]? v.pastActiveDownLines[0] : "-" | translate}} {{","}} {{v.pastActiveDownLines[1]? v.pastActiveDownLines[1] : "-" | translate}} {{","}} {{v.pastActiveDownLines[2]? v.pastActiveDownLines[2] : "-" | translate}}
                                td
                                    text.span {{calculateTotalSum(v.pastNettCommission, "", "")}} {{" ("}} {{v.pastNettCommission[0]? v.pastNettCommission[0] : "-" | translate}} {{","}} {{v.pastNettCommission[1]? v.pastNettCommission[1] : "-" | translate}} {{","}} {{v.pastNettCommission[2]? v.pastNettCommission[2] : "-" | translate}} {{")"}}
                                td
                                    select(ng-model='v.settleMethod', ng-init="v.settleMethod='1'")
                                        option(value='1', ) {{'NORMAL_EXECUTED' | translate}}
                                        option(value='2', ) {{'RESET_THEN_EXECUTED' | translate}}
                                        option(value='3', ) {{'EXECUTED_THEN_RESET' | translate}}
                                td(ng-init="v.editRemark = false", ng-click="v.editRemark = true")
                                    a(href='', ng-if="!v.editRemark") {{v.remarks ? v.remarks : ""}}
                                    textarea.form-control(ng-if="v.editRemark", type="textarea", name="Remark", placeholder='{{"REMARKS" | translate}}', ng-model="v.remarks")

            .modal-footer
                label.control-label.common-button(ng-if="vm.partnerCommVar.checkedRemark", style="color:red") {{vm.partnerCommVar.checkedRemark | translate}}
                button.btn.btn-primary.common-button(ng-click="vm.checkPartnerCommissionLogRemark()" ng-if="!vm.partnerSettlementSubmitted[vm.partnerCommVar.settMode]") {{"SUBMIT_COMMISSION" | translate}}
                button.btn.btn-danger.common-button(data-dismiss="modal") {{"CLOSE" | translate}}
                button.btn.btn-warning.common-button(data-dismiss="modal" ng-click="vm.cancelPreview()" ) {{"CANCEL PREVIEW" | translate}}

#modalRewardFeeTable.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"totalCount" | translate}} {{": "}} {{vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail.length}}
            .modal-body
                div
                    table.simple-table
                        thead
                            tr
                                th {{'DOWNLINE_NAME' | translate}}
                                th {{'REAL_NAME' | translate}}
                                th {{'SYSTEM_REWARD' | translate}}
                                th {{'MANUAL_REWARD' | translate}}
                                th {{'CONSUMPTION_RETURN_REWARD' | translate}}
                                th {{'LIMITED_OFFER' | translate}}
                                th {{'REWARD_CODE' | translate}}
                                th {{'POINT_CONVERSION' | translate}}
                                th(width="15%") {{'TOTAL_REWARD' | translate}}
                        tbody
                            tr(ng-if="vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail.length > 0", ng-repeat="v in vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail")
                                td {{v.name}}
                                td {{v.realName}}
                                td {{v.rewardDetail.systemReward}}
                                td {{v.rewardDetail.manualReward}}
                                td {{v.rewardDetail.consumptionReturn}}
                                td {{v.rewardDetail.limitedOffer}}
                                td {{v.rewardDetail.promoCode}}
                                td {{v.rewardDetail.pointConversion}}
                                td {{v.rewardDetail.total}}
                            tr
                                td(colspan="2", style="font-weight:bold") {{'Totalsum' | translate}}
                                td {{vm.partnerDLCommDetailTotal.systemReward ? vm.partnerDLCommDetailTotal.systemReward : "0"}}
                                td {{vm.partnerDLCommDetailTotal.manualReward ? vm.partnerDLCommDetailTotal.manualReward : "0"}}
                                td {{vm.partnerDLCommDetailTotal.consumptionReturn ? vm.partnerDLCommDetailTotal.consumptionReturn : "0"}}
                                td {{vm.partnerDLCommDetailTotal.limitedOffer ? vm.partnerDLCommDetailTotal.limitedOffer : "0"}}
                                td {{vm.partnerDLCommDetailTotal.promoCode ? vm.partnerDLCommDetailTotal.promoCode : "0"}}
                                td {{vm.partnerDLCommDetailTotal.pointConversion ? vm.partnerDLCommDetailTotal.pointConversion : "0"}}
                                td {{vm.partnerDLCommDetailTotal.total ? vm.partnerDLCommDetailTotal.total : "0"}}
                            tr
                                td(colspan="8", style="font-weight:bold") {{'Reward Fee' | translate}} {{'('}} {{'RATIO'| translate}} {{': '}}
                                    text.span(ng-style='vm.partnerCommissionLog[vm.partnerCommVar.partner].partnerCommissionRateConfig.rateAfterRebatePromoIsCustom ? {color:"red"} : {}') {{vm.partnerCommissionLog[vm.partnerCommVar.partner].partnerCommissionRateConfig.rateAfterRebatePromo}} {{"%)"}}
                                td(ng-style='vm.partnerCommissionLog[vm.partnerCommVar.partner].partnerCommissionRateConfig.rateAfterRebatePromoIsCustom ? {color:"red"} : {}') {{vm.partnerCommissionLog[vm.partnerCommVar.partner].totalRewardFee}}

#modalTopUpFeeTable.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"totalCount" | translate}} {{": "}} {{vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail.length}}
            .modal-body
                div
                    table.simple-table
                        thead
                            tr
                                th {{'DOWNLINE_NAME' | translate}}
                                th {{'REAL_NAME' | translate}}
                                th {{'TOPUPMANUAL' | translate}}
                                th {{'TOPUPONLINE' | translate}}
                                th {{'ALIPAY' | translate}}
                                th {{'WECHATPAY' | translate}}
                                th(width="15%") {{'TOTAL_TOPUP' | translate}}
                        tbody
                            tr(ng-if="vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail.length > 0", ng-repeat="v in vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail")
                                td {{v.name}}
                                td {{v.realName}}
                                td {{v.topUpDetail.manualTopUpAmount}}
                                td {{v.topUpDetail.onlineTopUpAmount}}
                                td {{v.topUpDetail.aliPayTopUpAmount}}
                                td {{v.topUpDetail.weChatTopUpAmount}}
                                td {{v.topUpDetail.topUpAmount}}
                            tr
                                td(colspan="2", style="font-weight:bold") {{'Totalsum' | translate}}
                                td {{vm.partnerDLCommDetailTotal.manualTopUpAmount ? vm.partnerDLCommDetailTotal.manualTopUpAmount : "0"}}
                                td {{vm.partnerDLCommDetailTotal.onlineTopUpAmount ? vm.partnerDLCommDetailTotal.onlineTopUpAmount : "0"}}
                                td {{vm.partnerDLCommDetailTotal.aliPayTopUpAmount ? vm.partnerDLCommDetailTotal.aliPayTopUpAmount : "0"}}
                                td {{vm.partnerDLCommDetailTotal.weChatTopUpAmount ? vm.partnerDLCommDetailTotal.weChatTopUpAmount : "0"}}
                                td {{vm.partnerDLCommDetailTotal.topUpAmount ? vm.partnerDLCommDetailTotal.topUpAmount: "0"}}
                            tr
                                td(colspan="6", style="font-weight:bold") {{'TopUp Fee' | translate}} {{'('}} {{'RATIO'| translate}} {{': '}}
                                    text.span(ng-style='vm.partnerCommissionLog[vm.partnerCommVar.partner].partnerCommissionRateConfig.rateAfterRebateTotalDepositIsCustom ? {color:"red"} : {}') {{vm.partnerCommissionLog[vm.partnerCommVar.partner].partnerCommissionRateConfig.rateAfterRebateTotalDeposit}} {{"%)"}}
                                td(ng-style='vm.partnerCommissionLog[vm.partnerCommVar.partner].partnerCommissionRateConfig.rateAfterRebateTotalDepositIsCustom ? {color:"red"} : {}') {{vm.partnerCommissionLog[vm.partnerCommVar.partner].totalTopUpFee}}

#modalWithdrawalFeeTable.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"totalCount" | translate}} {{": "}} {{vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail.length}}
            .modal-body
                div
                    table.simple-table
                        thead
                            tr
                                th {{'DOWNLINE_NAME' | translate}}
                                th {{'REAL_NAME' | translate}}
                                th(width="15%") {{'WITHDRAW_AMOUNT' | translate}}
                        tbody
                            tr(ng-if="vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail.length > 0", ng-repeat="v in vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail")
                                td {{v.name}}
                                td {{v.realName}}
                                td {{v.withdrawalDetail.withdrawalAmount}}
                            tr
                                td(colspan="2", style="font-weight:bold") {{'Totalsum' | translate}}
                                td {{vm.partnerDLCommDetailTotal.withdrawalAmount ? vm.partnerDLCommDetailTotal.withdrawalAmount : "0"}}
                            tr
                                td(colspan="2", style="font-weight:bold") {{'Withdrawal Fee' | translate}} {{'('}} {{'RATIO'| translate}} {{': '}}
                                    text.span(ng-style='vm.partnerCommissionLog[vm.partnerCommVar.partner].partnerCommissionRateConfig.rateAfterRebateTotalWithdrawalIsCustom ? {color:"red"} : {}') {{vm.partnerCommissionLog[vm.partnerCommVar.partner].partnerCommissionRateConfig.rateAfterRebateTotalWithdrawal}} {{"%)"}}
                                td(ng-style='vm.partnerCommissionLog[vm.partnerCommVar.partner].partnerCommissionRateConfig.rateAfterRebateTotalWithdrawalIsCustom ? {color:"red"} : {}') {{vm.partnerCommissionLog[vm.partnerCommVar.partner].totalWithdrawalFee}}

#modalActivePlayerTable.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"totalCount" | translate}} {{": "}} {{vm.partnerCommissionLog[vm.partnerCommVar.partner].activeDownLines}}
            .modal-body
                div
                    table.simple-table
                        thead
                            tr
                                th {{'DOWNLINE_NAME' | translate}}
                                th {{'REAL_NAME' | translate}}
                                th {{'TOP_UP_TIMES' | translate}}
                                th {{'TOP_UP_AMOUNT' | translate}}
                                th {{'TIMES_CONSUMED' | translate}}
                                th {{'VALID_CONSUMPTION' | translate}}
                        tbody(ng-if="vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail.length > 0")
                            tr(ng-if="v.active", ng-repeat="v in vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail")
                                td {{v.name}}
                                td {{v.realName}}
                                td {{v.topUpDetail.topUpTimes}}
                                td {{v.topUpDetail.topUpAmount}}
                                td {{v.consumptionDetail.consumptionTimes}}
                                td {{v.consumptionDetail.validAmount}}

#modalCommissionTable.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                .panel-primary(style='margin-top:20px')
                    .panel-heading.common-left-panel-heading
                        ul.nav.nav-tabs.common-nav-tabs
                            li(ng-click="vm.partnerCommVar.selectTab = $index", ng-class="{'active': $index == vm.partnerCommVar.selectTab}", ng-repeat="grp in vm.partnerCommissionLog[vm.partnerCommVar.partner].rawCommissions")
                                a.common-tab(data-toggle="tab", href="#", ng-click="vm.partnerCommVar.group = grp")
                                    text.span {{grp.groupName | translate}}

                h4.modal-title(style='margin-top:10px') {{"totalCount" | translate}} {{": "}} {{vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail.length}}
            .modal-body
                div
                    table.simple-table
                        thead
                            tr
                                th {{'DOWNLINE_NAME' | translate}}
                                th {{'REAL_NAME' | translate}}
                                th {{'EXPENSE' | translate}} {{' ('}} {{'BONUS_WINLOSE' | translate}} {{'/'}} {{'CONSUMPTION' | translate}} {{')'}}
                        tbody
                            tr(ng-if="vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail.length > 0", ng-repeat="v in vm.partnerCommissionLog[vm.partnerCommVar.partner].downLinesRawCommissionDetail")
                                td {{v.name}}
                                td {{v.realName}}
                                td {{v.consumptionDetail.consumptionProviderDetail[vm.partnerCommVar.group.groupName].bonusAmount}} {{"/"}} {{v.consumptionDetail.consumptionProviderDetail[vm.partnerCommVar.group.groupName].validAmount}}
                            tr
                                td(colspan="2", style="font-weight:bold") {{'Total Consumption' | translate}}
                                td {{vm.partnerDLCommDetailTotal[vm.partnerCommVar.group.groupName].bonusAmount}} {{'/'}} {{vm.partnerDLCommDetailTotal[vm.partnerCommVar.group.groupName].validAmount}}
                            tr
                                td(colspan="2", style="font-weight:bold") {{'Commission' | translate}} {{' ('}} {{'ACTIVE_DOWNLINES'| translate}} {{': '}} {{vm.partnerCommissionLog[vm.partnerCommVar.partner].activeDownLines}} {{'/'}} {{'RATIO'| translate}} {{': '}}
                                    text.span(ng-style='vm.partnerCommVar.group.isCustomCommissionRate ? {color:"red"} : {}') {{vm.partnerCommVar.group.commissionRate}} {{'%)'}}
                                td(ng-style='vm.partnerCommVar.group.isCustomCommissionRate ? {color:"red"} : {}') {{vm.partnerCommVar.group.amount}}
                            tr
                                td(colspan="2", style="font-weight:bold") {{'Platform Fee' | translate}} {{' ('}} {{'RATIO'| translate}} {{': '}}
                                    text.span(ng-style='vm.partnerCommVar.group.isCustomPlatformFeeRate ? {color:"red"} : {}') {{vm.partnerCommVar.group.platformFeeRate ? vm.partnerCommVar.group.platformFeeRate : "0"}} {{'%)'}}
                                td
                                    text.span(ng-style='vm.partnerCommVar.group.isCustomPlatformFeeRate ? {color:"red"} : {}') {{vm.partnerCommVar.group.platformFee}}
                                    text.span {{'/'}}
                                    text.span(ng-style='vm.partnerCommissionLog[vm.partnerCommVar.partner].isAnyCustomPlatformFeeRate ? {color:"red"} : {}') {{vm.partnerCommissionLog[vm.partnerCommVar.partner].totalPlatformFee}}

#modalPlayerDetailsSummaryTable.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"totalCount" | translate}} {{": "}} {{vm.playerDetailsSummary.totalCount}}
            .modal-body
                div
                    table.simple-table
                        thead
                            tr
                                th {{'TOTAL_CHILDREN_COUNT' | translate}}
                                th {{'REAL_NAME' | translate}}
                                th {{'TOPUPMANUAL' | translate}}
                                th {{'TOPUPONLINE' | translate}}
                                th {{'ALIPAY' | translate}}
                                th {{'WECHATPAY' | translate}}
                                th {{'TOTAL_TOPUP' | translate}}
                                th {{'TOTAL_BONUS' | translate}}
                                th {{'TOTAL_CHILDREN_DEPOSIT' | translate}}
                                th {{'TOTAL_CHILDREN_BALANCE' | translate}}
                        tbody
                            tr(ng-if="vm.playerDetailsSummary.length == 0")
                                td(colspan = 10) {{ 'No data available in table' | translate }}
                            tr(ng-if="vm.playerDetailsSummary.length > 0", ng-repeat="v in vm.playerDetailsSummary")
                                td {{v.name}}
                                td {{v.realName}}
                                td {{v.manualTopUp | noRoundTwoDecimalPlaces}}
                                td {{v.onlineTopUp | noRoundTwoDecimalPlaces}}
                                td {{v.aliPayTopUp | noRoundTwoDecimalPlaces}}
                                td {{v.wechatTopUp | noRoundTwoDecimalPlaces}}
                                td {{v.topUpSum | noRoundTwoDecimalPlaces}}
                                td {{v.totalBonus | noRoundTwoDecimalPlaces}}
                                td {{v.totalDepositAmount | noRoundTwoDecimalPlaces}}
                                td {{v.validCredit | noRoundTwoDecimalPlaces}}
                            tr(ng-if="vm.playerDetailsSummary.length > 0")
                                td(colspan=2) {{"Totalsum" | translate}}
                                td {{vm.playerDetailsSummary.sumOfManualTopUp | noRoundTwoDecimalPlaces}}
                                td {{vm.playerDetailsSummary.sumOfOnlineTopUp | noRoundTwoDecimalPlaces}}
                                td {{vm.playerDetailsSummary.sumOfAliPayTopUp | noRoundTwoDecimalPlaces}}
                                td {{vm.playerDetailsSummary.sumOfWechatTopUp | noRoundTwoDecimalPlaces}}
                                td {{vm.playerDetailsSummary.sumOfTotalTopUp | noRoundTwoDecimalPlaces}}
                                td {{vm.playerDetailsSummary.sumOfTotalBonus | noRoundTwoDecimalPlaces}}
                                td {{vm.playerDetailsSummary.sumOfTotalDeposit | noRoundTwoDecimalPlaces}}
                                td {{vm.playerDetailsSummary.sumOfTotalBalance | noRoundTwoDecimalPlaces}}

#modalActivePartnerInfo.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"totalCount" | translate}} {{": "}} {{vm.selectedPartnerObjArr.size}}
            .modal-body
                div
                    table.simple-table
                        thead
                            tr
                                th {{ vm.selectedPartnerObjArr.title | translate}}
                                th {{'REAL_NAME' | translate}}
                                th {{'TOP_UP_TIMES' | translate}}
                                th {{'TOP_UP_AMOUNT' | translate}}
                                th {{'TIMES_CONSUMED' | translate}}
                                th {{'VALID_CONSUMPTION' | translate}}
                                th {{'PlayerValue' | translate}}
                        tbody
                            tr(ng-if="vm.selectedPartnerObjArr.data.length == 0")
                                td(colspan = 7) {{ 'No data available in table' | translate }}
                            tr(ng-if="vm.selectedPartnerObjArr.data.length > 0", ng-repeat="v in vm.selectedPartnerObjArr.data")
                                td {{v.name}}
                                td {{v.realName}}
                                td {{v.topUpCount}}
                                td {{v.topUpAmount}}
                                td {{v.consumptionCount}}
                                td {{v.consumptionAmount}}
                                td {{v.valueScore}}

#modalEditChildPartner.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false, aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:85%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"Partner Architecture" | translate}}: {{vm.selectedSinglePartner.partnerName}}
            .modal-body
                div
                    table.simple-table
                        thead
                            tr
                                th(colspan=2 style="width:200px")
                                th(style="width:250px") {{'PARTNER_NAME' | translate}}
                                th(style="width:260px") {{'Created/Edited DateTime' | translate}}
                                th(style="width:180px") {{'Reference Proposal No.' | translate}}
                                th {{'Remark description' | translate}}
                        tbody
                            tr
                                td(colspan=2) {{'Parent Partner(Unique)' | translate}}
                                td {{vm.selectedSinglePartner.parent.partnerName || 'NONE' | translate}}
                                td(rowspan=5, colspan=2)
                                td(style='text-align:left') {{'CANNOT_EDIT' | translate}}
                            tr
                                td(colspan=2)
                                td ↓
                                td
                            tr
                                td(colspan=2) {{"Partner(Self)" | translate}}
                                td {{vm.selectedSinglePartner.partnerName}}
                                td(style='text-align:left') {{'CANNOT_EDIT' | translate}}
                            tr
                                td(colspan=2)
                                td ↓
                                td
                            tr
                                td(colspan=2)
                                    div
                                        span {{'Child Partner' | translate}}
                                        br
                                        span ( {{'Total Child Partner' | translate}} {{vm.totalChildPartner || 0}} )
                                td ↓
                                td
                                    div(style='text-align:left')
                                        span {{'EDIT_CHILD_PARTNER_INFO_TITLE' | translate}}
                                        br
                                        span {{'EDIT_CHILD_PARTNER_INFO_DESCRIPTION_A' | translate}}
                                        br
                                        span {{'EDIT_CHILD_PARTNER_INFO_DESCRIPTION_B' | translate}}


                            tr(ng-repeat="(idx, val) in vm.childPartnerList")
                                td
                                    div
                                        label(ng-show='vm.isChildPartnerEditing') (
                                        i.fa.fa-plus(ng-click='vm.childPartnerNewRow(vm.childPartnerList, idx)', ng-show='vm.isChildPartnerEditing')
                                        label(ng-show='vm.isChildPartnerEditing') )
                                        label(ng-show='vm.isChildPartnerEditing') (
                                        i.fa.fa-minus(ng-click='vm.childPartnerDeleteRow(idx, vm.childPartnerList)', ng-show='vm.isChildPartnerEditing')
                                        label(ng-show='vm.isChildPartnerEditing') )
                                td  {{idx + 1}}
                                td
                                    input(type='text' style='text-align:center' ng-model='val.partnerName' ng-change='vm.checkChildPartnerNameValidity(vm.childPartnerList[idx].partnerName, idx)' ng-disabled='!vm.isChildPartnerEditing')
                                td  {{val.createTime ? timeReformat(val.createTime) : ''}}
                                td  {{val.proposalId}}
                                td
                                    span(style='color:red') {{val.errorMessage}}

            .modal-footer
                button.btn.btn-danger.common-button(data-dismiss="modal") {{"CLOSE/CANCEL" | translate}}
                button.btn.btn-success.common-button(ng-click="vm.editChildPartner()"  ng-if="!vm.isChildPartnerEditing && checkViewPermission('Partner', 'Partner', 'EditChildPartner')") {{"EDIT" | translate}}
                button.btn.btn-primary.common-button(data-dismiss="modal" ng-if="vm.isChildPartnerEditing && checkViewPermission('Partner', 'Partner', 'EditChildPartner')" ng-click="vm.submitChildPartner()" ng-disabled='vm.disableEditChildPartner') {{"CONFIRM" | translate}}

#modalTransferPartnerCreditToPlayer.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false, aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:85%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"Transfer Partner Credit To Player" | translate}}: {{vm.selectedSinglePartner.partnerName}}

            .modal-body
                div
                    table.simple-table
                        tbody
                            tr
                                td(style="width:280px")
                                td(style="width:280px") {{'Before Transfer' | translate}}
                                td(style="width:280px") {{'After Transfer' | translate}}
                                th(rowspan=3 style="vertical-align:bottom;")
                                    button.btn.btn-primary.common-button(ng-click='vm.loadDownlinePlayersRecord();' style="margin-left:5px") {{'SEARCH' | translate}}
                            tr
                                td {{'PARTNER_ACCOUNT_BALANCE' | translate}} :
                                td {{vm.selectedSinglePartner.credits || 0}}
                                td(style='color:red') {{vm.sumTotalTransferAmount > 0 ? vm.selectedSinglePartner.credits - vm.sumTotalTransferAmount : 0 || 0 | noRoundTwoDecimalPlaces}}

                            tr
                                td {{'Search by Downline Player Name' | translate}} :
                                td(colspan=2)
                                    input.form-control(style="text" placeholder="{{'Empty: Default(ALL)' | translate}}" ng-model="vm.downlinePlayerName")
                br
                div(style='min-height:500px')
                    label {{"Total" | translate}} {{vm.downlinePlayers.totalCount}} {{"COUNT1" | translate}}
                    table.simple-table
                        thead
                            tr
                                th {{'order' | translate}}
                                th {{'Downline Player Name' | translate}}
                                th {{'Transfer Credit (Only allow positive value)' | translate}}
                                th {{'Provider group' | translate}}
                                th {{'Withdraw Consumption (Accurate number/non-multiple)' | translate}}

                        tbody
                            tr(ng-repeat='(idx, val) in vm.downlinePlayersData')
                                td {{val.orderNo}}
                                td {{val.name}}
                                td
                                    input.form-control(type='number', ng-model='val.amount', ng-change='vm.getSumTotalTransferAmount(vm.downlinePlayersData);vm.disableTransferPartnerCreditToPlayer(val.amount);' ng-disabled='!vm.isEditingTransferPartnerCredit', style='color:red')
                                td
                                    select.form-control(ng-model='val.providerGroup', ng-change='vm.checkIsDisableTransferPartnerCreditToPlayer(val.providerGroup, val.withdrawConsumption)' ng-disabled='!vm.isEditingTransferPartnerCredit')
                                        option(value='') {{'LOCAL_CREDIT' | translate}}
                                        option(ng-repeat='(i,v) in vm.gameProviderGroup', value='{{v._id}}') {{ v.name }}
                                td
                                    input.form-control(type='number', ng-model='val.withdrawConsumption', ng-change='vm.checkIsDisableTransferPartnerCreditToPlayer(val.providerGroup, val.withdrawConsumption)' ng-disabled='!vm.isEditingTransferPartnerCredit')
                            tr(ng-if='vm.downlinePlayersData.length > 0')
                                td(colspan=2) {{'All Pages' | translate}}
                                td(style='color:red') {{vm.sumTotalTransferAmount || 0}}
                                td(colspan=2)
                            tr(ng-if='vm.downlinePlayersData.length == 0')
                                td(colspan=5) {{'No data available in table' | translate}}

                        tfoot
                            tr
                                th
                                    div(style='display:inline-block;font-weight:normal')
                                        text.margin-right-5(style='display:inline-block') {{'EachPage' | translate}}
                                        input.form-control(style='max-width:60px;display:inline-block;',type='number',ng-init=50,ng-model='vm.downlinePlayers.limit' ,ng-blur='vm.loadDownlinePlayersRecord()')
                                        text.margin-left-5(style="display:inline-block") {{'COUNT1' | translate}}
                                th(colspan=4 style="text-align:right")
                                    div(style='display:inline-block;font-weight:normal')
                                        text.margin-right-5(style='display:inline-block') {{'Jump to' | translate}}
                                        input.form-control.margin-right-5(style='max-width:60px;display:inline-block', type='number',ng-model='vm.downlinePlayers.currentPage',ng-init=1 ,ng-blur="vm.gotoDownlinePlayerPage((vm.downlinePlayers.currentPage),null)")
                                        text(style="display:inline-block") / {{ vm.downlinePlayers.totalPage }} {{'Page' | translate}}
                                    div(style='display:inline-block')
                                        button.btn.btnPage.next_page.margin-left-5(style='border: 1px solid #878787;margin-top:2px' ng-click='vm.nextDownlinePlayerPage()', ng-disabled='vm.downlinePlayers.currentPage == vm.downlinePlayers.totalPage') {{'NEXT_PAGE' | translate}}

            .modal-footer
                button.btn.btn-danger.common-button(data-dismiss='modal') {{"CANCEL" | translate}}
                button.btn.btn-success.common-button(ng-click='vm.editTransferPartnerCreditToPlayer()' ng-if='!vm.isEditingTransferPartnerCredit && checkViewPermission("Partner","Partner", "PartnerCreditTransferToDownline")' ng-disabled='vm.downlinePlayersData.length == 0') {{"EDIT" | translate}}
                button.btn.btn-primary.common-button(data-dismiss='modal' ng-click='vm.submitTransferPartnerCreditToPlayer()' ng-if='vm.isEditingTransferPartnerCredit && checkViewPermission("Partner","Partner", "PartnerCreditTransferToDownline")' ng-disabled='vm.isTransferPartnerCreditToPlayer') {{"CONFIRM" | translate}}

include partner-feedback-popup
include ../common-widget/telephone-popover
include ../common-widget/modalYesNo
