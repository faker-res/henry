.row.padding-left-right-5(ng-show="checkViewPermission('TeleMarketing')")
    #marketingContent(style="padding-left:0;" ng-class='vm.rightPanelClass')
        .col-md-12
            button.btn.btn-primary.common-button(ng-if="checkViewPermission('TeleMarketing', 'phoneNumFilter', 'Read')" ng-class='{active: vm.selectedTab === "NEW_PHONE_LIST"}', ng-click='vm.loadTab("NEW_PHONE_LIST")' title='过滤，导入白名单到系统当中')
                span {{"NEW_PHONE_LIST" | translate}}
            button.btn.btn-primary.common-button(ng-if="checkViewPermission('TeleMarketing', 'PHONE_LIST_ANALYSE_AND_MANAGEMENT', 'Read')" ng-class='{active: vm.selectedTab === "PHONE_LISTS"}', ng-click='vm.loadTab("PHONE_LIST_ANALYSE_AND_MANAGEMENT"); vm.showPhoneListManagement();', title='分析名单数据并分配名单给指定的销售人员')
                span {{"PHONE_LIST_ANALYSE_AND_MANAGEMENT" | translate}}
            button.btn.btn-primary.common-button(ng-if="checkViewPermission('TeleMarketing', 'MY_PHONE_LIST_OR_REMINDER_PHONE_LIST', 'Read')" ng-class='{active: vm.selectedTab === "REMINDER_PHONE_LIST"}', ng-click='vm.loadTab("REMINDER_PHONE_LIST")', title='销售员所分配到的会员名单、资料')
                span {{"MY_PHONE_LIST_OR_REMINDER_PHONE_LIST" | translate}}
            button.btn.btn-primary.common-button(ng-if="checkViewPermission('TeleMarketing', 'WORKLOAD REPORT', 'Read')" ng-class='{active: vm.selectedTab === "WORKLOAD REPORT"}', ng-click='vm.loadTab("WORKLOAD REPORT")', title='查询指定时间内，电销员的业务量情况')
                span {{"WORKLOAD REPORT" | translate}}
            button.btn.btn-primary.common-button(ng-if="checkViewPermission('TeleMarketing', 'RECYCLE_BIN', 'Read')" ng-class='{active: vm.selectedTab === "RECYCLE_BIN"}', ng-click='vm.loadTab("RECYCLE_BIN")', title='名单皆被使用过后，没开户成功将近入此回收桶')
                span {{"RECYCLE_BIN" | translate}}
            button.btn.btn-primary.common-button(ng-if="checkViewPermission('TeleMarketing', 'SMSMission', 'Read')" ng-class='{active: vm.selectedTab === "PHONE_MISSION"}', ng-click='vm.loadTab("PHONE_MISSION")', title='通过短信让客户触击即可开户')
                span {{"PHONE_MISSION" | translate}}
        .col-md-12
            .panel.panel-primary
                div(ng-switch="vm.selectedTab")
                    div(ng-switch-when="NEW_PHONE_LIST")
                        include ./teleMarketing-phone-num-filter
                    div(ng-switch-when="PHONE_LIST_ANALYSE_AND_MANAGEMENT")
                        include ./teleMarketing-phone-list
                    div(ng-switch-when="PHONE_MISSION")
                        include ./teleMarketing-task
                    div(ng-switch-when="WORKLOAD REPORT")
                        include ./teleMarketing-workload
                    div(ng-switch-when="REMINDER_PHONE_LIST")
                        #reminderPhoneContent(style="padding-left:0;",ng-class='vm.rightPanelClass')
                            .padding-all-5
                                .panel.panel-primary
                                    .panel-heading.common-left-panel-heading
                                        ul.nav.nav-tabs.common-nav-tabs.padding-left-5.margi
                                            li.active
                                                a.common-tab(data-toggle="tab", href="#tsAdminNameList")
                                                    text.span {{"MY_NAME_LIST" | translate}}
                                            li
                                                a.common-tab(data-toggle="tab", href="#tsFeedbackReminder" ng-click='vm.initPhoneReminderList()')
                                                    text.span {{"FEEDBACK_REMINDER_LIST" | translate}}
                                                    .badge.pull-right(style='background-color:red; color:white', ng-show='vm.newReminderTsPhoneCount > 0') {{vm.newReminderTsPhoneCount}}

                                    .panel-body.common-right-panel-body
                                        div.tab-content
                                            #tsAdminNameList.tab-pane.fade.in.active
                                                include ./teleMarketing-admin-phone-list
                                            #tsFeedbackReminder.tab-pane.fade
                                                include ./teleMarketing-reminder-list
                    div(ng-switch-when="RECYCLE_BIN")
                        #tsRecycleBinContent(style="padding-left:0;",ng-class='vm.rightPanelClass')
                            .padding-all-5
                                .panel.panel-primary
                                    .panel-heading.common-left-panel-heading
                                        ul.nav.nav-tabs.common-nav-tabs.padding-left-5.margi
                                            li.active
                                                a.common-tab(data-toggle="tab", href="#tsRecycleBinOverview" ng-click='vm.showPageName="" ')
                                                    text.span {{"RECYCLE_BIN_OVERVIEW" | translate}}
                                            li
                                                a.common-tab(data-toggle="tab", href="#tsTrashClassificationDecompositionList" ng-click='vm.initTrashClassificationDecompositionList();vm.multiDecomposedNewPhoneSelected=[];')
                                                    text.span {{"Decomposed list / trash classification and reuse" | translate}}

                                    .panel-body.common-right-panel-body
                                        div.tab-content
                                            include ./modalNewTSPhoneListXLS
                                            #tsRecycleBinOverview.tab-pane.fade.in.active
                                                include ./teleMarketing-recycle-bin-phone-list
                                            #tsTrashClassificationDecompositionList.tab-pane.fade
                                                div
                                                    .col-md-3(ng-if='!vm.hideLeftPanel')
                                                        include ./teleMarketing-trash-classification-decomposition-list-left-panel
                                                    div(ng-class='vm.hideLeftPanel ? "col-md-12" : "col-md-9"', style='padding-left:5px')
                                                        include ./teleMarketing-trash-classification-decomposition-list-right-panel





                        //ul.nav.nav-tabs.common-nav-tabs(id='ulMenu')
                        //    li.active(ng-show="checkViewPermission('TeleMarketing', 'Task', 'Read')" style="margin-left: 20px;")
                        //        a.common-tab(data-toggle="tab", href="#Task", ng-click="vm.teleMarketingPageName='TELEMARKETING_TASK';vm.updatePageTile();")
                        //            .fa.fa-wrench.margin-right-5
                        //            text.span {{"TELEMARKETING_TASK" | translate}}
                        //    li(ng-show="checkViewPermission('TeleMarketing', 'phoneNumFilter', 'Read')")
                        //        a.common-tab(data-toggle="tab", href="#Filter", ng-click="vm.teleMarketingPageName='phoneNumFilter';vm.updatePageTile();")
                        //            .fa.fa-file-text.margin-right-5
                        //            text.span {{"phoneNumFilter" | translate}}

#modalPhoneListCountDetails.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false, aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:95%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .row
                            b(ng-if="vm.selectedTab === 'PHONE_LIST_ANALYSE_AND_MANAGEMENT'") * {{"REMARKS" | translate}}: A = B+C+D+E
                            b(ng-if="vm.selectedTab === 'RECYCLE_BIN'") * {{"REMARKS" | translate}}: A = E+F
                            .col-md-12
                                table.simple-table
                                    thead
                                        tr
                                            th {{"A. Phone List Total Count" | translate}}
                                            th(title='{{"Indicates phone numbers that has completed the preset rotation number and is now expired." | translate}}') {{"B. Distribution Completed Count" | translate}}
                                            th(title='{{"Indicates phone numbers that has been distributed but has not completed the preset rotation amount." | translate}}') {{"C. Distribution Incomplete Count" | translate}}
                                            th(title='{{"Indicates phone numbers that has completed the preset rotation number and is now expired." | translate}}') {{"D. Admin Current Holdings Count" | translate}}
                                            th {{"E. Registered Count" | translate}}
                                            th {{"F. Recycle Bin" | translate}}
                                    tbody
                                        tr
                                            td {{vm.tsPhoneCountDetail.total}}
                                            td {{vm.tsPhoneCountDetail.completed}}
                                            td {{vm.tsPhoneCountDetail.incomplete}}
                                            td {{vm.tsPhoneCountDetail.currentHolding}}
                                            td {{vm.tsPhoneCountDetail.registered}}
                                            td {{vm.tsPhoneCountDetail.recycleBin}}

//ModaltsAnalyticsPhoneList
#modaltsAnalyticsPhoneList.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false, aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:80%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"FILTER_THEN_IMPORT_XLS_TS" | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .row
                            .col-md-12
                                .well(style='max-height: 400px; max-height: 50vh; overflow: auto')
                                    table.common-table.playerLvlTable(style='width:auto;min-width:99.9%;white-space:normal;')
                                        thead
                                            tr
                                                th {{'FIELD' | translate}}
                                                th {{'CONTENT' | translate}}
                                        tbody
                                            tr
                                                td {{'Name Of List (Required) (Unique)' | translate}}
                                                td
                                                    input.form-control(type='text', ng-model='vm.tsAnalyticsPhoneList.name' ng-change='vm.checkAnalyticsFilterAndImportSystem()' ng-disabled='vm.analyticsdisableAll')
                                            tr
                                                td {{'Feedback Result Of Default Failure System Call (Required)' | translate}}
                                                td
                                                    select.form-control(ng-model='vm.tsAnalyticsPhoneList.failFeedBackResult',  ng-options='v.key as v.value for (i,v) in vm.allPlayerFeedbackResults' ng-change='vm.checkAnalyticsFilterAndImportSystem()' ng-disabled='vm.analyticsPhoneListEdit')
                                            tr
                                                td {{'Feedback Topic Of Default Failure System Call (Required)' | translate}}
                                                td
                                                    select.form-control(ng-model='vm.tsAnalyticsPhoneList.failFeedBackTopic',  ng-options='v.key as v.value for (i,v) in vm.playerFeedbackTopic' ng-change='vm.checkAnalyticsFilterAndImportSystem()' ng-disabled='vm.analyticsPhoneListEdit')
                                            tr
                                                td {{'Feedback Content Of Default Failure System Call (Required)' | translate}}
                                                td
                                                    input.form-control(type='text', ng-model='vm.tsAnalyticsPhoneList.failFeedBackContent' ng-change='vm.checkAnalyticsFilterAndImportSystem()' ng-disabled='vm.analyticsPhoneListEdit')
                                            tr
                                                td {{'Assign To N Caller For Each Unregistered Phone Number (Required)' | translate}}
                                                td
                                                    input.form-control(type='number', min=0, max='{{vm.tsAnalyticsPhoneListMaxCaller}}', ng-model='vm.tsAnalyticsPhoneList.callerCycleCount' ng-change='vm.checkAnalyticsFilterAndImportSystem()' ng-disabled='vm.analyticsPhoneListEdit')
                                            tr
                                                td {{'Daily Distribute Task Count Equally Divide For Each Caller (Required)' | translate}}
                                                td
                                                    input.form-control(type='number', min=0, ng-model='vm.tsAnalyticsPhoneList.dailyCallerMaximumTask' ng-change='vm.checkAnalyticsFilterAndImportSystem()' ng-disabled='vm.analyticsPhoneListEdit')
                                            tr
                                                td {{'Daily Distribute Task Time (Required)' | translate}}
                                                td
                                                    #tsAnalyticsTimePicker.datetimepicker.form-control
                                                        input.input-append.playerDate(style='border:0;', data-format="hh:mm:ss", type='text' ng-disabled='vm.analyticsPhoneListEdit')
                                                        span.add-on
                                                            i.fa-clock-o.fa(data-time-icon='fa fa-clock-o' ng-show='!vm.analyticsPhoneListEdit')
                                            tr
                                                td {{'Distribute Task Start Date (Required)' | translate}}
                                                td
                                                    #tsAnalyticsDatePicker.datetimepicker.form-control
                                                        input.input-append.playerDate(style='border:0;', data-format="dd/MM/yyyy", type='text' ng-disabled='vm.analyticsdisableAll')
                                                        span.add-on
                                                            i.fa-calendar.fa(data-date-icon='fa fa-calendar' ng-show='!vm.analyticsdisableAll')
                                            tr
                                                td {{'Reclaim Task After X Days And Re-assign Task (Required)' | translate}}
                                                td
                                                    input.form-control(type='number', min=0, ng-model='vm.tsAnalyticsPhoneList.reclaimDayCount' ng-change='vm.checkAnalyticsFilterAndImportSystem()' ng-disabled='vm.analyticsPhoneListEdit')
                                            tr
                                                td {{'Zone Will Not Be Call' | translate}}
                                                td
                                                    table.common-table.playerLvlTable
                                                        thead
                                                            tr
                                                                th(style="width:50%") {{"PROVINCE" | translate}}
                                                                th(style="width:50%") {{"CITY" | translate}}
                                                                th(ng-if='!vm.analyticsPhoneListEdit')
                                                        tbody
                                                            tr(ng-repeat='(i, v) in vm.tsAnalyticsPhoneList.dangerZoneList')
                                                                td
                                                                    select.form-control(ng-model='vm.tsAnalyticsPhoneList.dangerZoneList[i].province',  ng-options='i as i for (i, v) in constPhoneArea' ng-disabled='vm.analyticsPhoneListEdit', ng-change='vm.tsAnalyticsPhoneList.dangerZoneList[i].city = "all"')
                                                                td
                                                                    select.form-control(ng-model='vm.tsAnalyticsPhoneList.dangerZoneList[i].city', ng-disabled='vm.analyticsPhoneListEdit')
                                                                        option(value='all') {{'All Selected' | translate}}
                                                                        option(ng-repeat='(n,val) in constPhoneArea[vm.tsAnalyticsPhoneList.dangerZoneList[i].province]', value='{{val}}') {{val}}
                                                                td(ng-if='!vm.analyticsPhoneListEdit')
                                                                    i.fa.fa-minus(ng-click='vm.updateCollectionInEdit("remove", vm.tsAnalyticsPhoneList.dangerZoneList, $index)'  ng-show='!vm.analyticsPhoneListEdit')
                                                            tr(ng-show="!vm.analyticsPhoneListEdit")
                                                                td(colspan=3) {{'ADD' | translate}}
                                                            tr(ng-show="!vm.analyticsPhoneListEdit")
                                                                td
                                                                    select.form-control(ng-model='vm.tsAnalyticsProvince',  ng-options='i as i for (i, v) in constPhoneArea' ng-disabled='vm.analyticsPhoneListEdit', ng-change='vm.tsAnalyticsCity = "all"')
                                                                td
                                                                    select.form-control(ng-model='vm.tsAnalyticsCity', ng-disabled='vm.analyticsPhoneListEdit')
                                                                        option(value='all') {{'All Selected' | translate}}
                                                                        option(ng-repeat='(n,val) in constPhoneArea[vm.tsAnalyticsProvince]', value='{{val}}') {{val}}
                                                                td
                                                                    i.fa.fa-plus(ng-click='vm.updateCollectionInEdit("add", vm.tsAnalyticsPhoneList.dangerZoneList, {province: vm.tsAnalyticsProvince, city: vm.tsAnalyticsCity}); vm.resetAnalyticsProvince();' ng-show='vm.tsAnalyticsProvince && vm.tsAnalyticsCity' ng-disabled='vm.analyticsPhoneListEdit')
                                            tr
                                                td {{'Filter Phone Number From White List And Recycle Bin' | translate}}
                                                td
                                                    input(type='checkbox', min=0, ng-model='vm.tsAnalyticsPhoneList.isCheckWhiteListAndRecycleBin' ng-disabled='vm.analyticsdisableAll')
                                            tr(ng-repeat='(i,v) in vm.tsAnalyticsPhoneList.time_operator_description track by $index')
                                                td {{'Time/Operator/Description' | translate}}
                                                td
                                                    text.form-control {{vm.tsAnalyticsPhoneList.time_operator_description[i].importTime | date : 'yyyy-MM-dd HH:mm:ss'}}  {{" - " + vm.tsAnalyticsPhoneList.time_operator_description[i].adminName + " - " + vm.tsAnalyticsPhoneList.time_operator_description[i].description}}

            .modal-footer
                div(style='display:inline-block;font-weight:bold;margin:10px 10px 0 0;font-size:16px')
                button.btn.btn-success.common-button(data-dismiss='modal'  ng-click="vm.editTsNewList()" ng-disabled="vm.checkFilterIsDisable" ng-show="!vm.analyticsPhoneListEdit")
                    i.fa.fa-check
                    text {{"CONFIRM" | translate}}
                button.btn.btn-danger.common-button(data-dismiss='modal' ng-show="vm.analyticsPhoneListEdit")
                    i.fa.fa-ban
                    text {{"CANCEL" | translate}}
                button.btn.btn-warning.common-button(ng-click = "vm.analyticsPhoneListEdit = true;vm.cancelEditTsAnalyticsPhoneList()"  ng-show="!vm.analyticsPhoneListEdit")
                    i.fa.fa-ban
                    text {{"CANCEL" | translate}}
                button.btn.btn-primary.common-button(ng-click="vm.tsAnalyticsPhoneListEdit()" ng-show="vm.analyticsPhoneListEdit && vm.isPhoneListEditable" ng-disabled='vm.disableAnalyticsPhoneListEdit')
                    i.fa.fa-pencil-square-o
                    text {{'EDIT' | translate}}

#modalTsPhoneFeedback.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false, aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:55%')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"ADD_FEEDBACK" | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .row
                            .col-md-12
                                table(style='min-width:100%')
                                    tbody
                                        tr
                                            td {{'FEEDBACK_RESULTS' | translate}}
                                            td
                                                select(ng-model='vm.tsPhoneAddFeedback.result', ng-options='v.key as v.value for (i,v) in vm.allPlayerFeedbackResults')
                                                button.btn.btn-primary(style='margin-left:20px;', ng-click="vm.addPlayerFeedbackResultData={};vm.deletePlayerFeedbackResultData={};", ng-show="checkViewPermission('Player', 'Feedback','ModifyFeedbackResult')", data-toggle="modal", data-target="#modalAddPlayerFeedbackResult") {{"ADD" | translate}}
                                        tr
                                            td {{'FEEDBACK_TOPIC' | translate}}
                                            td
                                                select(ng-model='vm.tsPhoneAddFeedback.topic', ng-options='v.key as v.value for (i,v) in vm.playerFeedbackTopic')
                                                button.btn.btn-primary(style='margin-left:20px;', ng-click="vm.addPlayerFeedbackTopicData={};vm.deletePlayerFeedbackTopicData={};", ng-show="checkViewPermission('Player', 'Feedback','ModifyFeedbackTopic')", data-toggle="modal", data-target="#modalAddPlayerFeedbackTopic") {{"ADD" | translate}}
                                        tr
                                            td
                                                text {{"FEEDBACK_CONTENT" | translate}}
                                            td.textareaDetail
                                                textarea.form-control(type="textarea", rows='4', ng-model='vm.tsPhoneAddFeedback.content')
                                        tr
                                            td(colspan=2)
                                                .text-center
                                                    button.btn.btn-danger.margin-right-5(ng-click='vm.tsPhoneAddFeedback.content="";vm.tsPhoneAddFeedback.result="";vm.tsPhoneAddFeedback.topic="";') {{'Reset' | translate}}
                                                    button.btn.btn-success(data-dismiss='modal' ng-disabled="!vm.tsPhoneAddFeedback.result || !vm.tsPhoneAddFeedback.topic", ng-click='vm.addTsPhoneFeedback(vm.tsPhoneAddFeedback)') {{'CONFIRM' | translate}}

#modalTsPhoneFeedbackHistory.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false, aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:65%')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"Feedback History" | translate}} : {{vm.tsPhoneFeedbackDetail.length}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .row
                            .col-md-12
                                table.simple-table
                                    thead
                                        tr
                                            th {{'TIME' | translate}}
                                            th {{'ADMIN' | translate}}
                                            th {{'RESULT' | translate}}
                                            th {{'FEEDBACK_TOPIC' | translate}}
                                            th {{'REMARK' | translate}}
                                    tbody
                                        tr(ng-repeat='(i,v) in vm.tsPhoneFeedbackDetail', ng-show='vm.tsPhoneFeedbackDetail.length>0')
                                            td
                                                text {{vm.dateReformat(v.createTime)}}
                                            td
                                                text {{v.adminId.adminName || 'Unknown' | translate}}
                                            td
                                                text {{v.result$}}
                                            td
                                                text {{v.topic | translate}}
                                            td
                                                text {{v.content}}

#modalAdminPhoneListDetails.hide(style="width: 600px")
    table.simple-table(style='width:auto;min-width:99.9%')
        thead
            tr
                th {{'TITLE' | translate}}
                th {{'VALUE' | translate}}
        tbody
            tr
                td
                    text {{'PLAYER_NAME' | translate}}
                td
                    text {{vm.tsPhoneDetails.playerName}}
            tr
                td
                    text {{'REAL_NAME' | translate}}
                td
                    text {{vm.tsPhoneDetails.realName}}
            tr
                td
                    text {{'PHONE' | translate}}
                td
                    text {{vm.tsPhoneDetails.phoneNumber}}
            tr
                td
                    text {{'GENDER' | translate}}
                td
                    text {{vm.tsPhoneDetails.gender}}
            tr
                td
                    text {{'DOB' | translate}}
                td
                    text {{vm.tsPhoneDetails.dob}}
            tr
                td
                    text {{'WECHAT' | translate}}
                td
                    text {{vm.tsPhoneDetails.wechat}}
            tr
                td
                    text {{'QQ' | translate}}
                td
                    text {{vm.tsPhoneDetails.qq}}
            tr
                td
                    text {{'EMAIL' | translate}}
                td
                    text {{vm.tsPhoneDetails.email}}
            tr
                td
                    text {{'REMARKS' | translate}}
                td
                    text {{vm.tsPhoneDetails.remark}}
            tr
                td
                    text {{'PHONE_LOCATION' | translate}}
                td
                    text {{vm.tsPhoneDetails.province}} {{vm.tsPhoneDetails.city}}

#modalAdminPhoneListReminder.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:55%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"Set reminder/ clear reminder"|translate}}
            .modal-body
                text(style='color:red') {{"CURRENT_REMIND_TIME"| translate}} : {{vm.tsPhoneReminderDateShow}}
                #phoneListReminderTimePicker
            .modal-footer
                button.btn.btn-primary.common-button(ng-click="vm.updateTsPhoneDistributedPhone()", data-dismiss='modal') {{"CONFIRM" | translate}}
                button.btn.btn-warning.common-button(data-dismiss='modal') {{"CANCEL" | translate}}
                button.btn.btn-primary.common-button(ng-click="vm.cancelTsDistributedPhoneReminder()" data-dismiss='modal') {{"Clear Reminder" | translate}}

#modalCreateTsPlayer.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='max-height: 80vh;overflow-y: auto')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"CREATE_PLAYER" | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .well
                            .row
                                include tsPhone-player-create-form
                .well(ng-show='vm.playerCreateResult.success')
                    label.text-success {{'SUCCESS' | translate}}
                .well(ng-show='vm.playerCreateResult && !vm.playerCreateResult.success')
                    label.text-danger {{'FAIL' | translate}}
                    label.form-control {{(vm.playerCreateResult.error.message || vm.playerCreateResult.error.errorMessage || vm.playerCreateResult.error || vm.playerCreateResult) | translate}}
            .modal-footer
                button.btn.btn-primary.common-button(ng-disabled='form_new_player.$invalid || vm.passwordLengthCheck(vm.newPlayer.password)', ng-click="vm.createNewPlayer();", ng-hide='vm.playerCreateResult && vm.playerCreateResult.success') {{"CREATE" | translate}}
                button.btn.btn-warning.common-button(data-dismiss='modal', ng-hide='vm.playerCreateResult') {{"CANCEL" | translate}}
                button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal', ng-show='vm.playerCreateResult') {{"CLOSE" | translate}}

#duplicatePhoneNumberLog.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false, aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:95%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"Duplicate Phone Number"|translate}}
            .modal-body
                div
                    label {{"Total" | translate}} {{vm.duplicatePhoneNumber.totalCount}} {{"records" | translate}}
                    table#duplicatePhoneNumberLogTable.common-table.display(style='min-width:100%')
                    #duplicatePhoneNumberLogTablePage.height30

#modalTsPlayerCredibilityRemarks.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:80%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{'UPDATE_PLAYER_CREDIBILITY_REMARK' | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        button.btn.btn-primary.common-button(ng-click="vm.showSelectedCredibility()", data-dismiss='modal') {{"CONFIRM" | translate}}
                        span {{vm.credibilityRemarkUpdateMessage | translate}}
                        div.row
                            div.col-md-4
                                .well.row
                                    label {{"REDUCE_SCORE" | translate}}
                                    table.paddingTbl(style='min-width:100%')
                                        thead
                                            tr
                                                th {{"remark" | translate}}
                                                th {{"score" | translate}}
                                                th {{"SELECT" | translate}}
                                        tbody
                                            tr(ng-repeat='(i, data) in vm.negativeRemarks')
                                                td
                                                    text {{data.name}}
                                                td
                                                    text {{data.score}}
                                                td
                                                    input.selectRemark(type="checkbox", ng-model="data.selected", ng-change="vm.checkAnyPlayerRemarkRemoved()")
                                                    span(id="{{'c-'+data._id}}")
                            div.col-md-4
                                .well
                                    label {{"ADD_SCORE" | translate}}
                                    table.paddingTbl(style='min-width:100%')
                                        thead
                                            tr
                                                th {{"remark" | translate}}
                                                th {{"score" | translate}}
                                                th {{"SELECT" | translate}}
                                        tbody
                                            tr(ng-repeat='(i, data) in vm.positiveRemarks')
                                                td
                                                    text {{data.name}}
                                                td
                                                    text {{data.score}}
                                                td
                                                    input.selectRemark(type="checkbox", ng-model="data.selected", ng-change="vm.checkAnyPlayerRemarkRemoved()")
                                                    span(id="{{'c-'+data._id}}")
                            div.col-md-4
                                .well
                                    label {{"REMINDER" | translate}}
                                    table.paddingTbl(style='min-width:100%')
                                        thead
                                            tr
                                                th {{"remark" | translate}}
                                                th {{"score" | translate}}
                                                th {{"SELECT" | translate}}
                                        tbody
                                            tr(ng-repeat='(i, data) in vm.neutralRemarks')
                                                td
                                                    text {{data.name}}
                                                td
                                                    text {{data.score}}
                                                td
                                                    input.selectRemark(type="checkbox", ng-model="data.selected", ng-change="vm.checkAnyPlayerRemarkRemoved()", ng-show="!data.isFixed")
                                                    span(id="{{'c-'+data._id}}")
                .panel.panel-primary
                    .panel-body
                        div.col-md-12
                            label {{'REMARKS' | translate}}:
                            div
                                textarea.form-control(style="max-width: 100%; overflow: auto; margin-bottom: 12px;", rows="15", ng-model="vm.credibilityRemarkComment", placeholder="{{'Player Credibility' | translate}}{{'REMARKS' | translate}}")


#modalAssignmentStatusDetail.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style="width: 90%;")
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"SEND_STATUS" | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .well(style="padding-bottom:45px;")
                            span(style="font-weight:bold;font-size:20px;line-height:2em;") {{"A."}}{{"Distribution Name List Settings" | translate}}
                            table#distributionSettings.simple-table.display(style='min-width: 100%; margin-bottom: 15px;')
                                thead
                                    tr
                                        th {{"Add/Delete" | translate}}
                                        th {{"csOfficer" | translate}}
                                        th {{"Distribution" | translate}}
                                tbody
                                    tr(ng-repeat='(i,v) in vm.tsAssigneesDisplay')
                                        td
                                            i.fa.fa-minus(ng-show="vm.allowDistributionSettingsEdit" ng-click="vm.removeAssignee(v.adminName); vm.checkUpdateTsAssignee()")
                                        td {{v.adminName}}
                                        td
                                            input(id="{{i+'-execute-distribute-on'}}" type="radio" name="{{i+'-execute-distribution'}}" value="1" ng-click='vm.checkUpdateTsAssignee()' ng-change="vm.updateAssigneeStatus(v)" ng-model="vm.tsAssigneesDisplay[i].status" ng-disabled="!vm.allowDistributionSettingsEdit" )
                                            label(for="{{i+'-execute-distribute-on'}}" style="font-weight: normal;") {{"Open" | translate}}
                                            input(id="{{i+'-execute-distribute-off'}}" type="radio" name="{{i+'-execute-distribution'}}" value="0" ng-click='vm.checkUpdateTsAssignee()' ng-change="vm.updateAssigneeStatus(v)" ng-model="vm.tsAssigneesDisplay[i].status" ng-disabled="!vm.allowDistributionSettingsEdit" )
                                            label(for="{{i+'-execute-distribute-off'}}" style="font-weight: normal;") {{"Closed" | translate}}
                                    tr(ng-show="vm.allowDistributionSettingsEdit")
                                        td
                                            i.fa.fa-plus(ng-click="vm.addAssignee();vm.checkUpdateTsAssignee()")
                                        td
                                            select.spicker.form-control(ng-options='admin.adminName as admin.adminName group by admin.departmentName for admin in vm.adminList' ng-model='vm.selectedAssignees' multiple data-actions-box='true')
                                        td
                                            input(id="new-execute-distribute-on" type="radio", name="new-execute-distribution", value="1" ng-model="vm.newAssigneesExecuteStatus")
                                            label.radio-space(for="new-execute-distribute-on" style="font-weight: normal;") {{"Open" | translate}}
                                            input(id="new-execute-distribute-off" type="radio", name="new-execute-distribution", value="0" ng-model="vm.newAssigneesExecuteStatus")
                                            label.radio-space(for="new-execute-distribute-off" style="font-weight: normal;") {{"Closed" | translate}}

                            button.btn.btn-primary.common-button.pull-right(ng-show="vm.allowDistributionSettingsEdit" ng-disabled='vm.disableUpdateTsAssignee' ng-click="vm.updateDistributionSettings()") {{"CONFIRM" | translate}}
                            button.btn.btn-warning.common-button.pull-right(ng-show="vm.allowDistributionSettingsEdit" ng-click="vm.cancelDistributionSettingsEdit()") {{"CANCEL" | translate}}
                            button.btn.btn-warning.common-button.pull-right(ng-show="!vm.allowDistributionSettingsEdit" ng-disabled='vm.disableAllowDistributionSettingsEdit' ng-click="vm.enableDistributionSettingsEdit()") {{"Edit" | translate}}

                        .well
                            span(style="font-weight:bold;font-size:20px;line-height:2em;") {{"B."}}{{"Name List Used Details" | translate}}
                            .col-md-12.search-filters-container.well
                                div(style="width:80%;display:inline-block;margin-right:10px;")
                                    select.spicker.form-control(ng-options='admin.adminName as admin.adminName for admin in vm.tsAssignees' ng-model='vm.distributionDetailsQuery.adminNames' multiple data-actions-box='true')
                                button#searchDistributionDetails.btn.btn-primary.common-button(style="margin:0;" ng-click="vm.searchDistributionDetails();") {{"SEARCH" | translate}}
                            table.simple-table.display(style='min-width: 100%; width: 100%')
                                thead
                                    tr
                                        th {{"CS Officer (Assignee)" | translate}}
                                        th {{"Distributed Count" | translate}}
                                        th {{"Fulfilled Count" | translate}}
                                        th {{"Success Count" | translate}}
                                        th {{"Registered Count" | translate}}
                                        th {{"TopUp Count" | translate}}
                                        th {{"Multiple TopUp Count" | translate}}
                                        th {{"Valid Player Count" | translate}}
                                        th {{"Current List Size (Unregistered & Unreclaimed)" | translate}}
                                        th(title='{{"Unexpired phone will be marked as distributed and be reclaimed back to phone list pool" | translate}}') {{"Reclaim Phone List in Advance (Unregistered Phone)" | translate}}
                                        th(title='{{"Unexpired phone will be marked as distributed and be reclaimed back to phone list pool" | translate}}') {{"Reclaim Unused Phone Number in Advance" | translate}}
                                tbody
                                    tr(ng-repeat='(i,v) in vm.distributionDetails.data')
                                        td {{v.adminName}}
                                        td {{v.distributedCount}}
                                        td {{v.fulfilledCount}}
                                        td {{v.successCount}}
                                        td {{v.registeredCount}}
                                        td {{v.topUpCount}}
                                        td {{v.multipleTopUpCount}}
                                        td {{v.validPlayerCount}}
                                        td {{v.currentListSize}}
                                        td 
                                            a(ng-show="v.currentListSize" data-toggle="modal", data-target="#modalReclaimTsPhone" ng-click="vm.selectedReclaimAssignee = v.assigneeObjId") {{"EXECUTION" | translate}}
                                        td
                                            a(ng-show="v.currentListSize" data-toggle="modal", data-target="#modalReclaimNoUsedTsPhone" ng-click="vm.selectedReclaimAssignee = v.assigneeObjId") {{"EXECUTION" | translate}}
                                    tr(ng-show="vm.distributionDetails.data")
                                        td(style="font-weight:bold;")
                                            span {{"Total Count" | translate}}
                                            br
                                            span ({{"Exclude Recurrence" | translate}})
                                        td {{vm.distributionDetails.totalDistributed}}
                                        td {{vm.distributionDetails.totalFulfilled}}
                                        td {{vm.distributionDetails.totalSuccess}}
                                        td {{vm.distributionDetails.totalRegistered}}
                                        td {{vm.distributionDetails.totalTopUp}}
                                        td {{vm.distributionDetails.totalMultipleTopUp}}
                                        td {{vm.distributionDetails.totalValidPlayer}}
                                        td {{vm.distributionDetails.totalCurrentListSize}}
                                        td
                                        td
            .modal-footer

#modalReclaimTsPhone.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"Reclaim Phone List in Advance (Unregistered Phone)" | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .well
                            text {{"All unregister phone number will be reclaim. Are you sure to execute?" | translate}}
            .modal-footer
                button.btn.btn-primary.common-button(data-dismiss='modal', ng-click="vm.reclaimTsPhone()") {{"CONFIRM" | translate}}
                button.btn.btn-warning.common-button(data-dismiss='modal') {{"CANCEL" | translate}}

#modalReclaimNoUsedTsPhone.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"Reclaim Unused Phone Number in Advance" | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .well
                            text {{"All unused phone number will be reclaim. Are you sure to execute?" | translate}}
            .modal-footer
                button.btn.btn-primary.common-button(data-dismiss='modal', ng-click="vm.reclaimTsPhone(true)") {{"CONFIRM" | translate}}
                button.btn.btn-warning.common-button(data-dismiss='modal') {{"CANCEL" | translate}}

#modalDeleteDXMission.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"DELETE_DX_MISSION" | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .well
                            text {{"All records in this mission will be delete, except registered user's data, continue?" | translate}}
            .modal-footer
                button.btn.btn-primary.common-button(data-dismiss='modal', ng-click="vm.deleteDXMission()") {{"CONFIRM" | translate}}
                button.btn.btn-warning.common-button(data-dismiss='modal') {{"CANCEL" | translate}}


#modalDXMission.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                span
                    ul.nav.nav-tabs

                        li.active
                            a(data-toggle="tab", href="#ProposalDetail", ng-click="")
                                .fa.fa-user
                                | 电销任务
                        li(ng-if='vm.chartData')
                            a(data-toggle="tab", href="#Workflow", ng-click="")
                                .fa.fa-user
                                | {{ 'WORKFLOW' | translate }}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .tab-content
                            .col-md-12
                                form(name='form_edit_telemarketing_task', novalidate)
                                    div
                                        .full-width-input-block
                                            label {{"Please Enter Task Name" | translate}}: (*)
                                            input.form-control(type='text', ng-model='vm.editTeleMarketing.name', required)
                                        .full-width-input-block
                                            label {{"Please Enter Task Description" | translate}}:
                                            input.form-control(type='text', ng-model='vm.editTeleMarketing.description')

                                        .full-width-input-block
                                            label {{"Please Enter Account Prefix" | translate}}: (*)
                                            input.form-control(type='text', ng-model='vm.editTeleMarketing.playerPrefix', required)
                                        .full-width-input-block
                                            label {{"Please Enter Number of Last Digits of Phone Number as Account Name" | translate}}: (*)
                                            input.form-control(type='number', ng-model='vm.editTeleMarketing.lastXDigit', required)

                                        .full-width-input-block
                                            label {{"Please Enter Default Password" | translate}}: (*)
                                            input.form-control(type='text', ng-model='vm.editTeleMarketing.password', required)

                                        .full-width-input-block
                                            label {{"Please Enter Registration URL" | translate}}: (*)
                                            input.form-control(type='text', ng-model='vm.editTeleMarketing.domain', required)

                                        .full-width-input-block
                                            label {{"Please Enter Login URL" | translate}}: (*)
                                            input.form-control(type='text', ng-model='vm.editTeleMarketing.loginUrl', required)

                                        .full-width-input-block
                                            label {{"Please Enter Free Credit Amount" | translate}}:
                                            input.form-control(type='number', ng-model='vm.editTeleMarketing.creditAmount')

                                        .full-width-input-block
                                            label {{"Please Choose Locking Provider Group" | translate}}: (*)
                                            select.form-control(ng-model='vm.editTeleMarketing.providerGroup')
                                                option(value='') {{'LOCAL_CREDIT' | translate}}
                                                option(ng-repeat='(i,v) in vm.gameProviderGroupNames', value='{{i}}') {{v}}

                                        .full-width-input-block
                                            label {{"Please Enter Required Consumption Amount" | translate}}: (*)
                                            input.form-control(type='number', ng-model='vm.editTeleMarketing.requiredConsumption', required)

                                        .full-width-input-block
                                            label {{"Please Update Invitation Template" | translate}}:
                                            textarea.form-control(style="min-height:150px;",ng-model='vm.editTeleMarketing.invitationTemplate')

                                        .full-width-input-block
                                            label {{"Please Update Registration Succeed Message Title" | translate}}:
                                            input.form-control(type='text', ng-model='vm.editTeleMarketing.welcomeTitle')

                                        .full-width-input-block
                                            label {{"Please Update Registration Succeed Message Template" | translate}}:
                                            textarea.form-control(style="min-height:150px;", ng-model='vm.editTeleMarketing.welcomeContent')

                                        .full-width-input-block
                                            label {{"Please Enter Number of Days for Alert" | translate}}:
                                            input.form-control(type='number', ng-model='vm.editTeleMarketing.alertDays')

                                        .full-width-input-block
                                            label {{"Forbid withdraw if there is balance after unlock" | translate}}:
                                            input.form-control(type='number', ng-model='vm.editTeleMarketing.forbidWithdrawIfBalanceAfterUnlock')
            .modal-footer
                br
                .pull-right
                    div(style='display:inline-block;font-weight:bold') {{vm.editTaskResult | translate}}
                    div(style='display:inline-block')
                      button.common-button.btn.btn-primary(style="float:none !important",data-dismiss='modal') {{'CANCEL' | translate}}
                    div(style='display:inline-block')
                      button.common-button.btn.btn-primary(style="float:none !important", ng-if="checkViewPermission('TeleMarketing', 'DXMission', 'Update')",
                    ng-click="vm.updateTeleMarketingTask()", ng-disabled="form_edit_telemarketing_task.$invalid") {{'EDIT' | translate}}


#telPopover.hide(style="width: 600px")
    //label {{vm.telphonePlayer.name}}
    button.playerMessage.common-button.margin-right-5.btn.btn-success(data-player='{{vm.telphonePlayer}}') {{'MESSAGE' | translate}}
    button.playerTelephone.common-button.margin-right-5.btn.btn-success(data-player='{{vm.telphonePlayer}}') {{'TELPHONE' | translate}}


ez-modal(modal-id="messagePlayerModal", modal-title="{{'SEND_MESSAGE_TO_PLAYER' | translate}}")
    ez-modal-body
        ul.nav.nav-tabs.common-nav-tabs.popupHeaderMenu(style='margin:10px 0 10px 0;height: 43px;')
            .pull-left.padding-all-5
            li.active(id = 'sendMessageToPlayerTab',ng-disabled="!vm.canEditPlayer() || vm.selectedPlayersCount!= 1", data-toggle="modal",)
                a.common-tab(data-toggle="tab", ng-click='vm.messageModalTab = \'sendMessageToPlayerPanel\'')
                    .fa.fa-file-text.margin-right-5
                    text.span {{"SEND_MESSAGE" | translate}}
            li(id = 'messageLogTab',ng-disabled="!vm.canEditPlayer() || vm.selectedPlayersCount!= 1", data-toggle="modal",)
                a.common-tab(data-toggle="tab",ng-click='vm.messageModalTab = \'messageLogPanel\'; vm.initMailLog();')
                    .fa.fa-file-text.margin-right-5
                    text.span {{"mailLog" | translate}}

        #sendMessageToPlayerPanel.panel-body(ng-if="vm.messageModalTab === 'sendMessageToPlayerPanel'")
            form(name="form_send_message")
                .row
                    div.form-group.col-md-12
                        label.control-label {{"TO_PLAYER" | translate}}:&nbsp;
                        //text {{vm.telphonePlayer.name}} {{vm.telphonePlayer.nickName && '(' + vm.telphonePlayer.nickName + ')'}}
                        text {{vm.telphonePlayer.name}}
                .row
                    div.form-group.col-md-12
                        label.control-label {{"TITLE" | translate}}
                        input.form-control(type="text", ng-model="vm.messageForPlayer.title", placeholder="...")
                .row
                    div.form-group.col-md-12
                        label.control-label {{"MESSAGE" | translate}}
                        textarea.form-control(ng-model="vm.messageForPlayer.content", placeholder="...", rows="8")

        #messageLogPanel.panel-body(ng-if="vm.messageModalTab === 'messageLogPanel'")
            #mailLogQuery.block-query.well
                div
                    label {{"Start date" | translate}}
                    .startTime
                div
                    label {{"End date" | translate}}
                    .endTime
                button.btn.btn-primary.common-button(ng-click='vm.searchMailLog()', style='vertical-align: bottom') {{"SEARCH" | translate}}
            div(style='max-height: 400px; max-height: 50vh; overflow: auto')
                table.simple-table.display(style='min-width: 100%; width: 100%')
                    thead
                        tr
                            th {{"date" | translate}}
                            th(data-toggle="modal", data-target="#modalFilterMessageLogSenderType", style="cursor: pointer") {{"Sender Type" | translate}}
                            th {{"Sender Name" | translate}}
                            th {{"CONTENT" | translate}}
                            th {{"FRONT_END_STATUS" | translate}}
                    tbody
                        tr(ng-repeat='(i,mailLog) in vm.mailLog.receivedMails')
                            td {{mailLog.createTime | date:'medium'}}
                            td {{mailLog.senderType}}
                            td {{mailLog.senderName | translate}}
                            td {{mailLog.content}}
                            td {{mailLog.mailStatus$ | translate}}

    ez-modal-footer(ng-if="vm.messageModalTab === 'sendMessageToPlayerPanel'")
        ez-confirm-button(ng-click="vm.sendMessageToPlayer()") {{"SEND" | translate}}
        ez-cancel-button {{"CANCEL" | translate}}

ez-modal(modal-id="smsPlayerModal", modal-title="{{'Send SMS to Player' | translate}}")
    ez-modal-body

        ul.nav.nav-tabs.common-nav-tabs.popupHeaderMenu(style='margin:10px 0 10px 0;height: 43px;')
            .pull-left.padding-all-5
            li.active#smsToPlayerTab(ng-hide="(vm.selectedSinglePlayer && vm.selectedSinglePlayer.permission && vm.selectedSinglePlayer.permission.SMSFeedBack === false)")
                a.common-tab(data-toggle="tab", ng-click='vm.showSmsTab("smsToPlayerPanel");')
                    .fa.fa-file-text.margin-right-5
                    text.span {{"MESSAGE" | translate}}
            li#smsLogTab
                a.common-tab(data-toggle="tab",ng-click='vm.showSmsTab("smsLogPanel"); vm.initSMSLog("single");')
                    .fa.fa-file-text.margin-right-5
                    text.span {{"smsLog" | translate}}
            li#smsSettingTab(ng-hide="!vm.canEditPlayer()")
                a.common-tab(data-toggle="tab",ng-click='vm.showSmsTab("smsSettingPanel"); vm.loadSMSSettings();')
                    .fa.fa-file-text.margin-right-5
                    text.span {{"SMS Notify Settings" | translate}}


        #smsToPlayerPanel.panel-body(ng-if="vm.smsModalTab === 'smsToPlayerPanel'")
            .row
                div.form-group.col-md-12
                    label.control-label {{"TO_PLAYER" | translate}}:&nbsp;
                    text {{vm.smsPlayer.name}} {{vm.smsPlayer.nickName && '(' + vm.smsPlayer.nickName + ')'}}

                    label.margin-left-5.control-label {{"Channel" | translate}}:&nbsp;
                    select(ng-model='vm.smsPlayer.channel', ng-options='a for a in usableChannelList')

                    label.margin-left-5.blink.text-danger(ng-if="!vm.smsPlayer.hasPhone") {{'This Player did not input phone number' | translate}}

                    .pull-right(ng-if='vm.sendSMSResult.sent===true')
                        .fa.fa-check.text-success(ng-if='vm.sendSMSResult.result')
                            text {{'SEND' | translate}} {{'SUCCESS' | translate}}
                        .fa.fa-times.text-danger(ng-if='!vm.sendSMSResult.result')
                            text {{'SEND' | translate}} {{'FAIL' | translate}}
                    .pull-right(ng-if='vm.sendSMSResult.sent==="sending"')
                        text.text-danger.blink {{"Sending" | translate}}

            .row
                div.form-group.col-md-12
                    label.control-label {{"SMS Templates" | translate}}
                        select.form-control(style='width:100%;resize:none',ng-change="vm.changeSMSTemplate()", ng-model='vm.smstpl' ng-options='a.type|translate for a in vm.smsTemplate')
                            option(value="")
            .row
                div.form-group.col-md-12
                    label.control-label {{"CONTENT" | translate}}
                    textarea.form-control(ng-model="vm.smsPlayer.message", placeholder="...", rows="8", ng-disabled="!vm.smsPlayer.hasPhone", maxlength="100")

        #smsLogPanel.panel-body(ng-if="vm.smsModalTab === 'smsLogPanel'")
            #smsLogQuery.block-query.well
                div
                    label {{"RESULT" | translate}}
                    select.form-control(ng-model='vm.smsLog.query.status')
                        option(value='all') {{"any" | translate}}
                        option(value='success') {{"Success" | translate}}
                        option(value='failure') {{"Failure" | translate}}
                div
                    label {{"Start date" | translate}}
                    .startTime
                    //-(ng-model='vm.smsLog.query.startTime')
                div
                    label {{"End date" | translate}}
                    .endTime
                    //-(ng-model='vm.smsLog.query.endTime')
                button.btn.btn-primary.common-button(ng-click='vm.searchSMSLog()', style='vertical-align: bottom') {{"SEARCH" | translate}}
            div(style='max-height: 400px; max-height: 50vh; overflow: auto')
                label {{"Total" | translate}} {{vm.smsLog.totalCount}} {{"records" | translate}}
                table.simple-table.display(style='min-width: 100%; width: 100%')
                    thead
                        tr
                            th {{"date" | translate}}
                            th(data-toggle="modal", data-target="#modalFilterSmsLogSenderType", style="cursor: pointer") {{"senderType" | translate}}
                            th {{"senderName" | translate}}
                            th {{"Recipient" | translate}}
                            th {{"Channel" | translate}}
                            th {{"CONTENT" | translate}}
                            th {{"STATUS" | translate}}
                    tbody
                        tr(ng-repeat='(i,smsLog) in vm.smsLog.searchResults')
                            td {{smsLog.createTime$}}
                            td {{smsLog.adminName ? 'admin':'system'}}
                            td {{smsLog.adminName}}
                            td {{smsLog.recipientName}}
                            td {{smsLog.channel}}
                            td {{smsLog.message}}
                            td(ng-if='smsLog.status !== "failure"') {{smsLog.status$}}
                            td(ng-if='smsLog.status === "failure"')
                                text.sn-hoverable-text(title='{{smsLog.error}}', sn-tooltip) {{smsLog.status$}}
                br
                #smsLogTablePage

        #smsSettingPanel.panel-body(ng-if="vm.smsModalTab === 'smsSettingPanel'")
            .row.margin-left-5.margin-right-5
                .form-group.col-md-12
                    .col-md-12.col-lg-4
                        table.common-table.playerLvlTable
                            thead
                                tr
                                    th
                                        input.margin-right-5(type="checkbox", ng-model="vm.playerBeingEdited.checkAllNoSmsGroup" ng-init="vm.isAllNoSmsGroupChecked()" ng-change="vm.toggleAllNoSmsGroup()")
                                        | {{"receive status" | translate}}
                                    th {{"no group sms setting" | translate}}

                            tbody
                                tr(ng-repeat='(i, v) in vm.noGroupSmsSetting')
                                    td
                                        input.margin-right-5(type="checkbox", ng-model="vm.playerBeingEdited.smsSetting[v.name]" ng-change="vm.isAllNoSmsGroupChecked()")
                                    td
                                        span {{v.name | translate}}

                    .col-sm-12.col-sm-offset-0.col-md-offset-1.col-lg-7.col-md-12.pull-right
                        table.common-table.playerLvlTable
                            thead
                                tr
                                    th
                                        input.margin-right-5(type="checkbox", ng-model="vm.playerBeingEdited.checkAllIsSmsGroup" ng-init="vm.isAllIsSmsGroupChecked()" ng-change="vm.toggleAllIsSmsGroup()")
                                        | {{"receive status/sms group" | translate}}
                                    th {{"sms group settings" | translate}}
                            tbody
                                tr(ng-repeat='(i, v) in vm.smsGroups | filter: {smsParentSmsId: -1}')
                                    td
                                        input.margin-right-5(type="checkbox" ng-model='vm.playerSmsSetting.smsGroup[v.smsId]' ng-init='vm.isAllSmsInGroupChecked(v)' ng-change='vm.smsGroupCheckChange(v);vm.isAllIsSmsGroupChecked()')
                                        span(ng-if='!vm.configTableEdit') {{v.smsName}}
                                    td
                                        div(ng-repeat='(ii, vv) in vm.smsGroups | filter: {smsParentSmsId: v.smsId}')
                                            span {{ vv.smsName | translate}}
                                            input.margin-right-5(type="checkbox", ng-model="vm.playerBeingEdited.smsSetting[vv.smsName]" ng-change='vm.isAllSmsInGroupChecked(v)')

                    //label.control-label(style="width:auto;") {{"RECEIVE_SMS" | translate}}
                    //    input.pull-left.margin-right-5(type="checkbox", ng-model="vm.playerBeingEdited.receiveSMS")
                    //label.control-label(style="width:auto;") {{"Select All" | translate}}
                    //    input.pull-left.margin-right-5(type="checkbox", ng-model="vm.playerBeingEdited.smsSettingSelectAll", ng-change="vm.smsSettingToggleSelectAll();", ng-disabled="!vm.playerBeingEdited.receiveSMS")
                    //label.control-label.margin-right-5(style="width:100%;", ng-repeat="(k, t) in vm.allMessageTypes", ng-if="t.name!='smsVerificationCode'") {{t.name | translate}}
                    //    input.pull-left.margin-right-5(type="checkbox", ng-model="vm.playerBeingEdited.smsSetting[t.name]", ng-change="vm.smsSettingSetSelectAll();", ng-disabled="!vm.playerBeingEdited.receiveSMS")



    ez-modal-footer
        #smsToPlayerFooter(ng-if="vm.smsModalTab === 'smsToPlayerPanel'")
            button.btn.common-button.btn-primary(ng-click="vm.sendSMSToPlayer()", ng-disabled="!vm.smsPlayer.hasPhone") {{"SEND" | translate}}
            button.btn.common-button.btn-warning(data-dismiss='modal') {{"CLOSE" | translate}}
        #smsLogFooter(ng-if="vm.smsModalTab === 'smsLogPanel'")
            button.common-button.btn.btn-primary(data-dismiss='modal') {{"CLOSE" | translate}}
        #smsSettingFooter(ng-if="vm.smsModalTab === 'smsSettingPanel'")
            ez-confirm-button(ng-click="vm.updateSMSSettings();") {{"UPDATE" | translate}}
            button.btn.common-button.btn-warning(data-dismiss='modal') {{"CANCEL" | translate}}
            //button.dialogEditPlayerSubmitBtn.btn.btn-primary.common-button(data-dismiss='dialog', ng-disabled='smsPlayerModal.$invalid || smsPlayerModal.$pristine', ng-click="vm.updateSMSSettings();") {{"UPDATE" | translate}}

#modalAddPlayerFeedback.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:60%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"FEEDBACK_PLAYER" | translate}}
            .modal-body
                .panel.panel-primary
                    ul.nav.nav-tabs.common-nav-tabs.popupHeaderMenu
                        .pull-left.padding-all-5
                        li.active(id = 'addFeedbackTab', ng-show="checkViewPermission('Player', 'Feedback','AddFeedback')")
                            a.common-tab(data-toggle="tab",ng-disabled="!vm.canEditPlayer()|| vm.selectedPlayersCount!= 1", ng-click='vm.feedbackModalTab = \'addFeedbackPanel\'')
                                .fa.fa-file-text.margin-right-5
                                text.span {{"ADD_FEEDBACK" | translate}}
                        li(id = 'feedbackHistoryTab',ng-show="checkViewPermission('Player', 'Feedback','FeedbackHistory')")
                            a.common-tab(data-toggle="tab",ng-disabled="!vm.canEditPlayer()|| vm.selectedPlayersCount!= 1", ng-click='vm.feedbackModalTab = \'feedbackHistoryPanel\';vm.prepareShowFeedbackRecord();')
                                .fa.fa-file-text.margin-right-5
                                text.span {{"Feedback History" | translate}}

                #addFeedbackPanel.panel-body(ng-if="vm.feedbackModalTab === 'addFeedbackPanel'")
                    form(name='form_feedback').well
                        .form-group
                            label.control-label {{'PLAYER_NAME' | translate}}
                            label.form-control {{vm.isOneSelectedPlayer().name}}
                        //.form-group
                            label.control-label {{'TEST_PLAYER_ID' | translate}}
                            input.form-control(ng-model='vm.playerFeedback.adminId')
                        .form-group
                            label.control-label {{'FEEDBACK_RESULTS' | translate}}
                            button.btn.btn-primary(style='margin-left:20px;', ng-click="vm.addPlayerFeedbackResultData={};vm.deletePlayerFeedbackResultData={};", ng-show="checkViewPermission('Player', 'Feedback','ModifyFeedbackResult')", data-toggle="modal", data-target="#modalAddPlayerFeedbackResult") {{"ADD" | translate}}
                            select.form-control(style='margin-top:5px;', ng-model='vm.playerFeedback.result', required)
                                option(ng-repeat='(i,v) in vm.allPlayerFeedbackResults', value='{{v.key}}') {{v.value}}
                        .form-group
                            label.control-label {{'FEEDBACK_TOPIC' | translate}}
                            button.btn.btn-primary(style='margin-left:20px;', ng-click="vm.addPlayerFeedbackTopicData={};vm.deletePlayerFeedbackTopicData={};", ng-show="checkViewPermission('Player', 'Feedback','ModifyFeedbackTopic')", data-toggle="modal", data-target="#modalAddPlayerFeedbackTopic") {{"ADD" | translate}}
                            select.form-control(style='margin-top:5px;', ng-model='vm.playerFeedback.topic', required)
                                option(ng-repeat='(i,v) in vm.playerFeedbackTopic', value='{{v.key}}') {{v.value}}
                        .form-group
                            label.control-label {{'FEEDBACK_CONTENT' | translate}}
                            .textareaDetail
                                textarea.form-control(rows='4', ng-model='vm.playerFeedback.content')

                #feedbackHistoryPanel.panel-body(ng-show="vm.feedbackModalTab === 'feedbackHistoryPanel'")
                    .well.searchDiv
                        .inlineBlk
                            label {{"Start date"|translate}}
                            .startTime
                        .inlineBlk
                            label {{"End date"|translate}}
                            .endTime
                        .inlineBlk
                            button.common-button.btn.btn-primary(ng-click='vm.updatePlayerFeedbackData("#modalAddPlayerFeedback","#playerFeedbackRecordTable")') {{'FILTER' | translate}}
                            i.fa.fa-spinner.fa-spin(ng-if='vm.playerFeedbackRecord.searching')
                    //text(ng-if='vm.playerFeedbackData.length==0') {{'NO_RECORD' | translate}}
                    table#playerFeedbackRecordTable.simple-table.collapse
                        thead
                            tr
                                th(style='min-width:90px;') {{'TIME' | translate}}
                                th {{'RESULT' | translate}}
                                th {{'CONTENT' | translate}}
                                th {{'adminName' | translate}}
                                th {{"FEEDBACK_TOPIC" | translate}}
                        tbody(ng-if='vm.playerFeedbackData.data.length>0')
                            tr(ng-repeat='(i,v) in vm.playerFeedbackData.data')
                                td(style='min-width:150px;') {{vm.dateReformat(v.createTime)}}
                                td {{v.result$}}
                                td(style='white-space: normal;word-wrap: break-word;max-width: 300px;') {{v.content}}
                                td {{v.adminId.adminName}}
                                td {{v.topic}}

            .modal-footer(ng-if="vm.feedbackModalTab === 'addFeedbackPanel'")
                button.common-button.margin-right-5.btn.btn-primary(data-dismiss='modal',ng-disabled='form_feedback.$invalid', ng-click="vm.updatePlayerFeedback();") {{"ADD" | translate}}
                button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CANCEL" | translate}}

#modalAddPlayerFeedbackResult.modal.fade(style='background: rgba(0,0,0,0.5);z-index:1052', tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:40%; top: 20vh;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"ADD_FEEDBACK_RESULT" | translate}}
            .modal-body
                div
                    label.control-label {{'ADD_FEEDBACK_RESULT' | translate}} &nbsp
                    .inlineBlk
                        input.form-control(style='width:120px;', ng-model='vm.addPlayerFeedbackResultData.key', placeholder="{{'FEEDBACK_RESULT_KEY' | translate}}")
                    .inlineBlk
                        input.form-control(style='width:120px;', ng-model='vm.addPlayerFeedbackResultData.value', placeholder="{{'FEEDBACK_RESULT' | translate}}")
                    button.btn.btn-primary(ng-click='vm.addPlayerFeedbackResult();') {{"ADD" | translate}}
                    span(style="color:green;",ng-show="vm.addPlayerFeedbackResultData.success === true") &nbsp{{vm.addPlayerFeedbackResultData.message | translate}}
                    span(style="color:red;",ng-show="vm.addPlayerFeedbackResultData.failure === true") &nbsp{{vm.addPlayerFeedbackResultData.message | translate}}

                div
                    label.control-label {{"DELETE_FEEDBACK_RESULT" | translate}} &nbsp
                    .inlineBlk
                        select.form-control(ng-model='vm.deletePlayerFeedbackResultData._id')
                            option(value='') {{'CHOOSE_FEEDBACK_RESULT' | translate}}
                            option(ng-repeat='(i,v) in vm.allPlayerFeedbackResults', value='{{v._id}}') {{v.value | translate}}
                    button.btn.btn-primary(ng-click='vm.deletePlayerFeedbackResult();') {{"DELETE" | translate}}
                    span(style="color:green;",ng-show="vm.deletePlayerFeedbackResultData.success === true") &nbsp{{vm.deletePlayerFeedbackResultData.message | translate}}
                    span(style="color:red;",ng-show="vm.deletePlayerFeedbackResultData.failure === true") &nbsp{{vm.deletePlayerFeedbackResultData.message | translate}}

#modalAddPlayerFeedbackTopic.modal.fade(style='background: rgba(0,0,0,0.5);z-index:1052', tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:40%; top: 20vh;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"ADD_FEEDBACK_TOPIC" | translate}}
            .modal-body
                div
                    label.control-label {{'ADD_FEEDBACK_TOPIC' | translate}} &nbsp
                    .inlineBlk
                        input.form-control(ng-model='vm.addPlayerFeedbackTopicData.value', placeholder="{{'FEEDBACK_TOPIC' | translate}}")
                    button.btn.btn-primary(ng-click='vm.addPlayerFeedbackTopic();') {{"ADD" | translate}}
                    span(style="color:green;",ng-show="vm.addPlayerFeedbackTopicData.success === true") &nbsp{{vm.addPlayerFeedbackTopicData.message | translate}}
                    span(style="color:red;",ng-show="vm.addPlayerFeedbackTopicData.failure === true") &nbsp{{vm.addPlayerFeedbackTopicData.message | translate}}

                div
                    label.control-label {{"DELETE_FEEDBACK_TOPIC" | translate}} &nbsp
                    .inlineBlk
                        select.form-control(ng-model='vm.deletePlayerFeedbackTopicData._id')
                            option(value='') {{'CHOOSE_FEEDBACK_TOPIC' | translate}}
                            option(ng-repeat='(i,v) in vm.playerFeedbackTopic', value='{{v._id}}') {{v.value | translate}}
                    button.btn.btn-primary(ng-click='vm.deletePlayerFeedbackTopic();') {{"DELETE" | translate}}
                    span(style="color:green;",ng-show="vm.deletePlayerFeedbackTopicData.success === true") &nbsp{{vm.deletePlayerFeedbackTopicData.message | translate}}
                    span(style="color:red;",ng-show="vm.deletePlayerFeedbackTopicData.failure === true") &nbsp{{vm.deletePlayerFeedbackTopicData.message | translate}}

#modalPlayerTopUp.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:50%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"TOP_UP" | translate}}
            .modal-body
                ul.nav.nav-tabs.common-nav-tabs
                    li(ng-class="vm.selectedTopupTab == 'manual' ? 'active' : null", ng-if="checkViewPermission('Player', 'TopUp', 'ApplyManualTopup')")
                        a.common-tab(data-toggle="tab", ng-click="vm.showTopupTab('manual');vm.initPlayerManualTopUp();") {{"MANUAL_TOPUP" | translate}}
                    li(ng-class="vm.selectedTopupTab == 'alipay' ? 'active' : null", ng-if="checkViewPermission('Player', 'TopUp', 'ApplyAlipayTopup')")
                        a.common-tab(data-toggle="tab", ng-click="vm.showTopupTab('alipay');vm.initPlayerAlipayTopUp();") {{"ALIPAY" | translate}}
                    li(ng-class="vm.selectedTopupTab == 'wechatpay' ? 'active' : null", ng-if="checkViewPermission('Player', 'TopUp', 'ApplyWechatPayTopup')")
                        a.common-tab(data-toggle="tab", ng-click="vm.showTopupTab('wechatpay');vm.initPlayerWechatPayTopUp();") {{"WECHATPAY" | translate}}
                    //li(ng-class="vm.selectedTopupTab == 'quickpay' ? 'active' : null", ng-if="checkViewPermission('Platform', 'Player', 'ApplyQuickpayTopup')")
                        a.common-tab(data-toggle="tab", ng-click="vm.showTopupTab('quickpay');vm.initPlayerQuickpayTopUp();") {{"WECHATPAY" | translate}}

                .row(ng-show="vm.selectedTopupTab == 'manual'")
                    .col-md-12(ng-show='vm.existingManualTopup===null || vm.existingManualTopup')
                        .well.margin-bottom-5(ng-if='vm.existingManualTopup===null')
                            label.blink {{"Searching existing manual topup request..." | translate}}
                        .well.margin-bottom-5(ng-if='vm.existingManualTopup')
                            .lineThrough(ng-if='vm.existingManualTopup.isCanceled')
                                button.btn.btn-primary.pull-right(disabled) {{'Cancel' | translate}}
                                label.margin-right-5 {{'validTime' | translate}} : {{vm.dateReformat(vm.existingManualTopup.data.validTime)}}
                                label.margin-right-5 {{'CREDIT' | translate}} : {{vm.existingManualTopup.data.amount}}
                            div(ng-if='!vm.existingManualTopup.isCanceled')
                                i.fa.fa-exclamation-triangle.text-danger.margin-right-5
                                label.margin-right-5 {{"Player has pending manual topup request already." | translate}}
                                label.margin-right-5 {{'validTime' | translate}} : {{vm.dateReformat(vm.existingManualTopup.data.validTime)}}
                                label.margin-right-5 {{'CREDIT' | translate}} : {{vm.existingManualTopup.data.amount}}
                                button.btn.btn-primary.pull-right(ng-click='vm.cancelPlayerManualTop()') {{'CANCEL' | translate}}
                    .col-md-12(ng-show='vm.existingManualTopup===false || vm.existingManualTopup.isCanceled')
                        form(name='form_manual_topup', style="border-radius:0 4px 4px 4px;box-shadow:none;").well
                            .form-group-col-md-6
                                label {{'CREDIT' | translate}}
                                //text.small.margin-left-5 ({{'minTopUpAmount' | translate}} {{vm.selectedPlatform.data.minTopUpAmount}} {{'minFirstTimeTopUpAmount1' | translate}})
                                input.form-control(type='number', min=0, ng-model='vm.playerManualTopUp.amount', required)
                            .form-group-col-md-6
                                label.control-label(style='width:100%') {{'Bankcard' | translate}}
                                select.form-control(ng-model='vm.chosenBankAcc',ng-change='vm.pickBankCardAcc(vm.chosenBankAcc)')
                                    option(value='') {{'any' | translate}}
                                    option(ng-repeat='(i,v) in vm.bankCards | orderBy : ["bankTypeId", "name"]', value='{{v}}') <b>{{vm.getBankCardTypeTextbyId(v.bankTypeId)}} - {{v.name}} ({{v.accountNumber}}) - {{(v.status == "DISABLED"?"Disable":v.status) | translate}}</b>
                            .form-group-col-md-6
                                label.control-label {{'DEPOSIT_METHOD' | translate}}
                                select.form-control(ng-model='vm.playerManualTopUp.depositMethod', ng-change='vm.selectedDepositMethod(vm.playerManualTopUp.depositMethod)')
                                    option(ng-repeat="(i,v) in vm.depositMethodList", value='{{v}}') {{i | translate}}
                            .form-group-col-md-6
                                label.control-label(ng-hide='!vm.playerManualTopUp.depositMethod || vm.playerManualTopUp.depositMethod === "2"') {{'ACCNAME' | translate}}
                                input.form-control(ng-model='vm.playerManualTopUp.realName',ng-hide='!vm.playerManualTopUp.depositMethod || vm.playerManualTopUp.depositMethod === "2"')
                            .form-group-col-md-6
                                label.control-label {{'PROVINCE_ID' | translate}}
                                select.form-control(ng-model='vm.playerManualTopUp.provinceId', ng-change='vm.getZoneList(vm.playerManualTopUp.provinceId)', ng-disabled='vm.freezeZoneSelection', ng-required='!vm.playerManualTopUp.depositMethod ||vm.playerManualTopUp.depositMethod === "1" || vm.playerManualTopUp.depositMethod === "2" || vm.playerManualTopUp.depositMethod === "3"')
                                    option(ng-repeat='(i,v) in vm.provinceList', value='{{v.id}}') {{v.name}}
                            .form-group-col-md-6
                                label.control-label {{'CITY_ID' | translate}}
                                select.form-control(ng-model='vm.playerManualTopUp.cityId', ng-change='vm.getZoneList(vm.playerManualTopUp.provinceId,vm.playerManualTopUp.cityId)', ng-disabled='vm.freezeZoneSelection', ng-required='!vm.playerManualTopUp.depositMethod ||vm.playerManualTopUp.depositMethod === "1" || vm.playerManualTopUp.depositMethod === "2" || vm.playerManualTopUp.depositMethod === "3"')
                                    option(ng-repeat='(i,v) in vm.cityList', value='{{v.id}}') {{v.name}}
                            .form-group-col-md-6
                                label.control-label {{'DISTRICT_ID' | translate}}
                                select.form-control(ng-model='vm.playerManualTopUp.districtId', ng-disabled='vm.freezeZoneSelection')
                                    option(ng-repeat='(i,v) in vm.districtList', value='{{v.id}}') {{v.name}}
                            .form-group-col-md-6
                                label {{'promoCode' | translate}}
                                input.form-control(type='text', ng-model='vm.playerManualTopUp.bonusCode')
                            .form-group-col-md-6
                                label {{'topUpReturnCode' | translate}}
                                input.form-control(type='text', ng-model='vm.playerManualTopUp.topUpReturnCode')
                            .form-group-col-md-6
                                label(ng-hide='vm.playerManualTopUp.depositMethod === "3"') {{'remark' | translate}}
                                label(ng-show='vm.playerManualTopUp.depositMethod === "3"') {{'counterRemark' | translate}}
                                input.form-control(type='text', ng-model='vm.playerManualTopUp.remark')
                            .form-group-col-md-6
                                label {{'DEPOSIT_TIME' | translate}}
                                .createTime

                .row(ng-show="vm.selectedTopupTab == 'alipay'")
                    .col-md-12(ng-show="vm.existingAlipayTopup===null||vm.existingAlipayTopup")
                        .well.margin-bottom-5(ng-if='vm.existingAlipayTopup===null')
                            label.blink {{"Searching existing Alipay topup request..." | translate}}
                        .well.margin-bottom-5(ng-if='vm.existingAlipayTopup')
                            .lineThrough(ng-if='vm.existingAlipayTopup.isCanceled')
                                button.btn.btn-primary.pull-right(disabled) {{'Cancel' | translate}}
                                label.margin-right-5 {{'validTime' | translate}} : {{vm.dateReformat(vm.existingAlipayTopup.data.validTime)}}
                                label.margin-right-5 {{'CREDIT' | translate}} : {{vm.existingAlipayTopup.data.amount}}
                            div(ng-if='!vm.existingAlipayTopup.isCanceled')
                                i.fa.fa-exclamation-triangle.text-danger.margin-right-5
                                label.margin-right-5 {{"Player has pending Alipay topup request already." | translate}}
                                label.margin-right-5 {{'validTime' | translate}} : {{vm.dateReformat(vm.existingAlipayTopup.data.validTime)}}
                                label.margin-right-5 {{'CREDIT' | translate}} : {{vm.existingAlipayTopup.data.amount}}
                                button.btn.btn-primary.pull-right(ng-click='vm.cancelPlayerAlipayTopUp()') {{'CANCEL' | translate}}
                    .col-md-12(ng-show='vm.existingAlipayTopup===false || vm.existingAlipayTopup.isCanceled')
                        form(name='form_alipay_topup', style="min-height:500px;border-radius:0 4px 4px 4px;box-shadow:none;").well
                            .form-group.col-md-12
                                .control-label
                                label {{'CREDIT' | translate}}
                                //text.small.margin-left-5 ({{'minTopUpAmount' | translate}} 1)
                                input.form-control(type='number', min=0, ng-model='vm.playerAlipayTopUp.amount', required)
                            .form-group.col-md-12
                                .form-group.col-md-6
                                    .control-label
                                    label {{'Alipay' | translate}}
                                    select.form-control#alipayOption(ng-model='vm.alipaysAcc',ng-change='vm.pickAlipayAcc(vm.alipaysAcc)', ng-options='a as a.displayText for a in vm.allAlipaysAcc | orderBy : "accountNumber"',  data-live-search="true", bsp )
                                        option(value='') {{'any' | translate}}
                                .form-group.col-md-6
                                    .control-label
                                    label {{'alipayName' | translate}}
                                    input.form-control(ng-model='vm.playerAlipayTopUp.alipayName', required)
                            .form-group.col-md-12
                                .form-group.col-md-6
                                    .control-label
                                .form-group.col-md-6
                                    .control-label
                                    label {{'alipayAccount' | translate}}
                                    input.form-control(ng-model='vm.playerAlipayTopUp.alipayAccount', required)
                            .form-group.col-md-12
                                .control-label
                                label {{'realName' | translate}}
                                input.form-control(ng-model='vm.playerAlipayTopUp.realName')
                            .form-group.col-md-12
                                .control-label
                                label {{'promoCode' | translate}}
                                input.form-control(ng-model='vm.playerAlipayTopUp.bonusCode')
                            .form-group.col-md-12
                                .control-label
                                label {{'topUpReturnCode' | translate}}
                                input.form-control(ng-model='vm.playerAlipayTopUp.topUpReturnCode')
                            .form-group.col-md-12
                                .control-label
                                label {{'REMARK' | translate}}
                                input.form-control(ng-model='vm.playerAlipayTopUp.remark')
                            .form-group.col-md-12
                                .inlineBlk
                                label {{'DEPOSIT_TIME' | translate}}
                                .createTime


                .row(ng-show="vm.selectedTopupTab == 'wechatpay'")
                    .col-md-12(ng-show='vm.existingWechatPayTopup===null || vm.existingWechatPayTopup')
                        .well.margin-bottom-5(ng-if='vm.existingWechatPayTopup===null')
                            label.blink {{"Searching existing WechatPay topup request..." | translate}}
                        .well.margin-bottom-5(ng-if='vm.existingWechatPayTopup')
                            .lineThrough(ng-if='vm.existingWechatPayTopup.isCanceled')
                                button.btn.btn-primary.pull-right(disabled) {{'Cancel' | translate}}
                                label.margin-right-5 {{'validTime' | translate}} : {{vm.dateReformat(vm.existingWechatPayTopup.data.validTime)}}
                                label.margin-right-5 {{'CREDIT' | translate}} : {{vm.existingWechatPayTopup.data.amount}}
                            div(ng-if='!vm.existingWechatPayTopup.isCanceled')
                                i.fa.fa-exclamation-triangle.text-danger.margin-right-5
                                label.margin-right-5 {{"Player has pending Alipay topup request already." | translate}}
                                label.margin-right-5 {{'validTime' | translate}} : {{vm.dateReformat(vm.existingWechatPayTopup.data.validTime)}}
                                label.margin-right-5 {{'CREDIT' | translate}} : {{vm.existingWechatPayTopup.data.amount}}
                                button.btn.btn-primary.pull-right(ng-click='vm.cancelPlayerWechatPayTopUp()') {{'CANCEL' | translate}}
                    .col-md-12(ng-show='vm.existingWechatPayTopup===false || vm.existingWechatPayTopup.isCanceled')
                        form(name='form_wechatPay_topup', style="min-height:500px;border-radius:0 4px 4px 4px;box-shadow:none;").well
                            .form-group.col-md-12
                                .control-label
                                label {{'CREDIT' | translate}}
                                //text.small.margin-left-5 ({{'minTopUpAmount' | translate}} {{vm.selectedPlatform.data.minTopUpAmount}})
                                input.form-control(type='number', min=0, ng-model='vm.playerWechatPayTopUp.amount', required)
                            .form-group.col-md-12
                                .form-group.col-md-6
                                    .control-label
                                    label {{'WechatPay' | translate}}
                                    select.form-control#wechatpayOption(ng-model='vm.wechatpaysAcc',ng-change='vm.pickWechatPayAcc(vm.wechatpaysAcc)', ng-options='a as a.displayText for a in vm.allWechatpaysAcc | orderBy : "nickName"',  data-live-search="true", bsp)
                                        option(value='') {{'any' | translate}}
                                .form-group.col-md-6
                                    .control-label
                                    label {{'wechatPayName' | translate}}
                                    input.form-control(ng-model='vm.playerWechatPayTopUp.wechatPayName', required)
                            .form-group.col-md-12
                                .form-group.col-md-6
                                    .control-label
                                    label {{'QRMode' | translate}}
                                    select.form-control(ng-model='vm.playerWechatPayTopUp.notUseQR')
                                        option(value="true") {{'CS_QR' | translate}}
                                        option(value="") {{'Settlement_QR' | translate}}
                                .form-group.col-md-6
                                    .control-label
                                    label {{'wechatPayAccount' | translate}}
                                    input.form-control(ng-model='vm.playerWechatPayTopUp.wechatPayAccount', required)
                            .form-group.col-md-12
                                .control-label
                                label {{'promoCode' | translate}}
                                input.form-control(ng-model='vm.playerWechatPayTopUp.bonusCode')
                            form-group.col-md-12
                                .control-label
                                label {{'topUpReturnCode' | translate}}
                                input.form-control(ng-model='vm.playerWechatPayTopUp.topUpReturnCode')
                            .form-group.col-md-12
                                .control-label
                                label {{'REMARK' | translate}}
                                input.form-control(ng-model='vm.playerWechatPayTopUp.remark' ng-required="!vm.playerWechatPayTopUp.notUseQR")
                            .form-group.col-md-12
                                .inlineBlk
                                label {{'DEPOSIT_TIME' | translate}}
                                .createTime
            .modal-footer
                //manual
                div(ng-show="vm.selectedTopupTab == 'manual'")
                    button.common-button.margin-right-5.btn.btn-success(disabled, ng-show='vm.playerManualTopUp.submitted') {{'Submitted' | translate}}
                    button.common-button.margin-right-5.btn.btn-success(ng-disabled='form_manual_topup.$invalid || form_manual_topup.$pristine || (vm.existingManualTopup && !vm.existingManualTopup.isCanceled)',ng-show='!vm.playerManualTopUp.submitted', ng-click='vm.applyPlayerManualTopUp()') {{'APPLY' | translate}}
                    button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CANCEL" | translate}}
                    table.simple-table.display(style="width: calc(100% - 210px);min-width:inherit", ng-show="vm.playerManualTopUp.submitted && vm.playerManualTopUp.responseData")
                        thead
                            tr
                                th {{"proposalId" | translate}}
                                th {{"bankCardNo" | translate}}
                                th {{"cardOwner" | translate}}
                                th {{"validTime" | translate}}
                        tbody
                            tr
                                td {{vm.playerManualTopUp.responseData.proposalId}}
                                td {{vm.playerManualTopUp.responseData.result.bankCardNo}}
                                td {{vm.playerManualTopUp.responseData.result.cardOwner}}
                                td {{vm.playerManualTopUp.responseData.result.validTime}}
                    label.inlineBlk.wordWrap(ng-if='vm.playerManualTopUp.submitted && vm.playerManualTopUp.responseMsg', style="width: calc(100% - 210px)") {{vm.playerManualTopUp.responseMsg}}
                //alipay
                div(ng-show="vm.selectedTopupTab == 'alipay'")
                    button.common-button.margin-right-5.btn.btn-success(disabled, ng-show='vm.playerAlipayTopUp.submitted') {{'Submitted' | translate}}
                    button.common-button.margin-right-5.btn.btn-success(ng-disabled='form_alipay_topup.$invalid || form_alipay_topup.$pristine || (vm.existingAlipayTopup && !vm.existingAlipayTopup.isCanceled)', ng-show='!vm.playerAlipayTopUp.submitted', ng-click='vm.applyPlayerAlipayTopUp()') {{'APPLY' | translate}}
                    button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CANCEL" | translate}}
                    label.inlineBlk.wordWrap(ng-if='vm.playerAlipayTopUp.submitted && vm.playerAlipayTopUp.responseMsg', style="width: calc(100% - 210px)") {{vm.playerAlipayTopUp.responseMsg}}
                //wechatpay
                div(ng-show="vm.selectedTopupTab == 'wechatpay'")
                    button.common-button.margin-right-5.btn.btn-success(disabled, ng-show='vm.playerWechatPayTopUp.submitted') {{'Submitted' | translate}}
                    button.common-button.margin-right-5.btn.btn-success(ng-disabled='form_wechatPay_topup.$invalid || form_wechatPay_topup.$pristine || (vm.existingWechatPayTopup && !vm.existingWechatPayTopup.isCanceled)', ng-show='!vm.playerWechatPayTopUp.submitted', ng-click='vm.applyPlayerWechatPayTopUp()') {{'APPLY' | translate}}
                    button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CANCEL" | translate}}
                    label.inlineBlk.wordWrap(ng-if='vm.playerWechatPayTopUp.submitted && vm.playerWechatPayTopUp.responseMsg', style="width: calc(100% - 210px)") {{vm.playerWechatPayTopUp.responseMsg}}

#modalPlayerBonus.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:50%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"APPLY_BONUS" | translate}} : {{vm.selectedSinglePlayer.name}}
            .modal-body
                form(name='form_player_bonus').well
                    .form-group-col-md-6
                        label.control-label {{'CREDIT' | translate}}
                        input.leftALignNumber.form-control(type='number' min="0" ng-model='vm.playerBonus.amount' required)
                    .form-group-col-md-6
                        label.control-label {{'HONOREE_DETAIL' | translate}}
                        input.form-control(ng-model='vm.playerBonus.honoreeDetail')
                    .form-group-col-md-6.margin-top-5
                        label.control-label.margin-right-5 {{'FORCE' | translate}}
                        input(type='checkbox', ng-model='vm.playerBonus.bForce')
            .modal-footer
                button.common-button.margin-right-5.btn.btn-success(ng-disabled='form_player_bonus.$invalid || form_player_bonus.$pristine', ng-show='vm.playerBonus.showSubmit', ng-click='vm.applyPlayerBonus()') {{'APPLY' | translate}}
                button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CLOSE" | translate}}
                label.inlineBlk.margin-right-5(ng-if='vm.playerBonus.resMsg') {{vm.playerBonus.resMsg}}
                i.fa.fa-spin.fa-spinner.margin-right-5(ng-if='!vm.playerBonus.showSubmit && !vm.playerBonus.resMsg')

#modalPlayerAddRewardTask.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:90%')
        .modal-content(style='max-height: 90vh')
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"REWARD_ACTION" | translate}} : {{vm.selectedSinglePlayer.name}}
            .modal-body(style='height: 80vh;overflow-y:auto;')
                ul.nav.nav-tabs.common-nav-tabs
                    li(ng-class="vm.selectedRewardSettingsTab == 'manual-reward' ? 'active' : null", ng-if="checkViewPermission('Player', 'Reward', 'AddRewardTask')", ng-disabled="!vm.canEditPlayer()|| vm.selectedPlayersCount!= 1")
                        a.common-tab(data-toggle="tab", ng-click="vm.showRewardSettingsTab('manual-reward');vm.initPlayerAddRewardTask();") {{"Add Reward Task" | translate}}
                    li(ng-class="vm.selectedRewardSettingsTab == 'system-reward' ? 'active' : null", ng-if="checkViewPermission('Player', 'Reward', 'applyReward')", ng-disabled="!vm.canEditPlayer()|| vm.selectedPlayersCount!= 1")
                        a.common-tab(data-toggle="tab", ng-click="vm.showRewardSettingsTab('system-reward');vm.initPlayerApplyReward();") {{"APPLY_REWARD" | translate}}
                    //li(ng-class="vm.selectedRewardSettingsTab == 'unlock-reward' ? 'active' : null", ng-if="checkViewPermission('Platform', 'Player', 'ManualUnlockRewardTask')", ng-disabled="!vm.canEditPlayer()|| vm.selectedPlayersCount!= 1")
                        a.common-tab(data-toggle="tab", ng-click="vm.showRewardSettingsTab('unlock-reward');vm.initManualUnlockRewardTask();") {{"Manual Unlock Reward Task" | translate}}
                    li(ng-class="vm.selectedRewardSettingsTab == 'reward-progress' ? 'active' : null", ng-if="checkViewPermission('Player', 'Reward', 'rewardTaskLog')", ng-disabled="!vm.canEditPlayer() || vm.selectedPlayersCount!= 1")
                        a.common-tab(data-toggle="tab", ng-click="vm.showRewardSettingsTab('reward-progress');vm.initManualUnlockRewardTask();vm.initRewardTaskLog();") {{"RewardTask Progress Log" | translate}}
                .panel.panel-primary(style="border-radius:0 !important;")
                    .panel-body
                        //.well(ng-show="vm.platformAction=='delete'")
                            p
                                #WarningIcon.fa.fa-exclamation-triangle
                                label.margin-right-5 {{"DELETE_PLATFORM_MESSAGE" | translate}}
                                strong.text-danger {{vm.selectedPlatform.text}} ?

                        //#modalPlayerAddRewardTask
                        form(name='form_add_reward_task', ng-show="vm.selectedRewardSettingsTab == 'manual-reward'").well
                            .form-group(ng-if='vm.selectedPlatform.data.useProviderGroup')
                                label.control-label {{'Provider group' | translate}}
                                select.form-control(ng-model='vm.playerAddRewardTask.providerGroup')
                                    option(value='') {{'LOCAL_CREDIT' | translate}}
                                    option(ng-repeat='(i,v) in vm.gameProviderGroup', value='{{v._id}}') {{ v.name }}
                            .form-group(ng-if='!vm.selectedPlatform.data.useProviderGroup')
                                label.control-label {{'REWARD_NAME' | translate}}
                                input.form-control(ng-model='vm.playerAddRewardTask.type', required)
                            .form-group(ng-if='!vm.selectedPlatform.data.useProviderGroup')
                                label.control-label {{'Provider' | translate}}
                                div
                                    .inlinkBlk(ng-repeat='(i,v) in vm.platformProviderList')
                                        label {{v.name}}
                                            input.pull-left.margin-right-5(type='checkbox', ng-model='vm.playerAddRewardTask.provider[v._id]')
                            .form-group
                                label.control-label {{'UNLOCKAMOUNT' | translate}}
                                input.leftALignNumber.form-control(type='number', min=0, ng-model='vm.playerAddRewardTask.requiredUnlockAmount', required)
                            .form-group
                                label.control-label {{'rewardAmount' | translate}}
                                input.leftALignNumber.form-control(type='number', min=0, ng-model='vm.playerAddRewardTask.currentAmount', required)
                            .form-group
                                label.control-label {{'useConsumption' | translate}}
                                input.leftALignNumber.form-control(type='checkbox', ng-model='vm.playerAddRewardTask.useConsumption')
                            .form-group
                                label.control-label {{'remark' | translate}}
                                textarea.form-control(type = "textarea", name = "Remarks", rows = '5', placeholder="{{'REMARKS' | translate}}", ng-model="vm.playerAddRewardTask.remark")

                        //#modalPlayerApplyReward
                        form(name='form_player_reward', ng-show="vm.selectedRewardSettingsTab == 'system-reward'").well
                            label.form-control(ng-show='!vm.showApplyRewardEvent') {{'There are no applicable reward need to be applied.' | translate}}
                            .form-group(ng-show='vm.showApplyRewardEvent')
                                label.control-label {{"REWARD_EVENT" | translate}}
                                select.form-control(ng-model='vm.playerApplyRewardPara.rewardObj',ng-change='vm.playerApplyRewardCodeChange(vm.playerApplyRewardPara.rewardObj)', required)
                                    option(value='{"name": "系统升级优惠", "code": "MANUAL_PLAYER_LEVEL_UP_REWARD"}') {{"系统升级优惠"}}
                                    option(ng-repeat='(i,v) in vm.allRewardEvent', ng-if='v.needApply || v.condition.applyType == 1', value='{{v}}') {{v.name}}({{v.code}})
                            .form-group(ng-if='vm.playerApplyRewardShow.TopupRecordSelect')
                                label.control-label {{'TOP_UP_LIST' | translate}}
                                .clearfix
                                label.control-label(ng-show='!vm.playerAllTopupRecords') {{'Loading' | translate}}
                                    i.fa.fa-spin.fa-spinner
                                select.form-control(ng-model='vm.playerApplyRewardPara.topUpRecordId', ng-if='vm.playerApplyRewardShow.selectTopupRecordsMulti===false', required)
                                    option(ng-repeat='(i,v) in vm.playerAllTopupRecords', value='{{v._id}}') {{vm.dateReformat(v.createTime)}} --- (${{v.amount}})
                                .form-control(ng-repeat='(i,v) in vm.playerAllTopupRecords', ng-if='vm.playerApplyRewardShow.selectTopupRecordsMulti')
                                    label {{vm.dateReformat(v.createTime)}} --- (${{v.amount}})
                                        input.margin-right-5.pull-left(type='checkbox', ng-model='vm.playerApplyRewardShow.topUpRecordIds[v._id]')
                            .form-group(ng-if='vm.playerApplyRewardShow.AmountInput')
                                label.control-label {{'CREDIT' | translate}}
                                input.form-control(type='number', ng-model='vm.playerApplyRewardPara.amount', required)
                            .form-group(ng-if='vm.playerApplyRewardShow.showReferral')
                                label.control-label {{'referralName' | translate}}
                                input.form-control(style='width:calc(100% - 20px);display: inline-block', ng-model='vm.playerApplyRewardPara.referralName', ng-change='vm.checkPlayerExist("name",vm.playerApplyRewardPara.referralName)', required)
                                i#playerValidFalse.margin-left-5.fa.fa-times.text-danger.hidden(style='width:10px;')
                                i#playerValidTrue.margin-left-5.fa.fa-check.text-success.hidden(style='width:10px;')
                            .form-group(ng-if='vm.playerApplyRewardShow.showConsumptionReturn')
                                label {{'rewardAmount' | translate}} : {{vm.playerApplyRewardShow.showRewardAmount}}
                                table#playerConsumptionReturnsTbl.noWrap.text-center.display(style='min-width:100%;width:100%')
                                    thead
                                        tr
                                            th {{'GAMETYPE' | translate}}
                                            th {{'RATIO' | translate}}
                                            th {{'totalNonXIMAAmt' | translate}}
                                            th {{'CONSUMPTIONAMOUNT' | translate}}
                                            th {{'RETURNAMOUNT' | translate}}
                                    tbody
                                        tr(ng-repeat='(i,v) in vm.playerApplyRewardShow.consumptionReturnData')
                                            td {{i}}
                                            td {{v.ratio}}
                                            td {{v.nonXIMAAmt}}
                                            td {{v.consumptionAmount}}
                                            td {{v.returnAmount}}
                            .well(ng-show='vm.playerApplyEventResult.success')
                                label.text-success {{'SUCCESS' | translate}}
                            .well(ng-show='vm.playerApplyEventResult && !vm.playerApplyEventResult.success')
                                label.text-danger {{'FAIL' | translate}}
                                label.form-control(ng-if='!vm.playerApplyRewardShow.showConsumptionReturn') {{(vm.playerApplyEventResult.error.message || vm.playerApplyEventResult.error.errorMessage) | translate}}
                                label.form-control(style='width:80%;display:inline-block;' ng-if='vm.playerApplyRewardShow.showConsumptionReturn') {{ vm.playerApplyEventResult.error.message | translate}}
                                button.btn.btn-primary.common-button(ng-if='vm.playerApplyRewardShow.showConsumptionReturn && (vm.playerApplyEventResult.error.message.indexOf("您的洗码额度不足") !== -1 || vm.playerApplyEventResult.error.errorMessage.indexOf("您的洗码额度不足") !== -1 )'
                                ng-click='vm.applyPlayerReward(true)' style='vertical-align: bottom;margin-left: 10px;') {{"force submit" | translate}}

                        //#modalManualUnlockRewardTask
                        table.simple-table(ng-if="vm.selectedRewardSettingsTab == 'unlock-reward'")
                            thead
                                tr
                                    th {{'UNLOCK' | translate}}
                                    th {{'TYPE' | translate}}
                                    th {{'CREATE_TIME' | translate}}
                                    th {{'STATUS' | translate}}
                                    th {{'initAMOUNT' | translate}}
                                    th {{'currentAMOUNT' | translate}}
                                    th {{'UNLOCKAMOUNT' | translate}}
                                    th {{'REWARD_EVENT' | translate}}
                                    th {{'provider' | translate}}
                            tbody(ng-repeat='rewardTask in vm.curRewardTask')
                                tr
                                    td
                                        input(type='checkbox', ng-model="rewardTask.checked", ng-change="vm.updateManualUnlockRewardTaskIndexList($index, rewardTask.checked)", ng-init="rewardTask.checked=true", ng-if="$index === 0")
                                        input(type='checkbox', ng-model="rewardTask.checked", ng-change="vm.updateManualUnlockRewardTaskIndexList($index, rewardTask.checked)")
                                    td {{rewardTask.type | translate}}
                                    td {{vm.dateReformat(rewardTask.createTime)}}
                                    td {{rewardTask.status | translate}}
                                    td {{rewardTask.initAmount || 0}}
                                    td {{rewardTask.currentAmount || 0}}
                                    td {{rewardTask.unlockedAmount || rewardTask.unlockedBonusAmount || 0}} / {{rewardTask.requiredUnlockAmount || rewardTask.requiredBonusAmount}}
                                    td {{rewardTask.eventId.name}} ({{rewardTask.eventId.code}})
                                    td
                                        text {{ rewardTask.targetEnable ? "Allow:" : "Disable:" | translate }}
                                        text(ng-repeat='(i,v) in rewardTask.targetProviders') &nbsp;{{v.name}}

                        //#modalRewardTaskLog
                        #rewardTaskLogQuery.well(ng-show="vm.selectedRewardSettingsTab == 'reward-progress'")
                            .inlineBlk
                                label {{"Start date" | translate}}
                                .startTime
                            .inlineBlk
                                label {{"End date" | translate}}
                                .endTime
                            .inlineBlk
                                label {{"UnlockStatus" | translate}}
                                select.form-control(ng-model='vm.unlockStatus', ng-init='vm.unlockStatus="all"')
                                    option(value='all') {{'any' | translate}}
                                    option(value='Started') {{'LOCK' | translate}}
                                    option(value='Done') {{'DONE' | translate}}
                            .inlineBlk
                                label {{"RewardProposalId" | translate}}
                                input.input-sm.form-control(ng-model="vm.rewardProposalId")
                            .inlineBlk
                                label {{"Deposit ProposalId" | translate}}
                                input.input-sm.form-control(ng-model="vm.topUpProposalId")
                            .inlineBlk(ng-show='vm.selectedPlatform.data.useProviderGroup')
                                label {{"providerGroup" | translate}}
                                select.form-control(ng-model='vm.selectedProviderGroupID', ng-init='vm.selectedProviderGroupID="all"')
                                    option(value='all') {{'any' | translate}}
                                    option(value='free') {{'Valid Progress' | translate}}
                                    option(ng-repeat='(i,v) in vm.gameProviderGroup', value='{{v._id}}') {{v.name}}

                            button.btn.btn-primary.common-button(ng-click='vm.unlockSearch()', style='vertical-align: bottom') {{"SEARCH" | translate}}

                            div
                                table.table.table-bordered(style='background-color:white;overflow-y:scroll')
                                    tr
                                        td
                                            div(style='display:inline-block;') {{"LOCAL_CREDIT" | translate }} :
                                            div(style='display:inline-block;padding-left:3px;') {{vm.currentFreeAmount}}
                                            // {{vm.freeAmount}}
                                        td(ng-repeat='(i,v) in vm.playerCreditDetails', ng-if="v.nickName!=''")
                                            div(style='display:inline-block;') {{v.nickName}} :
                                            div(style='display:inline-block;padding-left:3px;') {{v.validCredit || '0'}}

                            div(ng-show="vm.selectedPlatform.data.useProviderGroup")
                                table#rewardTaskGroupLogTbl.common-table.display(style='min-width:100%')
                                #rewardTaskGroupLogTblPage.height30

                            div
                                table#rewardTaskLogTbl.common-table.display(style='min-width:100%')
                                #rewardTaskLogTblPage.height30
                                label {{"Total" | translate}} {{vm.rewardTaskLog.totalCount}} {{"records" | translate}}

            .modal-footer
                //#modalPlayerAddRewardTask
                div(ng-show="vm.selectedRewardSettingsTab == 'manual-reward'")
                    button.common-button.margin-right-5.btn.btn-success(ng-disabled='form_add_reward_task.$invalid || form_add_reward_task.$pristine', ng-show='vm.playerAddRewardTask.showSubmit', ng-click="vm.submitAddPlayerRewardTask()") {{'ADD' | translate}}
                    button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CLOSE" | translate}}
                    label.inlineBlktext-danger.margin-right-5(ng-if='vm.playerAddRewardTask.resMsg') {{vm.playerAddRewardTask.resMsg}}
                    i.fa.fa-spin.fa-spinner.margin-right-5(ng-if='!vm.playerAddRewardTask.showSubmit && !vm.playerAddRewardTask.resMsg')
                //#modalPlayerApplyReward
                div(ng-show="vm.selectedRewardSettingsTab == 'system-reward'")
                    label.text-success(ng-show="vm.applyXM") {{'Apply Player Consumption Return InProgress' | translate}}
                    button.common-button.margin-right-5.btn.btn-success(ng-if="checkViewPermission('Player','Reward','applyReward') && !vm.playerApplyEventResult && vm.playerApplyRewardShow.manualSignConsecutiveLogin", ng-click='vm.applyPreviousConsecutiveLoginReward()') {{"PREVIOUS_CONSECUTIVE_LOGIN" | translate}}
                    button.common-button.margin-right-5.btn.btn-success(ng-if="checkViewPermission('Player','Reward','applyReward') && !vm.playerApplyEventResult",ng-disabled='form_player_reward.$invalid || form_player_reward.$pristine || !vm.playerApplyRewardPara.code || (vm.playerApplyRewardShow.showReferral && !vm.playerApplyRewardPara.referPlayer)', ng-click='vm.applyPlayerReward()') {{'APPLY' | translate}}
                    button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CLOSE" | translate}}
                //#modalManualUnlockRewardTask
                div(ng-show="vm.selectedRewardSettingsTab == 'reward-progress'")
                    //ng-disabled='!vm.rewardTaskGroupDetails',
                    button.common-button.margin-right-5.btn.btn-success(ng-show="vm.isUnlockTaskGroup",ng-disabled="!vm.dynRewardTaskGroupIndex || vm.dynRewardTaskGroupIndex.length==0", ng-click="vm.unlockTaskGroup()") {{'Unlock Reward' | translate}}
                    button.common-button.margin-right-5.btn.btn-success(ng-show="!vm.isUnlockTaskGroup", ng-disabled="vm.selectedRewards.length==0", ng-click="vm.submitManualUnlockRewardTask(vm.selectedRewards)") {{'Unlock Reward' | translate}}
                    button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CLOSE" | translate}}
                    label.inlineBlktext-danger.margin-right-5 {{vm.manualUnlockRewardTask.resMsg}}

#modalReapplyLostOrder.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:90%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"ALL_REAPPLY_ORDER" | translate}} : {{vm.selectedSinglePlayer.name}}
            .modal-body
                ul.nav.nav-tabs.common-nav-tabs
                    li(ng-class="vm.selectedReapplyLostOrderTab == 'credit' ? 'active' : null", ng-show="checkViewPermission('Player', 'Player', 'RepairTransaction')")
                        a.common-tab(data-toggle="tab", ng-click="vm.showReapplyLostOrderTab('credit');vm.prepareShowPlayerCredit();") {{"CREDIT_ORDER_LOST" | translate}}
                    li(ng-class="vm.selectedReapplyLostOrderTab == 'payment' ? 'active' : null", ng-show="checkViewPermission('Player', 'Player', 'RepairPayment')")
                        a.common-tab(data-toggle="tab", ng-click="vm.showReapplyLostOrderTab('payment');") {{"PAYMENT_ORDER_LOST" | translate}}
                .panel.panel-primary(style="border-radius:0 !important;")
                    .panel-body
                        .well(ng-show="vm.selectedReapplyLostOrderTab == 'credit'")
                            table.col-md-10.col-md-offset-1.paddingTbl.text-center.datatable-sm
                                tbody
                                    tr
                                        td {{'LOCKED_CREDIT' | translate}}
                                        td {{vm.selectedSinglePlayer.lockedCredit | number:2}} ({{'curData' | translate}})
                                        td --->
                                        td
                                            label.text-danger {{vm.creditChange.finalLockedAmount}} ({{'updateData' | translate}})
                                    tr
                                        td {{'VALID_CREDIT' | translate}}
                                        td {{vm.selectedSinglePlayer.validCredit | number:2}} ({{'curData' | translate}})
                                        td --->
                                        td
                                            label.text-danger {{vm.creditChange.finalValidAmount}} ({{'updateData' | translate}})
                            .row
                                .col-md-12
                                    label.control-label {{"PLEASE_CHOOSE" | translate}} {{'Link Transfer Record' | translate}} :
                                    label.inlineBlk.text-danger.margin-left-5 {{vm.linkedPlayerTransferId || 'NONE' | translate}}
                            .row
                                .col-md-12
                                    table#playerCreditAdjustTbl.display.common-table(style='min-width:100%;width:100%', ng-show='vm.playerTransferErrorLog!=null')
                                    i.fa.fa-refresh.fa-spin.fa-2x.text-danger(ng-show='vm.playerTransferErrorLog===null')
                            .row
                                .col-md-6
                                    label.control-label {{'REMARKS' | translate}}
                                .col-md-12.textareaDetail
                                    textarea.form-control(type = "textarea",name = "Remarks", rows = '5', placeholder="{{'REMARKS' | translate}}", ng-model="vm.creditChange.remark")

                        .well(ng-show="vm.selectedReapplyLostOrderTab == 'payment'")
                            label {{'Select a payment request' | translate}}
                            table#playerRepairPaymentTbl.noWrap.text-center.display(style='width:100%')
                                thead
                                    tr
                                        th {{'TIME' | translate}}
                                        th {{'proposalId' | translate}}
                                        th {{'requestId' | translate}}
                                        th {{'CREDIT' | translate}}
                                        th {{'Merchant' | translate}}
                                        th {{'merchantUseType' | translate}}
                                        th {{'topupType' | translate}}
                                        th {{'STATUS' | translate}}
                                tbody
                                    tr(ng-repeat='(i,v) in vm.allPendingRequest')
                                        td {{v.createTime$}}
                                        td {{v.proposalId}}
                                        td {{v.data.requestId}}
                                        td {{v.data.amount}}
                                        td {{v.data.merchantNo}}
                                        td {{v.merchantUseType$ | translate}}
                                        td {{v.topupType$ | translate}}
                                        td {{v.status | translate}}

            .modal-footer
                div(ng-show="vm.selectedReapplyLostOrderTab == 'credit'")
                    button.common-button.margin-right-5.btn.btn-primary(data-dismiss='modal',ng-disabled='!vm.linkedPlayerTransferId || (vm.linkedPlayerTransfer.status == 1)', ng-click="vm.repairTransaction();") {{"UPDATE" | translate}}
                    button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CANCEL" | translate}}
                div(ng-show="vm.selectedReapplyLostOrderTab == 'payment'")
                    button.common-button.margin-right-5.btn.btn-success(ng-if="vm.repairProposalId && vm.submitRepairePayementStep!=2" ng-click='vm.submitRepairPayment()')
                        | {{'Repair Payment' | translate}} {{vm.repairProposalId}}
                        i.fa.fa-spin.fa-refresh(ng-show='vm.submitRepairePayementStep==1')
                    button.common-button.margin-right-5.btn.btn-success(ng-if="checkViewPermission('Player','Player','RepairPayment')",ng-show='!vm.repairProposalId', disabled) {{'Repair Payment' | translate}}
                    button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal', ng-show='vm.submitRepairePayementStep!=2') {{"CANCEL" | translate}}
                    button.common-button.margin-right-5.btn.btn-success(data-dismiss='modal', ng-show='vm.submitRepairePayementStep==2') {{"Completed" | translate}} {{vm.repairProposalId}}

#modalPlayerCreditAdjustment.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:60%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{vm.creditChange.modaltitle | translate}} : {{vm.selectedSinglePlayer.name}} {{vm.selectedSinglePlayer.realName && '(' + vm.selectedSinglePlayer.realName + ')'}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        label {{'VALID_CREDIT' | translate}}
                        table.col-md-12.paddingTbl.text-center.datatable-sm
                            tbody
                                tr
                                    td.col-md-4.oblique {{'curData' | translate}}
                                    td.col-md-4.oblique {{'CHANGE_AMOUNT' | translate}}
                                    td.col-md-4.oblique {{'updateData' | translate}}
                                tr
                                    td {{vm.selectedSinglePlayer.validCredit | number:2}}
                                    td
                                        input.text-success(type='number', ng-model='vm.creditChange.updateAmount', ng-change="vm.creditChange.finalValidAmount=vm.selectedSinglePlayer.validCredit+vm.creditChange.updateAmount")
                                    td
                                        label.text-danger {{vm.creditChange.finalValidAmount || 0 | number:2}}
                                        .text-danger(ng-show='vm.creditChange.finalValidAmount<0') {{'Player credit cannot be less than 0' | translate}}
                        .row
                            .col-md-6
                                label.control-label {{'REMARKS' | translate}}
                            .col-md-12.textareaDetail
                                textarea.form-control(type = "textarea",name = "Remarks", rows = '5', placeholder="{{'REMARKS' | translate}}", ng-model="vm.creditChange.remark")
            .modal-footer
                button.common-button.margin-right-5.btn.btn-primary(data-dismiss='modal',ng-disabled='!vm.creditChange.updateAmount || vm.creditChange.finalValidAmount<0', ng-click="vm.updatePlayerCredit();") {{"UPDATE" | translate}}
                button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CANCEL" | translate}}

#modalPlayerRewardPointsAdjustment.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:60%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{'REWARD_POINTS_ADJUSTMENT' | translate}} : {{vm.selectedSinglePlayer.name}} {{vm.selectedSinglePlayer.realName && '(' + vm.selectedSinglePlayer.realName + ')'}}
            .modal-body(ng-show='!vm.selectedPlatform.data.usePointSystem')
                .well
                    label.text-danger {{'FAIL' | translate}}
                    label.form-control {{"Point system is disabled for this platform" | translate}}
            .modal-body(ng-show='vm.isOneSelectedPlayer().permission && !vm.isOneSelectedPlayer().permission.rewardPointsTask && vm.selectedPlatform.data.usePointSystem')
                .well
                    label.text-danger {{'FAIL' | translate}}
                    label.form-control {{"Player does not have reward points task permission" | translate}}
            .modal-body(ng-show='vm.isOneSelectedPlayer().permission && vm.isOneSelectedPlayer().permission.rewardPointsTask && vm.selectedPlatform.data.usePointSystem')
                ul.nav.nav-tabs.common-nav-tabs
                    li(ng-class="vm.selectedRewardPointsAdjustmentTab == 'change' ? 'active' : null", ng-show="checkViewPermission('Player', 'RewardPoints', 'RewardPointsChange')")
                        a.common-tab(data-toggle="tab", ng-click="vm.showRewardPointsAdjustmentTab('change');") {{"VALID_REWARD_POINTS" | translate}}
                    li(ng-class="vm.selectedRewardPointsAdjustmentTab == 'convert' ? 'active' : null", ng-show="checkViewPermission('Player', 'RewardPoints', 'RewardPointsConvert')")
                        a.common-tab(data-toggle="tab", ng-click="vm.showRewardPointsAdjustmentTab('convert');") {{"ADVANCE_REWARD_POINTS_CONVERT" | translate}}
                .panel.panel-primary(style="border-radius:0 !important;")
                    .panel-body
                        // rewardPointsChange
                        .well(ng-show="vm.selectedRewardPointsAdjustmentTab == 'change'")
                            table.col-md-12.paddingTbl.text-center.datatable-sm
                                tbody
                                    tr
                                        td.col-md-4.oblique {{'CURRENT_REWARD_POINTS' | translate}}
                                        td.col-md-4.oblique {{'CHANGE_REWARD_POINTS' | translate}}
                                        td.col-md-4.oblique {{'UPDATED_REWARD_POINTS' | translate}}
                                    tr
                                        td {{vm.isOneSelectedPlayer().rewardPointsObjId.points}}
                                        td
                                            input.text-success(type='number', ng-model='vm.rewardPointsChange.updateAmount', ng-change="vm.rewardPointsChange.finalValidAmount=vm.isOneSelectedPlayer().rewardPointsObjId.points + vm.rewardPointsChange.updateAmount")
                                        td
                                            label.text-danger {{vm.rewardPointsChange.finalValidAmount || 0 }}
                                            .text-danger(ng-show='vm.rewardPointsChange.finalValidAmount<0') {{'Player reward points cannot be less than 0' | translate}}
                            .row
                                .col-md-6
                                    label.control-label {{'REMARKS' | translate}}
                                .col-md-12.textareaDetail
                                    textarea.form-control(name="Remarks", rows='5', placeholder="{{'REMARKS' | translate}}", ng-model="vm.rewardPointsChange.remark")
                        // rewardPointsConvert
                        .well(ng-show="vm.selectedRewardPointsAdjustmentTab == 'convert'")
                            table.col-md-12.paddingTbl.text-center.datatable-sm
                                tbody
                                    tr
                                        td.col-md-3 {{'BEFORE_REWARD_POINTS_CONVERT' | translate}}
                                        td.col-md-3 {{'REWARD_POINTS_CONVERT_AMOUNT' | translate}}
                                            span(ng-if="vm.playerRewardPointsConversionRate") &nbsp;({{vm.playerRewardPointsConversionRate}} : 1)
                                        td.col-md-3.strong(style='color:red') {{'REWARD_POINTS_CONVERT_DAILY_LIMIT' | translate}}
                                        td.col-md-3 {{'AFTER_REWARD_POINTS_CONVERT' | translate}}
                                    tr
                                        td {{vm.isOneSelectedPlayer().rewardPointsObjId.points}}
                                        td
                                            input.text-success(type='number', ng-model='vm.rewardPointsConvert.updateAmount', ng-change="vm.rewardPointsConvert.finalValidAmount=vm.isOneSelectedPlayer().rewardPointsObjId.points - vm.rewardPointsConvert.updateAmount")
                                        td
                                            label(style='color:red;') {{vm.playerRewardPointsDailyConvertedPoints}}
                                            label(style='color:red;') &nbsp;
                                            label(style='color:red;') / {{vm.playerRewardPointsDailyLimit}}
                                            .text-danger(ng-show='vm.rewardPointsConvert.updateAmount + vm.playerRewardPointsDailyConvertedPoints > vm.playerRewardPointsDailyLimit') {{'Player convert amount reach daily reward points convert limit' | translate}}
                                        td
                                            label.text-danger {{vm.rewardPointsConvert.finalValidAmount || 0}}
                                            .text-danger(ng-show='vm.rewardPointsConvert.finalValidAmount<0') {{'Player reward points cannot be less than 0' | translate}}
                            .row
                                .col-md-6
                                    label.control-label {{'REMARKS' | translate}}
                                .col-md-12.textareaDetail
                                    textarea.form-control(name="Remarks", rows='5', placeholder="{{'REMARKS' | translate}}", ng-model="vm.rewardPointsConvert.remark")
            .modal-footer
                div(ng-show="vm.selectedRewardPointsAdjustmentTab == 'change'")
                    button.common-button.margin-right-5.btn.btn-primary(data-dismiss='modal',ng-disabled='!vm.rewardPointsChange.updateAmount || vm.rewardPointsChange.finalValidAmount<0', ng-click="vm.updatePlayerRewardPointsRecord();") {{"UPDATE" | translate}}
                    button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CANCEL" | translate}}
                div(ng-show="vm.selectedRewardPointsAdjustmentTab == 'convert'")
                    button.common-button.margin-right-5.btn.btn-primary(data-dismiss='modal',ng-disabled='!vm.rewardPointsConvert.updateAmount || vm.rewardPointsConvert.finalValidAmount<0 || vm.rewardPointsConvert.updateAmount + vm.playerRewardPointsDailyConvertedPoints > vm.playerRewardPointsDailyLimit', ng-click="vm.convertPlayerRewardPoints();") {{"UPDATE" | translate}}
                    button.common-button.margin-right-5.btn.btn-warning(data-dismiss='modal') {{"CANCEL" | translate}}

#modalBulkSendSMSToFailCallPlayer.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:40%; top: 20vh;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"Send SMS to Fail Callee List" | translate}}
            .modal-body
                .row
                    div.form-group.col-md-12
                        label.control-label {{"TO" | translate}}:&nbsp;
                        text {{"Fail Callee List" | translate}}

                        label.margin-left-5.control-label {{"Channel" | translate}}:&nbsp;
                        select(ng-model='vm.smsPlayer.channel', ng-options='a for a in channelList')

                        .pull-right(ng-if='vm.sendSMSResult.sent===true')
                            .fa.fa-check.text-success(ng-if='vm.sendSMSResult.result')
                                text {{'SEND' | translate}} {{'SUCCESS' | translate}}
                        .pull-right(ng-if='vm.sendSMSResult.sent === false')
                            .fa.fa-times.text-danger(ng-if='!vm.sendSMSResult.result')
                                text {{'SEND' | translate}} {{'FAIL' | translate}}
                        .pull-right(ng-if='vm.sendSMSResult.sent==="sending"')
                            text.text-danger.blink {{"Sending" | translate}}

                .row
                    div.form-group.col-md-12
                        label.control-label {{"SMS Templates" | translate}}
                            select.form-control(style='width:100%;resize:none',ng-change="vm.changeSMSTemplate()", ng-model='vm.smstpl' ng-options='a.type|translate for a in vm.smsTemplate')
                                option(value="")
                .row
                    div.form-group.col-md-12
                        label.control-label {{"CONTENT" | translate}}
                        textarea.form-control(ng-model="vm.smsPlayer.message", placeholder="...", rows="8", maxlength="100")
            .modal-footer
                button.btn.common-button.btn-primary(data-dismiss='modal' ng-click="vm.bulkSMSToFailCallee()", ng-disabled="!vm.smsPlayer.message || !vm.smsPlayer.channel") {{"SEND" | translate}}
                button.btn.common-button.btn-warning(data-dismiss='modal') {{"CLOSE" | translate}}

#modalRegisteredPlayerList.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false, aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:40%; top: 20vh;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"TS_REGISTERED_PLAYER_LIST" | translate}}
            .modal-body
                table#registeredPlayerListTbl.noWrap.text-center.display(style='width:100%')
                    thead
                        tr
                            th {{'PLAYER_NAME' | translate}}
                            th {{'REGISTERED_TIME' | translate}}
                            th {{'Create Account Cs Name' | translate}}
                    tbody
                        tr(ng-repeat='(i,v) in vm.registeredPlayerList')
                            td {{v.name}}
                            td {{v.registrationTime$}}
                            td {{v.csOfficer && v.csOfficer.adminName || ''}}
