.row
    .col-md-12
        button.btn.btn-primary.common-button(ng-click='vm.selectedAutoFeedbackTab="create";vm.initAutoFeedbackCreate();')
            span {{"Create Feedback Mission" | translate}}
        button.btn.btn-primary.common-button(ng-click='vm.selectedAutoFeedbackTab="overview";vm.initAutoFeedbackSearch();vm.initAutoFeedbackSearchDetail();')
            span {{"Feedback Mission Overview" | translate}}

    .col-md-12
        .panel.panel-primary(ng-if='vm.selectedAutoFeedbackTab === "create"')
            .panel-heading.panel-heading-sm
                label {{"Create Feedback Mission" | translate}}
            .panel-body.margin-all-5
                .full-width-input-block
                    label {{"PRODUCT_NAME"|translate}}
                    div.inline-block
                        select.form-control.inline-block(ng-model="vm.autoFeedbackMission.platformObjId" ng-options='v._id as v.name$ for v in vm.allPlatformData' ng-disabled="vm.autoFeedbackEditStatus" ng-change='vm.getCredibilityRemarksLocal();vm.getAllPlayerLevelsLocal();vm.getAllGameProvidersLocal();vm.loadDepartmentLocal();vm.loadPromoCodeTemplate(vm.autoFeedbackMission.platformObjId)')
                .full-width-input-block
                    label {{"Feedback Mission Name"|translate}}
                    div.inline-block
                        input.form-control(type="text" ng-model="vm.autoFeedbackMission.name" ng-disabled="vm.autoFeedbackEditStatus")
                .full-width-input-block
                    label {{"Feedback Mission Remarks"|translate}}
                    div.inline-block
                        input.form-control(type="text" ng-model="vm.autoFeedbackMission.remarks")
                .full-width-input-block
                    label.control-label {{'Feedback Mission Start Time' | translate}}
                    #autoFeedbackMissionStartTimePicker.datetimepicker.inline-block
                        input.input-append.playerDate(style='width:76%,border:0;', data-format="dd/MM/yyyy hh:mm:ss", type='text')
                        span.add-on
                            i.fa-calendar.fa(data-time-icon='fa fa-clock-o', data-date-icon='fa fa-calendar')
                .full-width-input-block
                    label.control-label {{'Feedback Mission End Time' | translate}}
                    #autoFeedbackMissionEndTimePicker.datetimepicker.inline-block
                        input.input-append.playerDate(style='width:76%,border:0;', data-format="dd/MM/yyyy hh:mm:ss", type='text')
                        span.add-on
                            i.fa-calendar.fa(data-time-icon='fa fa-clock-o', data-date-icon='fa fa-calendar')
                .full-width-input-block
                    label {{"Feedback Mission Default Status"|translate}}
                    select.form-control(style='max-width:300px', ng-model="vm.autoFeedbackMission.defaultStatus" ng-disabled="vm.autoFeedbackEditStatus")
                        option(value='Manual') {{'Manually Cancelled' | translate}}
                        option(value='Active') {{'ENABLE' | translate}}
                .full-width-input-block
                    label {{"USER_TYPE"|translate}}
                    select.form-control(style='max-width:300px', ng-model="vm.autoFeedbackMission.playerType")
                        option(value='Real Player (all)') {{'REAL_PLAYER_ALL' | translate}}
                        option(value='Real Player (Individual)') {{'REAL_PLAYER_INDIVIDUAL' | translate}}
                        option(value='Real Player (Under Partner)') {{'REAL_PLAYER_UNDER_PARTNER' | translate}}
                        option(value='Test Player') {{'TEST_PLAYER' | translate}}
                .full-width-input-block
                    label {{"Player Level" | translate}}
                    select.form-control(ng-model='vm.autoFeedbackMission.playerLevel')
                        option(value='all') {{'ALL' | translate}}
                        option(ng-repeat='(i,v) in vm.allPlayerLvl', value='{{v._id}}') {{v.name | translate}}
                .full-width-input-block
                    label.control-label {{'CREDIBILITY' | translate}}
                    div.inline-block
                        select.form-control#selectCredibilityRemarkFeedback(multiple="multiple", style='min-width:100px;height:34px;', ng-options='remark._id as remark.name | translate for remark in vm.credibilityRemarks', ng-model='vm.autoFeedbackMission.credibilityRemarks')
                        //select.spicker.form-control#selectCredibilityRemarkFeedback(multiple bsp data-actions-box='true' style='min-width:100px;height:34px;', ng-options='remark._id as remark.name | translate for remark in vm.filterCredibilityRemarks', ng-model='vm.autoFeedbackMission.credibilityRemarks')
                .full-width-input-block
                    label.control-label {{'CREDIBILITY_FILTER' | translate}}
                    div.inline-block
                        select.form-control#selectCredibilityRemarkFeedbackFilter(multiple="multiple", style='min-width:100px;height:34px;', ng-options='remark._id as remark.name | translate for remark in vm.filterCredibilityRemarks', ng-model='vm.autoFeedbackMission.filterCredibilityRemarks')
                .full-width-input-block
                    //上次登入（距今）
                    label {{"LAST_ACCESS_TILL_NOW"|translate}}
                    div.inline-block
                        select.form-control.inline-block(ng-model="vm.autoFeedbackMission.lastAccessOperator" style="width:105px;")
                            option(value='0-7') {{'0-7'}}{{'DAYS'|translate}}
                            option(value='8-14') {{'8-14'}}{{'DAYS'|translate}}
                            option(value='15-28') {{'15-28'}}{{'DAYS'|translate}}
                            option(value='29') {{'29'}}{{'DAYS_AND_ABOVE'|translate}}
                            option(value='range') {{'range'|translate}}
                        div(style="width:8px;display:inline-block")
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.lastAccessFormal" style="width:80px;display:inline-block" ng-show="vm.autoFeedbackMission.lastAccessOperator === 'range'")
                        div.text-center(style="width:15px;display:inline-block" ng-show="vm.autoFeedbackMission.lastAccessOperator === 'range'") -
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.lastAccessLatter" style="width:80px;display:inline-block" ng-show="vm.autoFeedbackMission.lastAccessOperator === 'range'")
                .full-width-input-block
                    //过滤回访（天）
                    label {{"FILTER_FEEDBACK_DAY"|translate}}
                    div.inline-block
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.filterFeedback" style="width:100px;display:inline-block")
                .full-width-input-block
                    label.control-label {{'FILTER_FEEDBACK_TOPIC' | translate}}
                    div.inline-block
                        select.form-control#selectFeedbackTopicFilter(multiple="multiple", style='min-width:100px;height:34px;', ng-options='topic.key as topic.value for topic in vm.playerFeedbackTopic', ng-model='vm.autoFeedbackMission.filterFeedbackTopic')
                .full-width-input-block
                    label {{"DEPOSIT_COUNT"|translate}}
                    div.inline-block
                        select.form-control(ng-model="vm.autoFeedbackMission.depositCountOperator" style="width:75px;display:inline-block")
                            option(value='>=') {{'>='}}
                            option(value='=') {{'='}}
                            option(value='<=') {{'<='}}
                            option(value='range') {{'range'|translate}}
                        div(style="width:8px;display:inline-block")
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.depositCountFormal" style="width:80px;display:inline-block")
                        div.text-center(style="width:15px;display:inline-block" ng-if="vm.autoFeedbackMission.depositCountOperator === 'range'") -
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.depositCountLatter" style="width:80px;display:inline-block" ng-if="vm.autoFeedbackMission.depositCountOperator === 'range'")
                .full-width-input-block
                    label {{"PLAYER_VALUE"|translate}}
                    div.inline-block
                        select.form-control(ng-model="vm.autoFeedbackMission.playerValueOperator" style="width:75px;display:inline-block")
                            option(value='>=') {{'>='}}
                            option(value='=') {{'='}}
                            option(value='<=') {{'<='}}
                            option(value='range') {{'range'|translate}}
                        div(style="width:8px;display:inline-block")
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.playerValueFormal" style="width:80px;display:inline-block")
                        div.text-center(style="width:15px;display:inline-block" ng-if="vm.autoFeedbackMission.playerValueOperator === 'range'") -
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.playerValueLatter" style="width:80px;display:inline-block" ng-if="vm.autoFeedbackMission.playerValueOperator === 'range'")
                .full-width-input-block
                    label {{"TOTAL_CONSUMPTION_TIMES"|translate}}
                    div.inline-block
                        select.form-control(ng-model="vm.autoFeedbackMission.consumptionTimesOperator" style="width:75px;display:inline-block")
                            option(value='>=') {{'>='}}
                            option(value='=') {{'='}}
                            option(value='<=') {{'<='}}
                            option(value='range') {{'range'|translate}}
                        div(style="width:8px;display:inline-block")
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.consumptionTimesFormal" style="width:80px;display:inline-block")
                        div.text-center(style="width:15px;display:inline-block" ng-if="vm.autoFeedbackMission.consumptionTimesOperator === 'range'") -
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.consumptionTimesLatter" style="width:80px;display:inline-block" ng-if="vm.autoFeedbackMission.consumptionTimesOperator === 'range'")
                .full-width-input-block
                    label {{"PLAYER_PROFIT_AMOUNT"|translate}}
                    div.inline-block
                        select.form-control(ng-model="vm.autoFeedbackMission.bonusAmountOperator" style="width:75px;display:inline-block")
                            option(value='>=') {{'>='}}
                            option(value='=') {{'='}}
                            option(value='<=') {{'<='}}
                            option(value='range') {{'range'|translate}}
                        div(style="width:8px;display:inline-block")
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.bonusAmountFormal" style="width:80px;display:inline-block")
                        div.text-center(style="width:15px;display:inline-block" ng-if="vm.autoFeedbackMission.bonusAmountOperator === 'range'") -
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.bonusAmountLatter" style="width:80px;display:inline-block" ng-if="vm.autoFeedbackMission.bonusAmountOperator === 'range'")
                .full-width-input-block
                    label {{"BonusTime"|translate}}
                    div.inline-block
                        select.form-control(ng-model="vm.autoFeedbackMission.withdrawTimesOperator" style="width:75px;display:inline-block")
                            option(value='>=') {{'>='}}
                            option(value='=') {{'='}}
                            option(value='<=') {{'<='}}
                            option(value='range') {{'range'|translate}}
                        div(style="width:8px;display:inline-block")
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.withdrawTimesFormal" style="width:80px;display:inline-block")
                        div.text-center(style="width:15px;display:inline-block" ng-if="vm.autoFeedbackMission.withdrawTimesOperator === 'range'") -
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.withdrawTimesLatter" style="width:80px;display:inline-block" ng-if="vm.autoFeedbackMission.withdrawTimesOperator === 'range'")
                .full-width-input-block
                    label {{"TOTAL_TOP_UP"|translate}}
                    div.inline-block
                        select.form-control(ng-model="vm.autoFeedbackMission.topUpSumOperator" style="width:75px;display:inline-block")
                            option(value='>=') {{'>='}}
                            option(value='=') {{'='}}
                            option(value='<=') {{'<='}}
                            option(value='range') {{'range'|translate}}
                        div(style="width:8px;display:inline-block")
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.topUpSumFormal" style="width:80px;display:inline-block")
                        div.text-center(style="width:15px;display:inline-block" ng-if="vm.autoFeedbackMission.topUpSumOperator === 'range'") -
                        input.form-control(type="number" ng-model="vm.autoFeedbackMission.topUpSumLatter" style="width:80px;display:inline-block" ng-if="vm.autoFeedbackMission.topUpSumOperator === 'range'")
                .full-width-input-block
                    label {{"GAME_LOBBY"|translate}}
                    div.inline-block
                        select.form-control#selectGameProvider(multiple="multiple", style='min-width:100px;height:34px;', ng-options='provider._id as provider.name for provider in vm.allCurrentPlatformGameProviders', ng-model='vm.autoFeedbackMission.gameProviderId')
                .full-width-input-block
                    label {{"SYSTEM_PLAYER" | translate}}
                    select.form-control(ng-model='vm.autoFeedbackMission.isNewSystem', style="width:100px;")
                        option(value='') {{'all'|translate}}
                        option(value='new') {{'NEW_SYSTEM'|translate}}
                        option(value='old') {{'OLD_SYSTEM'|translate}}
                .full-width-input-block
                    label.control-label {{'REGISTRATION_TIME_START' | translate}}
                    #autoFeedbackMissionRegisterStartTimePicker.datetimepicker.inline-block
                        input.input-append.playerDate(style='width:76%,border:0;', data-format="dd/MM/yyyy hh:mm:ss", type='text')
                        span.add-on
                            i.fa-calendar.fa(data-time-icon='fa fa-clock-o', data-date-icon='fa fa-calendar')
                .full-width-input-block
                    label.control-label {{'REGISTRATION_TIME_END' | translate}}
                    #autoFeedbackMissionRegisterEndTimePicker.datetimepicker.inline-block
                        input.input-append.playerDate(style='width:76%,border:0;', data-format="dd/MM/yyyy hh:mm:ss", type='text')
                        span.add-on
                            i.fa-calendar.fa(data-time-icon='fa fa-clock-o', data-date-icon='fa fa-calendar')
                .full-width-input-block
                    label {{"REGISTRATION_DEPARTMENT"|translate}}
                    div.inline-block
                        select.spicker.form-control(ng-model='vm.autoFeedbackMission.departments', bsp, multiple, data-actions-box='true' ng-change="vm.setQueryRole(vm.autoFeedbackMission)", ng-options='dp._id as dp.departmentName | translate for dp in vm.currentPlatformQueryDepartments')
                .full-width-input-block
                    label {{"REGISTRATION_ROLE"|translate}}
                    div.inline-block
                        select.spicker.form-control(ng-model='vm.autoFeedbackMission.roles', bsp, multiple, data-actions-box='true' ng-change="vm.setQueryAdmins(vm.autoFeedbackMission)", ng-options='dp._id as dp.roleName | translate for dp in vm.queryRoles')
                .full-width-input-block
                    label {{"REGISTRATION_ADMIN"|translate}}
                    div.inline-block
                        select.spicker.form-control(ng-model='vm.autoFeedbackMission.admins', bsp, multiple, data-actions-box='true', ng-options='dp._id as dp.adminName | translate for dp in vm.queryAdmins')
                .full-width-input-block
                    label {{"CALL_PERMISSION"|translate}}
                    div.inline-block
                        select.form-control(ng-model="vm.autoFeedbackMission.callPermission" style="width:105px;display:inline-block")
                            option(value='false') {{'DISABLE'|translate}}
                            option(value='true') {{'CALLABLE'|translate}}
                            option(value='all') {{'ALL'|translate}}
                .full-width-input-block
                    label {{"SMS_CHANNEL"|translate}}
                    div.inline-block
                        select.form-control(ng-model='vm.autoFeedbackMission.channel' style="width:105px;display:inline-block;")
                            option(ng-repeat='(i,v) in usableChannelList', value='{{v}}') {{v}}

                br
                table#autoFeedbackMissionTable.simple-table(style='min-width:100%')
                    thead
                        th {{"Schedule Mission (Total of 3)"|translate}}
                        th {{"Day Since Previous Mission (Continue mission if player is unresponsive)"|translate}}
                        th {{"Auto Promo Code Trigger Time"|translate}}
                        th {{"Auto Promo Code Template"|translate}}
                        th {{"Feedback Result Setting"|translate}}
                        th {{"Feedback Topic Setting"|translate}}
                        th {{"Feedback Content Setting"|translate}}
                    tbody
                        tr
                            td {{"FIRST_TIME"|translate}}
                            td {{"Execute upon fulfillment of criteria"|translate}}
                            td
                                div
                                    span(style="width:50%;display:inline-block;") {{"HOUR"|translate}}
                                    span(style="width:50%;display:inline-block;") {{"MINUTE"|translate}}
                                select.form-control(style="width:50%;display:inline-block;" ng-model='vm.autoFeedbackMission.schedule[0].triggerHour',
                                ng-options='+(i) as v for (i,v) in vm.autoFeedbackTriggerHours' required)
                                    //option(ng-options='v as i in vm.autoFeedbackTriggerHours', value='{{i}}') {{v}}
                                select.form-control(style="width:50%;display:inline-block;" ng-model='vm.autoFeedbackMission.schedule[0].triggerMinute',
                                ng-options='+(i) as v for (i,v) in vm.autoFeedbackTriggerMinutes' required)
                                    //option(ng-repeat='(i,v) in vm.autoFeedbackTriggerMinutes', value='{{i}}') {{v}}
                            td
                                select.form-control(ng-model='vm.autoFeedbackMission.schedule[0].template', required)
                                    option(ng-repeat='(i,v) in vm.promoCodeTemplateData', value='{{v._id}}') {{v.name}}
                            td
                                select.form-control(ng-model='vm.autoFeedbackMission.schedule[0].feedbackResult', required)
                                    option(ng-repeat='(i,v) in vm.allPlayerFeedbackResults', value='{{v.key}}') {{v.value}}
                            td
                                select.form-control(ng-model='vm.autoFeedbackMission.schedule[0].feedbackTopic', required)
                                    option(ng-repeat='(i,v) in vm.playerFeedbackTopic', value='{{v.key}}') {{v.value}}
                            td
                                textarea.form-control(ng-model='vm.autoFeedbackMission.schedule[0].content' style="resize:vertical")
                        tr
                            td {{"SECOND_TIME"|translate}}
                            td
                                input.form-control(type="number" ng-model='vm.autoFeedbackMission.schedule[1].dayAfterLastMission', required)
                            td
                                div
                                    span(style="width:50%;display:inline-block;") {{"HOUR"|translate}}
                                    span(style="width:50%;display:inline-block;") {{"MINUTE"|translate}}
                                select.form-control(style="width:50%;display:inline-block;" ng-model='vm.autoFeedbackMission.schedule[1].triggerHour',
                                ng-options='+(i) as v for (i,v) in vm.autoFeedbackTriggerHours' required)
                                select.form-control(style="width:50%;display:inline-block;" ng-model='vm.autoFeedbackMission.schedule[1].triggerMinute',
                                ng-options='+(i) as v for (i,v) in vm.autoFeedbackTriggerMinutes' required)
                            td
                                select.form-control(ng-model='vm.autoFeedbackMission.schedule[1].template', required)
                                    option(ng-repeat='(i,v) in vm.promoCodeTemplateData', value='{{v._id}}') {{v.name}}
                            td
                                select.form-control(ng-model='vm.autoFeedbackMission.schedule[1].feedbackResult', required)
                                    option(ng-repeat='(i,v) in vm.allPlayerFeedbackResults', value='{{v.key}}') {{v.value}}
                            td
                                select.form-control(ng-model='vm.autoFeedbackMission.schedule[1].feedbackTopic', required)
                                    option(ng-repeat='(i,v) in vm.playerFeedbackTopic', value='{{v.key}}') {{v.value}}
                            td
                                textarea.form-control(ng-model='vm.autoFeedbackMission.schedule[1].content' style="resize:vertical")
                        tr
                            td {{"THIRD_TIME"|translate}}
                            td
                                input.form-control(type="number" ng-model='vm.autoFeedbackMission.schedule[2].dayAfterLastMission', required)
                            td
                                div
                                    span(style="width:50%;display:inline-block;") {{"HOUR"|translate}}
                                    span(style="width:50%;display:inline-block;") {{"MINUTE"|translate}}
                                select.form-control(style="width:50%;display:inline-block;" ng-model='vm.autoFeedbackMission.schedule[2].triggerHour',
                                ng-options='+(i) as v for (i,v) in vm.autoFeedbackTriggerHours' required)
                                select.form-control(style="width:50%;display:inline-block;" ng-model='vm.autoFeedbackMission.schedule[2].triggerMinute',
                                ng-options='+(i) as v for (i,v) in vm.autoFeedbackTriggerMinutes' required)
                            td
                                select.form-control(ng-model='vm.autoFeedbackMission.schedule[2].template', required)
                                    option(ng-repeat='(i,v) in vm.promoCodeTemplateData', value='{{v._id}}') {{v.name}}
                            td
                                select.form-control(ng-model='vm.autoFeedbackMission.schedule[2].feedbackResult', required)
                                    option(ng-repeat='(i,v) in vm.allPlayerFeedbackResults', value='{{v.key}}') {{v.value}}
                            td
                                select.form-control(ng-model='vm.autoFeedbackMission.schedule[2].feedbackTopic', required)
                                    option(ng-repeat='(i,v) in vm.playerFeedbackTopic', value='{{v.key}}') {{v.value}}
                            td
                                textarea.form-control(ng-model='vm.autoFeedbackMission.schedule[2].content' style="resize:vertical")

                br
                .pull-right
                    .inlineBlk
                        button.btn.btn-warning(ng-if="checkViewPermission('Platform','AutoFeedback','Create')" ng-click='vm.autoFeedbackCancel()') {{"CANCEL" | translate}}
                    .inlineBlk
                        button.btn.btn-primary(ng-hide="vm.autoFeedbackEditStatus" ng-if="checkViewPermission('Platform','AutoFeedback','Create')" ng-click='vm.autoFeedbackCreateMission()') {{"Create Mission" | translate}}
                    .inlineBlk
                        button.btn.btn-primary(ng-show="vm.autoFeedbackEditStatus" ng-if="checkViewPermission('Platform','AutoFeedback','Update')" ng-click='vm.autoFeedbackUpdateMission()') {{"Update Mission" | translate}}
                    .inlineBlk
                        span.text-bold(ng-show="vm.autoFeedbackUpdateMissionStatus=='success'||vm.autoFeedbackCreateMissionStatus=='success'") {{"SUCCESS"|translate}}
                        span.text-bold(ng-show="vm.autoFeedbackUpdateMissionStatus=='fail'||vm.autoFeedbackCreateMissionStatus=='fail'") {{"FAIL"|translate}}
                    //.inlineBlk
                    //    button.btn.btn-primary(ng-if="checkViewPermission('Platform','Feedback','Read')",ng-click='vm.playerFeedbackSearchType="many";vm.submitPlayerFeedbackQuery(true, false);') {{"SEARCH_LIST" | translate}}
                    //.inlineBlk
                    //    button.btn.btn-primary(ng-if="checkViewPermission('Platform','Feedback','BulkCall') && vm.ctiData.hasOnGoingMission && !vm.showFinishCalloutMissionButton",ng-click='vm.toggleCallOutMissionStatus()') {{"Pause/Resume Mission" | translate}}
                    //.inlineBlk
                    //    button.btn.btn-primary(ng-if="checkViewPermission('Platform','Feedback','BulkCall') && vm.ctiData.hasOnGoingMission && !vm.showFinishCalloutMissionButton",ng-click='vm.stopCallOutMission()') {{"Stop Mission" | translate}}
                    //.inlineBlk
                    //    button.btn.btn-warning(ng-if="checkViewPermission('Platform','Feedback','BulkCall') && vm.ctiData.hasOnGoingMission && vm.showFinishCalloutMissionButton",ng-click='vm.initBulkAddPlayerFeedback()') {{"Failed Call Player Feedback" | translate}}
                    //.inlineBlk
                    //    button.btn.btn-warning(ng-if="checkViewPermission('Platform','Feedback','BulkCall') && vm.ctiData.hasOnGoingMission && vm.showFinishCalloutMissionButton",ng-click='vm.initBulkSMSToFailPlayers()') {{"Failed Call Player SMS" | translate}}
                    //.inlineBlk
                    //    button.btn.btn-success(ng-if="checkViewPermission('Platform','Feedback','BulkCall') && vm.ctiData.hasOnGoingMission && vm.showFinishCalloutMissionButton",ng-click='vm.endCallOutMission()') {{"Finish Mission" | translate}}
                    //span#platformFeedbackSpin.collapse
                    //    i.fa.fa-spinner.fa-spin
                    //span.margin-left-5

        .panel.panel-primary(ng-if='vm.selectedAutoFeedbackTab === "overview"')
            .panel-heading.panel-heading-sm
                label {{"Feedback Mission Overview List" | translate}}
            .panel-body
                .well
                    .search-filters-item
                        label {{"PRODUCT_NAME"|translate}}
                        select.form-control(ng-model="vm.autoFeedbackMissionSearch.platformObjId" ng-options='v._id as v.name$ for v in vm.allPlatformData' ng-change='vm.getAutoFeedbackLocal("overview");')
                    .search-filters-item
                        label {{"Feedback Mission Name"|translate}}
                        select.form-control(ng-model="vm.autoFeedbackMissionSearch.name")
                            option(value='') {{'any' | translate}}
                            option(ng-repeat='(i,v) in vm.autoFeedbackMissionsOverview', value='{{v.name}}') {{v.name}}
                    .search-filters-item
                        label.control-label {{'Mission Create Start Time' | translate}}
                        #autoFeedbackOverviewCreateTimeStartPicker.datetimepicker
                            input.input-append.playerDate(data-format="dd/MM/yyyy hh:mm:ss", type='text')
                            span.add-on
                                i.fa-calendar.fa(data-time-icon='fa fa-clock-o', data-date-icon='fa fa-calendar')
                    .search-filters-item
                        label.control-label {{'Mission Create End Time' | translate}}
                        #autoFeedbackOverviewCreateTimeEndPicker.datetimepicker
                            input.input-append.playerDate(data-format="dd/MM/yyyy hh:mm:ss", type='text')
                            span.add-on
                                i.fa-calendar.fa(data-time-icon='fa fa-clock-o', data-date-icon='fa fa-calendar')
                    .search-filters-item
                        label {{"Mission Status" | translate}}
                        select.form-control(ng-model='vm.autoFeedbackMissionSearch.status')
                            option(value='') {{'any' | translate}}
                            option(value='Unbegun') {{'Unbegun' | translate}}
                            option(value='Ongoing') {{'Ongoing' | translate}}
                            option(value='Ended') {{'Ended' | translate}}
                            option(value='Manually Cancelled') {{'Manually Cancelled' | translate}}
                    .text-right
                        button.btn.btn-primary(ng-if="checkViewPermission('Platform','AutoFeedback','Overview')" ng-click='vm.autoFeedbackSearchMission(true)') {{"SEARCH" | translate}}
                        span#autoFeedbackOverviewSpin.collapse
                            i.fa.fa-spinner.fa-spin

                br
                table#autoFeedbackOverviewTable.display.paymentGroup-btn
                #autoFeedbackOverviewTablePage

        .panel.panel-primary(ng-if='vm.selectedAutoFeedbackTab === "overview"')
            .panel-heading.panel-heading-sm
                label {{"Feedback Mission Daily Detail" | translate}}
            .panel-body
                .well
                    .search-filters-item
                        label {{"PRODUCT_NAME"|translate}}
                        select.form-control(ng-model="vm.autoFeedbackMissionSearchDetail.platformObjId" ng-options='v._id as v.name$ for v in vm.allPlatformData' ng-change='vm.getAutoFeedbackLocal("detail");')
                    .search-filters-item
                        label {{"Feedback Mission Name"|translate}}
                        select.form-control(ng-model="vm.autoFeedbackMissionSearchDetail.name")
                            option(ng-repeat='(i,v) in vm.autoFeedbackMissionsDetail', value='{{v.name}}') {{v.name}}
                    .search-filters-item
                        label.control-label {{'Start date' | translate}}
                        #autoFeedbackListStartTimePicker.datetimepicker
                            input.input-append.playerDate(data-format="dd/MM/yyyy hh:mm:ss", type='text')
                            span.add-on
                                i.fa-calendar.fa(data-time-icon='fa fa-clock-o', data-date-icon='fa fa-calendar')
                    .search-filters-item
                        label.control-label {{'End date' | translate}}
                        #autoFeedbackListEndTimePicker.datetimepicker
                            input.input-append.playerDate(data-format="dd/MM/yyyy hh:mm:ss", type='text')
                            span.add-on
                                i.fa-calendar.fa(data-time-icon='fa fa-clock-o', data-date-icon='fa fa-calendar')
                    .text-right
                        button.btn.btn-primary(ng-if="checkViewPermission('Platform','AutoFeedback','Overview')" ng-click='vm.autoFeedbackSearchMissionDetail()') {{"SEARCH" | translate}}
                        span#autoFeedbackDetailSpin.collapse
                            i.fa.fa-spinner.fa-spin

                br
                br
                table#autoFeedbackDetailTableFirst.simple-table.display.paymentGroup-btn(ng-show="vm.autoFeedbackSearchDetailResult[1]")
                    thead
                        th {{"date"|translate}}
                        th {{"First Schedule Send Count"|translate}}
                        th {{"First Schedule Claimed Count"|translate}}
                        th {{"Login Count Before Second Schedule"|translate}}
                        th {{"Top Up Count Before Second Schedule"|translate}}
                    tbody
                        tr(ng-repeat='(i,v) in vm.autoFeedbackSearchDetailResult[1]')
                            td {{i}}
                            td
                                a(ng-click="vm.autoFeedbackShowPromoCodeDetail(vm.autoFeedbackSearchDetailResult[1][i].data)" data-toggle="modal" data-target="#modalAutoFeedbackPromoCodeDetail") {{v.data.length}}
                            td {{v.acceptedCount}}
                            td
                                a(ng-click="vm.autoFeedbackShowLoginPlayers(vm.autoFeedbackSearchDetailResult[1][i].loginPlayers)" data-toggle="modal" data-target="#modalAutoFeedbackLoginPlayers") {{v.loginCount}}
                            td
                                a(ng-click="vm.autoFeedbackShowTopUpPlayers(vm.autoFeedbackSearchDetailResult[1][i].topUpPlayers)" data-toggle="modal" data-target="#modalAutoFeedbackTopUpPlayers") {{v.topUpCount}}
                br
                table#autoFeedbackDetailTableSecond.simple-table.display.paymentGroup-btn(ng-show="vm.autoFeedbackSearchDetailResult[2]")
                    thead
                        th {{"date"|translate}}
                        th {{"Second Schedule Send Count"|translate}}
                        th {{"Second Schedule Claimed Count"|translate}}
                        th {{"Login Count Before Third Schedule"|translate}}
                        th {{"Top Up Count Before Third Schedule"|translate}}
                    tbody
                        tr(ng-repeat='(i,v) in vm.autoFeedbackSearchDetailResult[2]')
                            td {{i}}
                            td
                                a(ng-click="vm.autoFeedbackShowPromoCodeDetail(vm.autoFeedbackSearchDetailResult[2][i].data)" data-toggle="modal" data-target="#modalAutoFeedbackPromoCodeDetail") {{v.data.length}}
                            td {{v.acceptedCount}}
                            td
                                a(ng-click="vm.autoFeedbackShowLoginPlayers(vm.autoFeedbackSearchDetailResult[2][i].loginPlayers)" data-toggle="modal" data-target="#modalAutoFeedbackLoginPlayers") {{v.loginCount}}
                            td
                                a(ng-click="vm.autoFeedbackShowTopUpPlayers(vm.autoFeedbackSearchDetailResult[2][i].topUpPlayers)" data-toggle="modal" data-target="#modalAutoFeedbackTopUpPlayers") {{v.topUpCount}}

                br
                table#autoFeedbackDetailTableThird.simple-table.display.paymentGroup-btn(ng-show="vm.autoFeedbackSearchDetailResult[3]")
                    thead
                        th {{"date"|translate}}
                        th {{"Third Schedule Send Count"|translate}}
                        th {{"Third Schedule Claimed Count"|translate}}
                        th {{"Login Count Till Next Three Days of Sending"|translate}}
                        th {{"Top Up Count Till Next Three Days of Sending"|translate}}
                    tbody
                        tr(ng-repeat='(i,v) in vm.autoFeedbackSearchDetailResult[3]')
                            td {{i}}
                            td
                                a(ng-click="vm.autoFeedbackShowPromoCodeDetail(vm.autoFeedbackSearchDetailResult[3][i].data)" data-toggle="modal" data-target="#modalAutoFeedbackPromoCodeDetail") {{v.data.length}}
                            td {{v.acceptedCount}}
                            td
                                a(ng-click="vm.autoFeedbackShowLoginPlayers(vm.autoFeedbackSearchDetailResult[3][i].loginPlayers)" data-toggle="modal" data-target="#modalAutoFeedbackLoginPlayers") {{v.loginCount}}
                            td
                                a(ng-click="vm.autoFeedbackShowTopUpPlayers(vm.autoFeedbackSearchDetailResult[3][i].topUpPlayers)" data-toggle="modal" data-target="#modalAutoFeedbackTopUpPlayers") {{v.topUpCount}}

#modalAutoFeedbackPromoCodeDetail.modal.fade(tabindex='-1', role='dialog', data-backdrop=false, keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button' data-dismiss='modal')
                h4.modal-title {{'AUTO_FEEDBACK' | translate}} {{'PROMO_CODE_HISTORY' | translate}}
            .modal-body
                table#autoFeedbackPromoCodeTable.common-table.display(style="min-width:100% ;overflow: scroll")
                    #autoFeedbackPromoCodeTablePage.col-md-12
                //table.simple-table
                    thead
                        tr
                            th {{'ACCOUNT' | translate}}
                            th {{'PROMO_CODE_TYPE' | translate}}
                            th {{'PROMO_REWARD_AMOUNT' | translate}}
                            th {{'PROMO_minTopUpAmount' | translate}}
                            th {{'PROMO_maxTopUpAmount' | translate}}
                            th {{'PROMO_CONSUMPTION' | translate}}
                            th {{'SHARE_WITH_XIMA' | translate}}
                            th {{'FORBID_WITHDRAW' | translate}}
                            th {{'PROMO_DUE_DATE' | translate}}
                            th {{'ALLOWED_PROVIDER' | translate}}
                            th {{'BANNER_TEXT' | translate}}
                            th {{'PROMO_CODE' | translate}}
                            th {{'CREATETIME' | translate}}
                            th {{'ACCEPTTIME' | translate}}
                            th {{'proposalId' | translate}}
                            th {{'CREATED_BY' | translate}}
                            th {{'REMARK' | translate}}
                    tbody(style='')
                        tr(ng-repeat='(i,v) in vm.autoFeedbackPromoCodeDetail')
                            td {{v.playerName}}
                            td {{v.name}}
                            td {{v.amount$}}
                            td {{v.minTopUpAmount}}
                            td {{v.maxRewardAmount}}
                            td {{v.requiredConsumption$}}
                            td {{v.isSharedWithXIMA$}}
                            td {{v.isForbidWithdraw$}}
                            td {{v.expirationTime$}}
                            td
                                span(ng-repeat='provider in v.allowedProviders$') {{provider}}
                            td {{v.bannerText}}
                            td {{v.code}}
                            td {{v.createTime$}}
                            td {{v.acceptedTime$}}
                            td {{v.proposalId}}
                            td {{v.adminName$}}
                            td {{v.remark}}



  #modalAutoFeedbackLoginPlayers.modal.fade(tabindex='-1', role='dialog', data-backdrop=false, keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
      .modal-dialog
          .modal-content
              .modal-header
                  a.fa.fa-times.close(type='button' data-dismiss='modal')
                  h4.modal-title {{'Login Count At Schedule' | translate}}
              .modal-body
                  table#autoFeedbackLoginPlayersTable.common-table.display(style="min-width:100% ;overflow: scroll")
                      #autoFeedbackLoginPlayersTablePage.col-md-12


  #modalAutoFeedbackTopUpPlayers.modal.fade(tabindex='-1', role='dialog', data-backdrop=false, keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
      .modal-dialog
          .modal-content
              .modal-header
                  a.fa.fa-times.close(type='button' data-dismiss='modal')
                  h4.modal-title {{'Top Up Count At Schedule' | translate}}
              .modal-body
                  table#autoFeedbackTopUpPlayersTable.common-table.display(style="min-width:100% ;overflow: scroll")
                      #autoFeedbackTopUpPlayersTablePage.col-md-12
