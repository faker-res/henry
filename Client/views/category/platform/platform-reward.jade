.text-center
    p(ng-if="!vm.curPlatformText")
        label.text-danger {{"NO_PLATFORM_MESSAGE" | translate}}
.col-sm-2(ng-if="vm.curPlatformText", style='padding-left:0')
    .panel.panel-primary
        .panel-heading.panel-heading-sm
            label {{"TRACKING_GROUP" | translate}}
        .panel-body
            ul.list-group.treeview(style='max-height:567px;overflow-y:auto')
                li.list-group-item(ng-repeat='(i,v) in vm.rewardEventGroup', ng-class='{active: v == vm.showRewardEventGroup}', ng-click='vm.showRewardEventGroup = v; vm.deselectRewardEvent()') {{v.name}}
            button.btn.btn-primary.common-button(style='text-align:center' ng-if='checkViewPermission("Platform", "Reward", "Add")' ng-click='vm.initNewRewardGroup()')
                text {{"ADD_NEW_GROUP"|translate}}
            button.btn.btn-success.common-button(style='text-align:center' ng-if='checkViewPermission("Platform", "Reward", "Update")' ng-click='vm.initEditRewardGroup()' ng-disabled='!vm.showRewardEventGroup || !vm.showRewardEventGroup._id')
                text {{"EDIT_TRACKING_GROUP"|translate}}
            button.btn.btn-danger.common-button(style='text-align:center' ng-if='checkViewPermission("Platform", "Reward", "Delete")' ng-click='vm.initDeleteRewardGroup()' ng-disabled='!vm.showRewardEventGroup || !vm.showRewardEventGroup._id')
                text {{"DELETE_REWARD_GROUP"|translate}}

    .panel.panel-primary(style="min-height:610px")
        .panel-heading.panel-heading-sm
            label {{"All Rewards" | translate}}
        .panel-body
            ul.list-group.treeview(style='height:567px;overflow-y:auto')
                li.list-group-item(ng-repeat='(i,v) in vm.allRewardEvent', ng-class='{active: v == vm.showReward}', ng-click='vm.rewardEventClicked(i,v)' ng-if='vm.displayRewardEventInGroup(v)') {{v.name}}
            button.btn.btn-primary.common-button(style='text-align:center' ng-if='checkViewPermission("Platform", "Reward", "Add")' ng-click='vm.initReward();vm.disableAllRewardInput(false)')
                text {{"Add Event"|translate}}
                img.img-create
.col-sm-10(ng-if="vm.curPlatformText", style='padding-left:0;padding-right:0;')
    .panel.panel-primary(ng-if='vm.showReward || vm.platformRewardShowEdit()')
        .panel-heading.panel-heading-sm
            label {{"REWARD"|translate}}
        .panel-body(ng-if='vm.platformRewardPageName')
            form(name='form_showReward', novalidate)
                .full-width-input-block
                    label {{"REWARD_TYPE" | translate}}
                    select.form-control(ng-model='vm.showRewardTypeId', ng-change='vm.platformRewardTypeChanged()', ng-disabled='vm.platformRewardShowEdit("rewardType")', required)
                        option(ng-repeat='(i,v) in vm.allRewardTypes', value='{{v._id}}') {{v.des|translate}}
                div(ng-if='vm.showRewardTypeData.isGrouped !== true')
                    .full-width-input-block
                        label {{"REWARD_NAME" | translate}}
                        input.form-control(type='text', ng-model='vm.showReward.name', ng-disabled='vm.platformRewardShowEdit()', required)
                    .full-width-input-block
                        label {{"REWARD_CODE" | translate}}
                        input.form-control(type='text', ng-model='vm.showReward.code', ng-disabled='vm.platformRewardShowEdit()', required)
                    .full-width-input-block(ng-if='vm.rewardAttrConst.canApply.indexOf(vm.showRewardTypeData.name)>-1')
                        label {{"REWARD_NEED_APPLY" | translate}}
                        input.form-control(type='checkbox', ng-model='vm.showReward.needApply', ng-change='vm.clearCanApplyFromClient()' ng-disabled='vm.platformRewardShowEdit()')
                    .full-width-input-block(ng-if='(vm.showRewardTypeData && vm.showRewardTypeData.name ==="PlayerConsumptionReturn") ||(vm.showReward.type && vm.showReward.type.name ==="PlayerConsumptionReturn")')
                        label {{"Display imageUrl" | translate}}

                        div(style="display:inline-block")
                            table(style="width:100%")
                                tbody
                                    tr(ng-repeat='val in vm.showReward.param.imageUrl track by $index')
                                        td
                                            input.form-control(type="text" ng-model="vm.showReward.param.imageUrl[$index]", ng-disabled='vm.platformRewardShowEdit()', style="width:100%;margin:0;margin-bottom:5px;padding-right:50px;")
                                        td(style="display:block;position:absolute;right:20px;padding:7px;")
                                            i.fa.fa-plus(ng-click='vm.rewardImageUrlNewRow(vm.showReward.param.imageUrl)' ng-show='!vm.platformRewardShowEdit()' style="margin-right:5px;")
                                            i.fa.fa-minus(ng-click='vm.rewardImageUrlDeleteRow($index, vm.showReward.param.imageUrl)' ng-show='!vm.platformRewardShowEdit()')
                    .full-width-input-block
                        label {{"REWARD_CLIENT_APPLY" | translate}}
                        input.form-control(type='checkbox', ng-model='vm.showReward.canApplyFromClient', ng-disabled='vm.platformRewardShowEdit() || !vm.showReward.needApply')
                    .full-width-input-block
                        label(ng-if='vm.showReward.canApplyFromClient') {{"Is show in production server" | translate}}
                        input.form-control(type='checkbox', ng-if='vm.showReward.canApplyFromClient', ng-model='vm.showReward.showInRealServer')
                    .full-width-input-block(ng-if='vm.rewardAttrConst.canSettle.indexOf(vm.showRewardTypeData.name)>-1')
                        label(ng-if='(vm.showRewardTypeData && vm.showRewardTypeData.name !=="PlayerConsumptionReturn") ||(vm.showReward.type && vm.showReward.type.name !=="PlayerConsumptionReturn")') {{"REWARD_NEED_SETTLEMENT" | translate}}
                        label(ng-if='(vm.showRewardTypeData && vm.showRewardTypeData.name ==="PlayerConsumptionReturn") ||(vm.showReward.type && vm.showReward.type.name ==="PlayerConsumptionReturn")') {{"below X amount auto execute reward" | translate}}

                        input.form-control(type='checkbox', ng-if='(vm.showRewardTypeData && vm.showRewardTypeData.name !=="PlayerConsumptionReturn") ||(vm.showReward.type && vm.showReward.type.name !=="PlayerConsumptionReturn")' ng-model='vm.showReward.needSettlement', ng-disabled='vm.platformRewardShowEdit()')
                        input.form-control(type='number', ng-if='(vm.showRewardTypeData && vm.showRewardTypeData.name ==="PlayerConsumptionReturn") ||(vm.showReward.type && vm.showReward.type.name ==="PlayerConsumptionReturn")' ng-model='vm.rewardParams.isIgnoreAudit', ng-disabled='vm.platformRewardShowEdit()')
                    .full-width-input-block(ng-if='vm.rewardAttrConst.canChangePeriod.indexOf(vm.showRewardTypeData.name)>-1')
                        label {{"Settlement Period" | translate}}
                        select.form-control(ng-model='vm.showReward.settlementPeriod', ng-disabled='vm.platformRewardShowEdit()', required)
                            option(ng-repeat='(i,v) in vm.allSettlePeriod', value='{{v}}') {{i | translate}}
                    .full-width-input-block
                        label {{"rewardValidStartTime" | translate}}
                        #rewardValidStartTime.inlineBlk(ng-show='!vm.platformRewardShowEdit()', style='margin-right:0')
                        label.form-control(ng-show='vm.platformRewardShowEdit()', disabled) {{vm.dateReformat(vm.showReward.validStartTime)}}
                    .full-width-input-block
                        label {{"rewardValidEndTime" | translate}}
                        #rewardValidEndTime.inlineBlk(ng-show='!vm.platformRewardShowEdit()', style='margin-right:0')
                        label.form-control(ng-show='vm.platformRewardShowEdit()', disabled) {{vm.dateReformat(vm.showReward.validEndTime)}}
                        span#rewardEndTimeValid.help-block(style='color: #b94a48')

                    //.full-width-input-block(ng-if="vm.platformRewardPageName!=='showReward'")
                    //    label(style='vertical-align: top;') {{"REWARD_PROVIDER" | translate}}
                    //    select.form-control(multiple size= '3' ng-model='vm.showReward.providers', ng-disabled='vm.platformRewardShowEdit()', required)
                    //        option(ng-repeat='(i,v) in vm.allGameProvider', value='{{v._id}}') {{v.name}}
                    //.full-width-input-block(ng-if="vm.platformRewardPageName=='showReward'")
                    //    label(style='vertical-align: top;') {{"REWARD_PROVIDER" | translate}}
                    //    select.form-control(multiple)
                    //        option(ng-repeat='(i,v) in vm.showReward.providers') {{vm.getProviderText(v)}}
                    .full-width-input-block
                        label {{"DESCRIPTION" | translate}}
                    .textareaDetail
                        textarea.form-control(type = "textarea", rows = '5', placeholder="{{'DESCRIPTION' | translate}}", ng-model="vm.showReward.description")
                    br

                    div(ng-if='vm.showRewardTypeData.name=="FullAttendance"')
                        include reward-event-type/FullAttendance
                    div(ng-if='vm.showRewardTypeData.name=="PlayerConsumptionReturn"')
                        include ./reward-event-type/PlayerConsumptionReturn
                    div(ng-if='vm.showRewardTypeData.name=="PlayerConsumptionIncentive"')
                        include ./reward-event-type/PlayerConsumptionIncentive
                    div(ng-if='vm.showRewardTypeData.name=="PlayerDoubleTopUpReward"')
                        include ./reward-event-type/PlayerDoubleTopUpReward
                    div(ng-if='vm.showRewardTypeData.name=="PlayerTopUpReturn"')
                        include ./reward-event-type/PlayerTopUpReturn
                    div(ng-if='vm.showRewardTypeData.name=="GameProviderReward"')
                        include ./reward-event-type/GameProviderReward
                    div(ng-if='vm.showRewardTypeData.name=="FirstTopUp"')
                        include ./reward-event-type/FirstTopUp
                    div(ng-if='vm.showRewardTypeData.name=="PlatformTransactionReward"')
                        include ./reward-event-type/PlatformTransactionReward
                    div(ng-if='vm.showRewardTypeData.name=="PartnerConsumptionReturn"')
                        include ./reward-event-type/PartnerConsumptionReturn
                    div(ng-if='vm.showRewardTypeData.name=="PartnerReferralReward"')
                        include ./reward-event-type/PartnerReferralReward
                    div(ng-if='vm.showRewardTypeData.name=="PartnerIncentiveReward"')
                        include ./reward-event-type/PartnerIncentiveReward
                    div(ng-if='vm.showRewardTypeData.name=="PartnerTopUpReturn"')
                        include ./reward-event-type/PartnerTopUpReturn
                    div(ng-if='vm.showRewardTypeData.name=="PlayerTopUpReward"')
                        include ./reward-event-type/PlayerTopUpReward
                    div(ng-if='vm.showRewardTypeData.name=="PlayerReferralReward"')
                        include ./reward-event-type/PlayerReferralReward
                    div(ng-if='vm.showRewardTypeData.name=="PlayerRegistrationReward"')
                        include ./reward-event-type/PlayerRegistrationReward
                    div(ng-if='vm.showRewardTypeData.name=="PlayerConsecutiveLoginReward"')
                        include ./reward-event-type/PlayerConsecutiveLoginReward
                    div(ng-if='vm.showRewardTypeData.name=="PlayerEasterEggReward"')
                        include ./reward-event-type/PlayerEasterEggReward
                    div(ng-if='vm.showRewardTypeData.name=="PlayerTopUpPromo"')
                        include ./reward-event-type/PlayerTopUpPromo
                    div(ng-if='vm.showRewardTypeData.name=="PlayerConsecutiveConsumptionReward"')
                        include ./reward-event-type/PlayerConsecutiveConsumptionReward
                    div(ng-if='vm.showRewardTypeData.name=="PlayerPacketRainReward"')
                        include ./reward-event-type/PlayerPacketRainReward
                    div(ng-if='vm.showRewardTypeData.name=="PlayerLimitedOfferReward"')
                        include ./reward-event-type/PlayerLimitedOffersReward

                div#rewardMainTasks(ng-if='vm.showRewardTypeData.isGrouped === true')
                    div(ng-repeat="(i,v) in vm.rewardMainCondition")
                        .full-width-input-block(ng-hide="vm.rewardDisabledParam.indexOf(vm.rewardMainCondition[i].name) > -1")
                            label.control-label {{v.des | translate}}
                                i.fa.fa-question-circle(style='margin-left: 0.3em; color: #A9A9A9' ng-attr-title='{{v.detail | translate}}' ng-if="v.detail")
                                i.fa.fa-question-circle(style='margin-left: 0.3em; color: #A9A9A9' ng-attr-title='{{v.detail1}}',ng-if="v.detail1")

                            div(ng-if="v.type == 'ImageURLText'" style="display:inline-block")
                                table(style="width:100%")
                                    tbody
                                        tr(ng-repeat='val in v.value track by $index')
                                            td
                                                input.form-control(type="text" ng-model="v.value[$index]" style="width:100%;margin:0;margin-bottom:5px;padding-right:50px;")
                                            td(style="display:block;position:absolute;right:20px;padding:7px;")
                                                i.fa.fa-plus(ng-click='vm.rewardImageUrlNewRow(v.value)' ng-show='vm.platformRewardIsEnabled' style="margin-right:5px;")
                                                i.fa.fa-minus(ng-click='vm.rewardImageUrlDeleteRow($index, v.value)' ng-show='vm.platformRewardIsEnabled')

                            input.form-control(ng-if="v.type == 'text' || v.type == 'checkbox' || v.type == 'number'" type="{{v.type}}" ng-change="vm.changeRewardParamLayout(vm.rewardMainCondition[i]);" ng-model="vm.rewardMainCondition[i].value" data-cond-name="{{v.name}}" ng-disabled="v.disabled")
                            select.form-control(ng-if="v.type == 'select'" ng-model="vm.rewardMainCondition[i].value" ng-options="i as v | translate for (i,v) in v.options" ng-change="vm.rewardSelectOnChange(vm.rewardMainCondition[i])" data-cond-name="{{v.name}}" ng-disabled="v.disabled")
                                option(value='' ng-if="vm.rewardMainCondition[i].name == 'providerGroup'") {{'LOCAL_CREDIT' | translate}}
                            div.dateTimePicker(id="rewardMainTaskDate-{{i}}" style="display: inline-block" ng-if="v.type == 'date'")
                            table(id="rewardPeriod-{{i}}" style="display: inline-table;width:50%" ng-if="v.type == 'datetimePeriod'")
                                thead
                                    tr
                                        th {{'from' | translate}}
                                        th {{'from' | translate}}
                                        th {{'-' | translate}}
                                        th {{'to' | translate}}
                                        th {{'to' | translate}}
                                        th
                                tbody
                                    tr(ng-repeat='(idx,val) in v.value')
                                        td
                                            select.form-control(ng-model='val.startDate' ng-options='i as v | translate for (i,v) in weekDay')
                                        td
                                            select.form-control(ng-model='val.startTime' ng-options='i as v for (i,v) in dayTime')
                                        td
                                            -
                                        td
                                            select.form-control(ng-model='val.endDate' ng-options='i as v | translate for (i,v) in weekDay')
                                        td
                                            select.form-control(ng-model='val.endTime' ng-options='i as v for (i,v) in dayTime')
                                        td
                                            i.fa.fa-minus(ng-click='vm.rewardPeriodDeleteRow(idx,v.value)' ng-show='vm.platformRewardIsEnabled && idx!=0')
                                            i.fa.fa-plus(ng-click='vm.rewardPeriodNewRow(v.value)' ng-show='vm.platformRewardIsEnabled && idx==0')
                            select.spicker.form-control(ng-if="v.type == 'multiSelect'"  ng-model="vm.rewardMainCondition[i].value" multiple, data-width='50%' data-actions-box='true' ng-change="vm.rewardSelectOnChange(vm.rewardMainCondition[i])")
                                option(style="display: inline-block" ng-repeat='(i,v) in v.options', value='{{i}}' ng-init='$last && vm.endLoadWeekDay()') {{v}}

                            div(style="width:50%;display: inline-block" ng-if="v.type == 'interval'")
                                div(ng-if="vm.rewardMainCondition[i].value != 4")
                                    select.form-control(style="width:50%;display: inline-block" ng-model="vm.rewardMainCondition[i].value" ng-options="i as v for (i,v) in v.options" ng-change="vm.rewardSelectOnChange(vm.rewardMainCondition[i])")
                                    input.form-control(style="width:50%;display: inline-block" type="number" ng-model="vm.rewardMainCondition[i].value1")
                                div(ng-if="vm.rewardMainCondition[i].value == 4")
                                    select.form-control(style="width:34%;display: inline-block" ng-model="vm.rewardMainCondition[i].value" ng-options="i as v for (i,v) in v.options" ng-change="vm.rewardSelectOnChange(vm.rewardMainCondition[i])")
                                    input.form-control(style="width:33%;display: inline-block" type="number" ng-model="vm.rewardMainCondition[i].value1")
                                    input.form-control(style="width:33%;display: inline-block" type="number" ng-model="vm.rewardMainCondition[i].value2")


                    .col-md-12.well.scrollRecord(ng-if="!vm.isNewDisplay")
                        div.full-width-input-block(ng-repeat="(i,v) in vm.rewardMainParam")
                            label {{v.des | translate}}
                                i.fa.fa-question-circle(style='margin-left: 0.3em; color: #A9A9A9' ng-attr-title='{{v.detail | translate}}' ng-if="v.detail")
                            input.form-control(ng-if="v.type == 'text' || v.type == 'checkbox' || v.type == 'number'" type="{{v.type}}" ng-change="vm.changeRewardParamLayout(i);" ng-model="vm.rewardMainParam[i].value")
                        span(ng-if='vm.showRewardTypeData.isGrouped === true && vm.showRewardTypeData && vm.showRewardTypeData.name === "PlayerConsumptionSlipRewardGroup"' style="color:red") {{'* required' | translate}}
                        table#rewardMainParamTable.simple-table.table-vertical-middle.limitOffersTB(ng-repeat="cond in vm.rewardMainParamTable track by $index" ng-cloak)
                            thead
                                th(ng-if="!vm.isPlayerLevelDiff && (vm.isMultiStepReward || (vm.showRewardTypeData.isGrouped === true && vm.showRewardTypeData && vm.showRewardTypeData.name ==='PlayerConsumptionSlipRewardGroup'))")
                                th(style="width:70px" ng-if="vm.isPlayerLevelDiff") {{vm.allPlayerLvl[$index].name}}
                                th(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"')
                                th(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"') {{ 'Source by provider' | translate}}
                                th(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"') {{ 'Bet Type(Single Selection)' | translate}}
                                th(ng-repeat="(i,v) in cond.header") {{v.des | translate}}
                            tbody(ng-repeat="entry in cond.value track by $index")
                                td(ng-if="vm.isPlayerLevelDiff || (vm.isMultiStepReward || (vm.showRewardTypeData.isGrouped === true && vm.showRewardTypeData && vm.showRewardTypeData.name ==='PlayerConsumptionSlipRewardGroup'))")
                                    i.fa.fa-plus(ng-click='cond.value.push({})' ng-if='!cond.header.hasOwnProperty("rewardPercentageAmount") && (vm.isMultiStepReward || (vm.showRewardTypeData.isGrouped === true && vm.showRewardTypeData && vm.showRewardTypeData.name ==="PlayerConsumptionSlipRewardGroup")) && !vm.platformRewardShowEdit()')
                                    i.fa.fa-plus(ng-click='cond.value.push({"rewardPercentageAmount":[{percentage: "", amount: ""}]})' ng-if='cond.header.hasOwnProperty("rewardPercentageAmount") && vm.isMultiStepReward && !vm.platformRewardShowEdit()')
                                    i.fa.fa-minus(ng-click='cond.value.splice($index, 1)' ng-if='(vm.isMultiStepReward || (vm.showRewardTypeData.isGrouped === true && vm.showRewardTypeData && vm.showRewardTypeData.name ==="PlayerConsumptionSlipRewardGroup")) && !vm.platformRewardShowEdit() && $index != 0' style='margin-left: 0.3em')
                                td(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"')
                                    i.fa.fa-plus(ng-click='cond.value.push({})' ng-if='!cond.header.hasOwnProperty("rewardPercentageAmount") && !vm.platformRewardShowEdit()')
                                    i.fa.fa-minus(ng-click='cond.value.splice($index, 1)' ng-if='!vm.platformRewardShowEdit() && $index != 0' style='margin-left: 0.3em')
                                td(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"')
                                    div(style='width:200px;')
                                        select.form-control(ng-model='entry.sourceProvider', data-container="body" data-width='100%', static-bsp, data-actions-box='true')
                                            option(ng-repeat='(i,v) in vm.baccaratRewardGameProviders', value='{{v._id}}') {{ v.name }}
                                td(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"')
                                    div(style='width:280px;')
                                        select.form-control(ng-model='entry.betType')
                                            option(ng-repeat='(i,v) in vm.betType', value='{{v}}') {{ v }}
                                td(ng-repeat="(i,v) in cond.header track by $index")
                                    input(ng-if="v.type == 'text' || v.type == 'checkbox' || v.type == 'number'" type="{{v.type}}" ng-model="entry[i]" ng-change="vm.changeRewardParamLayout({i:i, v:v, entry:entry});")
                                    select.form-control(ng-model='entry[i]', ng-if="v.type == 'select'", style='width:-webkit-fill-available;')
                                        option(ng-repeat='(ind,val) in this[v.options] track by $index', value='{{val}}') {{ val }}
                                    span.percentage(ng-if="v.type == 'percentage'")
                                        input(type='number', min='0', percentage, style="display: inline-block", ng-model='entry[i]')
                                    table(ng-if="v.type == 'PercentageAmount'")
                                        thead
                                            tr
                                                th {{'Percentage' | translate}}
                                                th {{'Amount' | translate}}
                                                th
                                        tbody
                                            tr(ng-repeat='(idx,val) in entry[i]')
                                                td
                                                    span.percentage
                                                        input(type='number', min='0', percentage, style="display: inline-block", ng-model='val.percentage')
                                                td
                                                    input(type="number" ng-model="val.amount" style="width: 150px;")
                                                td
                                                    i.fa.fa-minus(ng-click='vm.rewardPercentageAmountDeleteRow(idx,entry[i])' ng-show='vm.platformRewardIsEnabled && idx!=0')
                                                    i.fa.fa-plus(ng-click='vm.rewardPercentageAmountNewRow(entry[i])' ng-show='vm.platformRewardIsEnabled && idx==0')

                    .col-md-12.well.scrollRecord(ng-if="vm.isNewDisplay && !vm.isPlayerLevelDiff" style="height: 400px;")
                        div.full-width-input-block(ng-repeat="(i,v) in vm.rewardMainParam")
                            label {{v.des | translate}}
                                i.fa.fa-question-circle(style='margin-left: 0.3em; color: #A9A9A9' ng-attr-title='{{v.detail | translate}}' ng-if="v.detail")
                            input.form-control(ng-if="v.type == 'text' || v.type == 'checkbox' || v.type == 'number'" type="{{v.type}}" ng-change="vm.changeRewardParamLayout(i);" ng-model="vm.rewardMainParam[i].value")
                        table#rewardMainParamTable.simple-table.table-vertical-middle.limitOffersTB(ng-repeat="cond in vm.rewardMainParamTable track by $index" ng-cloak)
                            thead
                                th(ng-if="vm.isMultiStepReward")
                                th(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"')
                                th(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"') {{ 'Source by provider' | translate}}
                                th(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"') {{ 'Bet Type(Single Selection)' | translate}}
                                th(ng-repeat="(i,v) in cond.header") {{v.des | translate}}
                            tbody(ng-repeat="entry in cond.value track by $index" style="overflow: auto;")
                                td(ng-if="vm.isMultiStepReward")
                                    i.fa.fa-plus(ng-click='cond.value.push({})' ng-if='!cond.header.hasOwnProperty("rewardPercentageAmount") && vm.isMultiStepReward && !vm.platformRewardShowEdit()')
                                    i.fa.fa-plus(ng-click='cond.value.push({"rewardPercentageAmount":[{percentage: "", amount: ""}]})' ng-if='cond.header.hasOwnProperty("rewardPercentageAmount") && vm.isMultiStepReward && !vm.platformRewardShowEdit()')
                                    i.fa.fa-minus(ng-click='cond.value.splice($index, 1)' ng-if='vm.isMultiStepReward && !vm.platformRewardShowEdit() && $index != 0' style='margin-left: 0.3em')
                                td(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"')
                                    i.fa.fa-plus(ng-click='cond.value.push({})' ng-if='!cond.header.hasOwnProperty("rewardPercentageAmount") && !vm.platformRewardShowEdit()')
                                    i.fa.fa-minus(ng-click='cond.value.splice($index, 1)' ng-if='!vm.platformRewardShowEdit() && $index != 0' style='margin-left: 0.3em')
                                td(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"')
                                    div(style='width:200px;')
                                        select.form-control(ng-model='entry.sourceProvider', data-container="body" data-width='100%', static-bsp, data-actions-box='true')
                                            option(ng-repeat='(i,v) in vm.baccaratRewardGameProviders', value='{{v._id}}') {{ v.name }}
                                td(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"')
                                    div(style='width:280px;')
                                        select.form-control(ng-model='entry.betType')
                                            option(ng-repeat='(i,v) in vm.betType', value='{{v}}') {{ v }}
                                td(ng-repeat="(i,v) in cond.header track by $index")
                                    span(ng-if="i == 'loginDay'") {{entry[i]}}
                                    input(ng-if="i != 'loginDay' && (v.type == 'text' || v.type == 'checkbox' || v.type == 'number')" type="{{v.type}})" ng-model="entry[i]" ng-change="vm.changeRewardParamLayout({i:i, v:v, entry:entry});")
                                    span.percentage(ng-if="v.type == 'percentage'")
                                        input(type='number', min='0', percentage, style="display: inline-block", ng-model='entry[i]')
                                    select.form-control(ng-model='entry[i]', ng-if="v.type == 'select'", style='width:-webkit-fill-available;')
                                        option(ng-repeat='(ind,val) in this[v.options] track by $index', value='{{val}}') {{ val }}

                    #platformRewardSetting.col-md-12.well(ng-if="vm.isNewDisplay && vm.isPlayerLevelDiff")
                        div.full-width-input-block(ng-repeat="(i,v) in vm.rewardMainParam")
                            label {{v.des | translate}}
                                i.fa.fa-question-circle(style='margin-left: 0.3em; color: #A9A9A9' ng-attr-title='{{v.detail | translate}}' ng-if="v.detail")
                            input.form-control(ng-if="v.type == 'text' || v.type == 'checkbox' || v.type == 'number'" type="{{v.type}}" ng-change="vm.changeRewardParamLayout(i);" ng-model="vm.rewardMainParam[i].value")
                        ul.nav.nav-tabs.common-nav-tabs(ng-if="vm.isPlayerLevelDiff")
                            li(ng-repeat="(i,v) in vm.allPlayerLvl" ng-class="vm.selectedPlayerLvlTab == i ? 'active' : null")
                                a.common-tab(data-toggle="tab" ng-click="vm.selectedPlayerLvlTab = i; vm.checkPlatformRewardIsView(vm.platformRewardIsEnabled);") {{v.name}}

                        .panel.panel-primary(style="border-radius:0 !important; overflow: auto; height: 400px;")
                            .panel-body(style="min-width: fit-content;")
                                div(ng-repeat="cond in vm.rewardMainParamTable track by $index" ng-cloak)
                                    table#rewardMainParamTable.simple-table.table-vertical-middle.limitOffersTB(ng-if="vm.selectedPlayerLvlTab == $index")
                                        thead
                                            th(ng-if="vm.isMultiStepReward")
                                            th(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"')
                                            th(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"') {{ 'Source by provider' | translate}}
                                            th(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"') {{ 'Bet Type(Single Selection)' | translate}}
                                            th(ng-repeat="(i,v) in cond.header") {{v.des | translate}}
                                        tbody(ng-repeat="entry in cond.value")
                                            td(ng-if="vm.isMultiStepReward")
                                                i.fa.fa-plus(ng-click='cond.value.push({})' ng-if='!cond.header.hasOwnProperty("rewardPercentageAmount") && vm.isMultiStepReward && !vm.platformRewardShowEdit()')
                                                i.fa.fa-plus(ng-click='cond.value.push({"rewardPercentageAmount":[{percentage: "", amount: ""}]})' ng-if='cond.header.hasOwnProperty("rewardPercentageAmount") && vm.isMultiStepReward && !vm.platformRewardShowEdit()')
                                                i.fa.fa-minus(ng-click='cond.value.splice($index, 1)' ng-if='vm.isMultiStepReward && !vm.platformRewardShowEdit() && $index != 0' style='margin-left: 0.3em')
                                            td(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"')
                                                i.fa.fa-plus(ng-click='cond.value.push({})' ng-if='!cond.header.hasOwnProperty("rewardPercentageAmount") && !vm.platformRewardShowEdit()')
                                                i.fa.fa-minus(ng-click='cond.value.splice($index, 1)' ng-if='!vm.platformRewardShowEdit() && $index != 0' style='margin-left: 0.3em')
                                            td(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"')
                                                div(style='width:200px;')
                                                    select.form-control(ng-model='entry.sourceProvider', data-container="body" data-width='100%', static-bsp, data-actions-box='true')
                                                        option(ng-repeat='(i,v) in vm.baccaratRewardGameProviders', value='{{v._id}}') {{ v.name }}
                                            td(ng-if='vm.showRewardTypeData && vm.showRewardTypeData.name ==="BaccaratRewardGroup"')
                                                div(style='width:280px;')
                                                    select.form-control(ng-model='entry.betType')
                                                        option(ng-repeat='(i,v) in vm.betType', value='{{v}}') {{ v }}
                                            td(ng-repeat="(i,v) in cond.header")
                                                span(ng-if="i == 'loginDay'") {{entry[i]}}
                                                input(ng-if="i != 'loginDay' && (v.type == 'text' || v.type == 'checkbox' || v.type == 'number')" type="{{v.type}}" ng-model="entry[i]" ng-change="vm.changeRewardParamLayout({i:i, v:v, entry:entry});")
                                                span.percentage(ng-if="v.type == 'percentage'")
                                                    input(type='number', min='0', percentage, style="display: inline-block", ng-model='entry[i]')
                                                select.form-control(ng-model='entry[i]', ng-if="v.type == 'select'", style='width:-webkit-fill-available;')
                                                    option(ng-repeat='(ind,val) in this[v.options] track by $index', value='{{val}}') {{ val }}


                    .col-md-12.well.scrollRecord( style="height: 400px;", ng-if="vm.showRewardTypeData.name=='PlayerRandomRewardGroup'")
                        .inlineBlk.pull-right
                            button.btn.btn-primary.common-button(ng-click='vm.getRandomRewardDetail()') {{'DETAILS' | translate }}

                        //.panel.panel-primary(style="border-radius:0 !important; overflow: auto; height: 400px;")
                            .panel-body(style="min-width: fit-content;")
                        div#playerRandomReward
                            table.simple-table.table-vertical-middle
                                thead
                                    tr
                                        th {{'ACTION_BUTTON' | translate}}
                                        th {{'Assign Player Acc' | translate}}
                                        th {{'Set Reward Item' | translate}}
                                tbody
                                    tr(ng-repeat="v in vm.activeRandomRewards")
                                        td
                                            div
                                        td
                                            input(type='string', ng-model='v.playerId.name')
                                        td
                                            //input(type='string', ng-model='v.randomReward')
                                            select.form-control(ng-model='v.randomReward')
                                                option(ng-repeat='(i,v) in vm.betType', value='{{v}}') {{ v }}



                                    tr(ng-repeat="(i,v) in vm.assignRandomRewards")
                                        td
                                            i.fa.fa-plus(ng-click='vm.addRandowRewardItem()')
                                        td
                                            input(type='string', ng-model='v.playerName')
                                        td
                                            select.form-control(ng-model='v.rewardName')
                                                option(ng-repeat='(i,v) in vm.betType', value='{{v}}') {{ v }}

                .col-md-12.well.scrollRecord(ng-if='vm.showRewardTypeData.isGrouped === true || (vm.showRewardTypeData && vm.showRewardTypeData.name ==="PlayerConsumptionReturn") ||(vm.showReward.type && vm.showReward.type.name ==="PlayerConsumptionReturn")')
                    label * {{'RICH_TEXT_EDITOR' | translate}}:&nbsp
                    a(href='http://baowang.webcontent.cloud/ume/' target='_blank')
                        | http://baowang.webcontent.cloud/ume/
                    table.simple-table
                        thead
                            tr
                                th(style="width: 80px;") {{"Add/Delete" | translate}}
                                th(style="width: 150px;") {{"Display ID" | translate}}
                                th(style="width: 250px;") {{"Display Title" | translate}}
                                th(style="width: 250px;") {{"Display Content" | translate}}
                                th {{"BTN_OR_IMAGE" | translate}}
                        tbody
                            tr(ng-repeat='(idx, val) in vm.showReward.display')
                                td
                                    div(style="width: 80px;")
                                        label(ng-show='!vm.platformRewardShowEdit()') (
                                        i.fa.fa-plus(ng-click='vm.rewardDisplayNewRow(vm.showReward.display)', ng-show='!vm.platformRewardShowEdit()')
                                        label(ng-show='!vm.platformRewardShowEdit()') )
                                        label(ng-show='!vm.platformRewardShowEdit()') (
                                        i.fa.fa-minus(ng-click='vm.rewardDisplayDeleteRow(idx, vm.showReward.display)', ng-show='!vm.platformRewardShowEdit()')
                                        label(ng-show='!vm.platformRewardShowEdit()') )
                                td
                                    input(type="text" ng-model="val.displayId" ng-disabled='vm.platformRewardShowEdit()' style="width: 150px;")
                                td
                                    input(type="text" ng-model="val.displayTitle" ng-disabled='vm.platformRewardShowEdit()' style="width: 250px")
                                td
                                    input(type="text" ng-model="val.displayTextContent" ng-disabled='vm.platformRewardShowEdit()' style="width: 250px")
                                td
                                    table
                                        tbody
                                            tr
                                                td(ng-if="val.btnOrImageList.length===0" style="border: none;")
                                                    div(style="width: auto;")
                                                        label(ng-show='!vm.platformRewardShowEdit()') (
                                                        i.fa.fa-plus(ng-click="vm.showBtnOrImageTable(idx,vm.showReward.display)", ng-show='!vm.platformRewardShowEdit()')
                                                        label(ng-show='!vm.platformRewardShowEdit()') )
                                                td(ng-repeat="v in val.btnOrImageList track by $index" style="border: none;")
                                                    table(style="font-size: 10px;width:100%;")
                                                        tbody
                                                            tr
                                                                td
                                                                    label(style="width: 20px;") {{'NAME' | translate}}
                                                                td
                                                                    input(type='text' , ng-model='v.btnName', ng-disabled='vm.platformRewardShowEdit()', style="margin-bottom: 2px;")
                                                                td(rowspan=3)
                                                                    div(style='width: 30px')
                                                                        label(ng-show='!vm.platformRewardShowEdit()') (
                                                                        i.fa.fa-minus(ng-click='vm.rewardImageOrButtonUrlDeleteRow($index, val.btnOrImageList)', ng-show='!vm.platformRewardShowEdit()')
                                                                        label(ng-show='!vm.platformRewardShowEdit()') )
                                                                        label(ng-show='!vm.platformRewardShowEdit()') (
                                                                        i.fa.fa-plus(ng-click='vm.rewardImageOrButtonUrlNewRow(val.btnOrImageList)', ng-show='!vm.platformRewardShowEdit()')
                                                                        label(ng-show='!vm.platformRewardShowEdit()') )
                                                            tr
                                                                td
                                                                    label {{'SOURCE' | translate}}
                                                                td
                                                                    input(type='text' , ng-model='v.btnSourceFrom', ng-disabled='vm.platformRewardShowEdit()', style="margin-bottom: 2px;")
                                                            tr
                                                                td
                                                                    label {{'ButtonOrImageHyperlink' | translate}}
                                                                td
                                                                    input(type='text' , ng-model='v.btnLinksTo', ng-disabled='vm.platformRewardShowEdit()', style="margin-bottom: 2px;")

            .pull-right
                //- Intuitive UI: The Delete Event button should probably be on the left, next to Add Event.  (Or it could be an X button next to the name of the currently selected event.)
                //-               The Edit Event button could be a "pencil" icon in the top-right corner of the form.
                button.common-button.btn.btn-success(ng-if='checkViewPermission("Platform", "Reward", "Update")', ng-click='vm.initMoveToRewardGroup()') {{'MOVE_TO_ANOTHER_GROUP' | translate}}
                button.common-button.btn.btn-danger(ng-if='vm.platformRewardShowEdit("DELETE") && checkViewPermission("Platform", "Reward", "Delete")', data-toggle="modal", data-target='#modalDeleteReward') {{'DELETE' | translate}}
                button.common-button.btn.btn-warning(ng-if='vm.platformRewardShowEdit("CANCEL")', ng-click="vm.platformRewardPageName='showReward';vm.clearRewardFormData();vm.disableAllRewardInput(true)") {{'CANCEL' | translate}}
                button.common-button.btn.btn-info(ng-if='vm.platformRewardShowEdit("EDIT") && checkViewPermission("Platform", "Reward", "Update")', ng-click="vm.platformRewardPageName='updateReward';vm.disableAllRewardInput(false)") {{'EDIT' | translate}}
                button.common-button.btn.btn-success(ng-if='vm.platformRewardShowEdit("UPDATE") && checkViewPermission("Platform", "Reward", "Update")', ng-click="vm.editReward();vm.disableAllRewardInput(true)") {{'UPDATE' | translate}}
                button.common-button.btn.btn-success(ng-if='vm.platformRewardShowEdit("CREATE") && checkViewPermission("Platform", "Reward", "Add")', ng-click="vm.submitReward();vm.disableAllRewardInput(false)") {{'CREATE' | translate}}
            .clearfix

#modalDeleteReward.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:80%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"DELETE_REWARD" | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .row
                            .col-md-12
                                .well
                                    label {{"Are you sure you want to delete reward"|translate}}
                                    strong.text-danger &nbsp;{{vm.showReward.name}}
                                    label ?
            .modal-footer
                button.btn-sm.margin-right-5.btn.btn-primary.col-md-2(data-dismiss='modal',ng-click="vm.deleteReward();") {{"DELETE" | translate}}
                button.btn-sm.margin-right-5.btn.btn-warning.col-md-2(data-dismiss='modal') {{"CANCEL" | translate}}

#modalDeleteRewardEventGroup.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:80%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"Warning!" | translate}}
            .modal-body
                .panel.panel-primary
                    .panel-body
                        .row
                            .col-md-12
                                .well
                                    label {{"This group still contain reward events, which of the following operations do you want to do?"|translate}}
                                .col-md-6(style='text-align:center;background-color:green;color:white')
                                    input#rewardGroupOnly(type='checkbox', ng-model='vm.rewardEventGroupOnly', ng-change='vm.rewardEventGroupAll=false')
                                    label(for='rewardGroupOnly') {{"Delete group only, reward events will move to default group?"|translate}}
                                .col-md-6(style='text-align:center;background-color:red;color:white')
                                    input#rewardGroupAll(type='checkbox', ng-model='vm.rewardEventGroupAll', ng-change='vm.rewardEventGroupOnly=false')
                                    label(for='rewardGroupAll') {{"Delete reward events in the group?"|translate}}
            .modal-footer
                button.btn-sm.margin-right-5.btn.btn-primary.col-md-2(data-dismiss='modal',ng-click="vm.deleteRewardEventGroup();" ng-disabled='!vm.rewardEventGroupOnly && !vm.rewardEventGroupAll') {{"CONFIRM" | translate}}
                button.btn-sm.margin-right-5.btn.btn-warning.col-md-2(data-dismiss='modal') {{"CANCEL" | translate}}

#modalMoveToRewardGroup.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:80%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"MOVE_TO_ANOTHER_GROUP" | translate}}
            .modal-body
                .panel.panel-primary
                        .panel-body
                            .row
                                .col-md-12
                                    label {{"GROUP_NAME"|translate}}
                                    select.form-control(ng-model='vm.moveRewardEventGroupId', style='max-width:300px', required)
                                        option(ng-repeat='(i,v) in vm.rewardEventGroup', value='{{v._id}}', ng-if='v._id && v._id != vm.showRewardEventGroup._id') {{v.name}}


            .modal-footer
                button.btn-sm.margin-right-5.btn.btn-primary.col-md-2(data-dismiss='modal', ng-disabled='!vm.moveRewardEventGroupId', ng-click="vm.moveEventRewardGroup()") {{"CONFIRM" | translate}}
                button.btn-sm.margin-right-5.btn.btn-warning.col-md-2(data-dismiss='modal') {{"CANCEL" | translate}}

#modalCreateRewardEventGroup.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:80%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"ADD_NEW_GROUP" | translate}}
            .modal-body
                .panel.panel-primary
                        .panel-body
                            .row
                                .col-md-12
                                    label {{"GROUP_NAME"|translate}}
                                    input.form-control(type="text", ng-model="vm.newRewardEventGroupName", required)


            .modal-footer
                button.btn-sm.margin-right-5.btn.btn-primary.col-md-2(data-dismiss='modal', ng-disabled='!vm.newRewardEventGroupName', ng-click="vm.createRewardEventGroup()") {{"ADD" | translate}}
                button.btn-sm.margin-right-5.btn.btn-warning.col-md-2(data-dismiss='modal') {{"CANCEL" | translate}}

#modalEditRewardEventGroup.modal.fade(tabindex='-1', role='dialog', data-backdrop='static', keyboard=false,aria-labelledby='myModalLabel', aria-hidden='true')
    .modal-dialog(style='width:80%;')
        .modal-content
            .modal-header
                a.fa.fa-times.close(type='button', data-dismiss='modal')
                h4.modal-title {{"ADD_NEW_GROUP" | translate}}
            .modal-body
                .panel.panel-primary
                        .panel-body
                            .row
                                .col-md-12
                                    label {{"GROUP_NAME"|translate}}
                                    input.form-control(type="text", ng-model="vm.editRewardEventGroupName", required)


            .modal-footer
                button.btn-sm.margin-right-5.btn.btn-primary.col-md-2(data-dismiss='modal', ng-disabled='!vm.editRewardEventGroupName', ng-click="vm.editRewardGroupName()") {{"CONFIRM" | translate}}
                button.btn-sm.margin-right-5.btn.btn-warning.col-md-2(data-dismiss='modal') {{"CANCEL" | translate}}
