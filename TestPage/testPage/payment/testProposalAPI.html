<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>
    <title>Test Payment Proposal Update</title>
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>-->
    <!--<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>-->
    <!--<script src="common/require.js" data-main="testProposalAPI"></script>-->
</head>
<h3>set Topup Proposal Status (设置充值提案状态)</h3>
<div class="test-container">
    <div>
        <label>*Proposal ID
            <input name="proposalId">
        </label>
    </div>
    <div>
        <label>*orderStatus
            <input name="orderStatus">
        </label>
    </div>
    <div>
        <label>*depositId
            <input name="depositId">
        </label>
    </div>
    <p>
        <button data-api-name="setTopupProposalStatus">setTopupProposalStatus</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>set Bonus Proposal Status (设置兑奖提案状态)</h3>
<div class="test-container">
    <div>
        <label>*Proposal ID
            <input name="proposalId">
        </label>
    </div>
    <div>
        <label>*orderStatus
            <input name="orderStatus">
        </label>
    </div>
    <div>
        <label>*bonusId
            <input name="bonusId">
        </label>
    </div>
    <div>
        <label>remark
            <input name="remark">
        </label>
    </div>
    <p>
        <button data-api-name="setBonusProposalStatus">setBonusProposalStatus</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>get Proposal By Id (根据Id查询提案)</h3>
<div class="test-container">
    <div>
        <label>*Proposal ID
            <input name="proposalId">
        </label>
    </div>
    <p>
        <button data-api-name="getProposalById">getProposalById</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>getProposalList (根据条件查询提案列表)</h3>
<div class="test-container">
    <div><label>Query Id
        <input name="queryId">
    </label>
    </div>

    <div><label>Platform Code
        <input name="platformCode">
    </label>
    </div>

    <div><label>Start Time
        <input name="startTime" type="datetime-local"> (example format: "2011-04-11T11:51:00")
    </label>
    </div>

    <div><label>End Time
        <input name="endTime" type="datetime-local"> (example format: "2011-04-11T11:51:00")
    </label>
    </div>

    <div><label>Page Number
        <input name="pageNum" type="number">
    </label>
    </div>

    <div><label>Page Size
        <input name="pageSize" type="number">
    </label></div>

    <button data-api-name="getProposalList">getProposalList</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>BankcardListByGroup (获取银行分组列表)</h3>
<div class="test-container">
    <div><label>Bank Card Group Id
        <input name="groupId">
    </label>
    </div>
    <div><label>Platform Id
        <input name="platformId">
    </label>
    </div>
    <button data-api-name="getBankcardListByGroup">getBankCardList</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>MerchantIdListByGroup (获取商户号分组列表)</h3>
<div class="test-container">
    <div><label>Merchant Group Id
        <input name="groupId">
    </label>
    </div>
    <div><label>Platform Id
        <input name="platformId">
    </label>
    </div>
    <button data-api-name="getMerchantIdListByGroup">getMerchantList</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>Top Up Success Proposal (提案充值成功)</h3>
<div class="test-container">
    <div>
        <label>*Proposal ID
            <input name="proposalId">
        </label>
    </div>
    <div>
        <label>Money
            <input name="amount" type="number">
        </label>
    </div>
    <div>
        <label>PlayerId
            <input name="playerId">
        </label>
    </div>
    <p>
        <button id="topUpSuccessProposal" data-api-name="topupSuccess">Top Up Success Proposal</button>
    <div>
        <textarea></textarea>
    </div>
</div>
<h3>Top Up Fail Proposal (提案充值失败)</h3>
<div class="test-container">
    <div>
        <label>*Proposal ID
            <input name="proposalId">
        </label>
    </div>
    <div>
        <label>Money
            <input name="money" type="number">
        </label>
    </div>
    <div>
        <label>PlayerId
            <input name="playerId">
        </label>
    </div>
    <p>
        <button id="topUpFailProposal" data-api-name="topupFail">Update Top Up Intent</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>Apply bonus Proposal Success (申请兑奖提案成功)</h3>
<div class="test-container">
    <div>
        <label>*Proposal ID
            <input name="proposalId">
        </label>
    </div>
    <p>
        <button id="applyBonusSuccess" data-api-name="applyBonusSuccess">Success</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>Apply bonus Proposal Failed (申请兑奖提案失败)</h3>
<div class="test-container">
    <div>
        <label>*Proposal ID
            <input name="proposalId">
        </label>
    </div>
    <p>
        <button id="applyBonusFail" data-api-name="applyBonusFail">Fail</button>
    <div>
        <textarea></textarea>
    </div>
</div>


<h3>addTestTopUp (添加测试充值)</h3>
<div class="test-container">
    <div><label>Platform Id
        <input name="platformId">
    </label>
    </div>

    <div><label>Player name
        <input name="name">
    </label>
    </div>

    <div>
        <label>Top up Time
            <input name="createTime" type="datetime-local"> (example format: "2011-04-11T11:51:00")
        </label>
    </div>

    <div><label>Top up type 1在线 2银行卡 3支付宝 4微信
        <input name="type" type="number">
    </label>
    </div>

    <div><label>Online top up type
        <input name="topupType">
    </label></div>

    <div><label>Client Type 1pc 2h5 3app
        <input name="clientType" type="number">
    </label></div>

    <div><label>Amount
        <input name="amount" type="number">
    </label></div>

    <div>
        <label>lastBankcardNo
            <input name="lastBankcardNo">
        </label>
        <p>
    </div>
    <div>
        <label>bankTypeId
            <input name="bankTypeId">
        </label>
        <p>
    </div>
    <div>
        <label>depositMethod
            <input name="depositMethod">
        </label>
        <p>
    </div>
    <div>
        <label>provinceId
            <input name="provinceId">
        </label>
        <p>
    </div>
    <div>
        <label>cityId
            <input name="cityId">
        </label>
        <p>
    </div>
    <div>
        <label>districtId
            <input name="districtId">
        </label>
        <p>
    </div>
    <div>
        <label>bonusCode
            <input name="bonusCode">
        </label>
        <p>
    </div>

    <button data-api-name="addTestTopUp">Add</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>Request proposal success (通过PMS支付提案)</h3>
<div class="test-container">
    <div>
        <label>*Proposal Id
            <input name="proposalId">
        </label>
    </div>
    <div>
        <label>*status  1:在线 0：其他
            <input name="status",  type="number">
        </label>
    </div>
    <p>
        <button id="requestProposalSuccessPMS" data-api-name="requestProposalSuccessPMS">Request</button>
    <div>
        <textarea></textarea>
    </div>
</div>



<body>


<script>
    require(['services/payment/PaymentServices', 'common/WebSocketClient', 'common/TestHelper', 'testAPI/paymentAPITest/ProposalAPITest', 'testAPI/paymentAPITest/ConnectionAPITest'],
            function (PaymentServices, WebSocketClient, TestHelper, proposalAPITest, connectionAPITest) {
                var Client = function (url) {

                    WebSocketClient.call(this, url);

                    var paymentService = new PaymentServices.ProposalService();
                    this.addService(paymentService);

                    var connectionService = new PaymentServices.ConnectionService();
                    this.addService(connectionService);
                };

                var proto = Client.prototype = Object.create(WebSocketClient.prototype);
                proto.constructor = Client;

                $(document).ready(function () {
                    var client = new Client("ws://" + TestHelper.websocketIP + ":9480");
                    client.connect();

                    client.addEventListener("open", function () {
                        var paymentService = client.getService("proposal");
                        var paymentAPITest = new proposalAPITest(paymentService);

                        var connectionService = client.getService("connection");
                        console.log("connectionService....", connectionService);

                        var connAPITest = new connectionAPITest(connectionService);

                        connAPITest.login(function (data) {
                            console.log('login data.....', data);
                        }, {
                            name: "testApiUser",
                            password: "123"
                        });


                        TestHelper.setAPIName('PaymentServices.proposal');
                        TestHelper.attachListeners(paymentAPITest);

                    });

                    TestHelper.addReconnectOnCloseListener(client);
                });
            }
    );

</script>
</body>
</html>