<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>
    <title>Reward Points API</title>
</head>
<body>



<h3>Get Login Reward Points (获取登入积分信息)</h3>

<div class="test-container">
    <div>
        <label>Platform Id
            <input id="platformId" type=text name="platformId">
        </label>
    </div>
    <p></p>

    <div>
        <button id="getLoginRewardPoints" data-api-name="getLoginRewardPoints">Get Login Reward Points</button>
    </div>
</div>

<h3>GET TOP UP REWARD POINTS EVENT (获取存款积分信息)</h3>

<div class="test-container">
    <div>
        <label>Platform Id
            <input id="platformId" type=text name="platformId">
        </label>
    </div>
    <p></p>

    <div>
        <button id="getTopUpRewardPointsEvent" data-api-name="getTopUpRewardPointsEvent">Get Top Up Reward Points Event</button>
    </div>
</div>

<h3>GET REWARD POINTS RANKING (获取积分排名)</h3>

<div class="test-container">
    <div>
        <label>Platform Id
            <input type=text name="platformId">
        </label>
    </div>
    <div>
        <label>Total Rank
            <input type=number name="totalRank">
        </label>
    </div>
    <p></p>

    <div>
        <button id="getRewardPointsRanking" data-api-name="getRewardPointsRanking">Get Reward Points Ranking</button>
    </div>
</div>

<h3>Get Game Reward Points (获取游戏积分信息)</h3>

<div class="test-container">
    <div>
        <label>Platform Id
            <input id="platformId" type=text name="platformId">
        </label>
    </div>
    <p></p>

    <div>
        <button id="getGameRewardPoints" data-api-name="getGameRewardPoints">Get Game Reward Points</button>
    </div>
</div>


<h3>APPLY REWARD POINT (手动申请积分奖励)</h3>
<div class="test-container">
    <div>
        <label>Event Object Id
            <input type=text name="eventObjectId">
        </label>
    </div>
    <p></p>

    <div>
        <button id="applyRewardPoint" data-api-name="applyRewardPoint">Apply Reward Point</button>
    </div>
</div>

<h3>GET POINT RULE (积分规则)</h3>
<div class="test-container">
    <div>
        <label>Platform Id
            <input id="platformId" type=text name="platformId">
        </label>
    </div>
    <p></p>

    <div>
        <button id="getPointRule" data-api-name="getPointRule">Get Point Rule</button>
    </div>
</div>

<h3>APPLY POINT TO CREDIT (积分兑换真钱)</h3>
<div class="test-container">
    <div>
        <label>Point
            <input id="point" type=text name="point">
        </label>
    </div>
    <p></p>

    <div>
        <button id="applyPointToCredit" data-api-name="applyPointToCredit">Apply Point To Credit</button>
    </div>
</div>

<h3>Get Mission List (获取任务信息)</h3>
<div class="test-container">
    <div>
        <label>Platform Id
            <input id="platformId" type=text name="platformId">
        </label>
    </div>
    <p></p>

    <div>
        <button id="getMissonList" data-api-name="getMissonList">Get Mission List</button>
    </div>
</div>

<h3>MANUAL DECUCT POINT (扣除积分)</h3>

<div class="test-container">
    <div>
        <label>Request Id
            <input type=text name="requestId">
        </label>
    </div>
    <div>
        <label>Point to Deduct
            <input type=number name="pointToDeduct">
        </label>
    </div>
    <div>
        <label>Remark
            <input type=text name="remark">
        </label>
    </div>
    <p></p>

    <div>
        <button id="deductPointManually" data-api-name="deductPointManually">Deduct Point</button>
    </div>
</div>

<script>
    require(['services/client/ClientServices', 'common/WebSocketClient', 'common/TestHelper', 'testAPI/clientAPITest/ClientRewardPointsAPITest', 'testAPI/clientAPITest/ClientPlayerAPITest', 'testAPI/clientAPITest/ClientConnectionAPITest'],
        function (ClientServices, WebSocketClient, TestHelper, ClientRewardPointsAPITest, ClientPlayerAPITest, ClientConnectionAPITest) {
            var Client = function (url) {

                WebSocketClient.call(this, url);

                var RewardPointsService = new ClientServices.RewardPointsService();
                this.addService(RewardPointsService);

                var playerService = new ClientServices.PlayerService();
                this.addService(playerService);

                var conService = new ClientServices.ConnectionService();
                this.addService(conService);
            };

            var proto = Client.prototype = Object.create(WebSocketClient.prototype);
            proto.constructor = Client;

            var client = new Client(TestHelper.websocketURL);
            client.connect();

            client.addEventListener("open", function () {
                var RewardPointsService = client.getService("rewardPoints");
                var clientRewardPointsAPITest = new ClientRewardPointsAPITest(RewardPointsService);

                var connectionService = client.getService("connection");
                var connAPITest = new ClientConnectionAPITest(connectionService);

                connAPITest.setLang(function (data) {
                    console.log('setlang data.....', data);
                });

                TestHelper.loginCookiePlayer(client, ClientPlayerAPITest);
                TestHelper.setAPIName('ClientServices.rewardPoints');
                TestHelper.attachListeners(clientRewardPointsAPITest);
            });

            TestHelper.addReconnectOnCloseListener(client);
        }
    );


</script>
</body>
</html>
</body>
</html>
