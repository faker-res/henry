<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>
    <title>Test Payment Proposal Update</title>
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>-->
    <!--<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>-->
    <!--<script src="common/require.js" data-main="testProposalAPI"></script>-->
</head>
<h3>requestManualBankcard(请求手工存款充值银行卡)</h3>
<div class="test-container">
    <div>
        <label>*Request Id
            <input name="requestId">
        </label>
    </div>
    <div>
        <label>*Platform Id
            <input name="platformId">
        </label>
    </div>
    <div>
        <label>*Username
            <input name="userName">
        </label>
    </div>
    <div>
        <label>*Real Name
            <input name="realName">
        </label>
    </div>
    <div>
        <label>*Amount
            <input name="amount">
        </label>
    </div>
    <div>
        <label>*Deposit Method
            <input name="depositMethod">
        </label>
    </div>
    <div>
        <label>*Bank Type Id
            <input name="bankTypeCode">
        </label>
    </div>
    <div>
        <label>*Bank Card No
            <input name="bankCardNo">
        </label>
    </div>
    <div>
        <label>*Province Id
            <input name="provinceId">
        </label>
    </div>
    <div>
        <label>*City Id
            <input name="cityId">
        </label>
    </div>
    <div>
        <label>*District Id
            <input name="districtId">
        </label>
    </div>

    <p>
        <button id="requestManualBankCard" data-api-name="requestManualBankCard">Request Manual BankCard</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>Request Online Merchant(请求在线充值)</h3>
<div class="test-container">
    <div>
        <label>*Request Id
            <input name="requestId">
        </label>
    </div>
    <div>
        <label>*Platform Id
            <input name="platformId">
        </label>
    </div>
    <div>
        <label>*Username
            <input name="userName">
        </label>
    </div>
    <div>
        <label>Realname
            <input name="realName">
        </label>
    </div>
    <div>
        <label>ip
            <input name="ip">
        </label>
    </div>
    <div>
        <label>*Payment Type
            <input name="topupType">
        </label>
    </div>
    <div>
        <label>merchant use type
            <input name="merchantUseType" type="number">
        </label>
    </div>
    <div>
        <label>client type
            <input name="clientType" type="number">
        </label>
    </div>
    <div>
        <label>*Amount
            <input name="amount">
        </label>
    </div>
    <p>
        <button id="requestOnlineMerchant" data-api-name="requestOnlineMerchant">Request Online Merchant</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>Modify Manual Topup Request(修改手工存款充值请求信息)</h3>
<div class="test-container">
    <div>
        <label>*Request Id
            <input name="requestId">
        </label>
    </div>
    <div>
        <label>*Operation Type
            <input name="operationType">
        </label>
    </div>
    <div>
        <label>Data
            <input name="data">
        </label>
    </div>
    <p>
        <button id="modifyManualTopupRequest" data-api-name="modifyManualTopupRequest">Modify Manual Topup Request</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>Set ProposalId ToOnline MerchantRequest(申请兑奖提案失败)</h3>
<div class="test-container">
    <div>
        <label>*Request Id
            <input name="requestId">
        </label>
    </div>
    <div>
        <label>*Proposal Id
            <input name="proposalId">
        </label>
    </div>
    <p>
        <button id="setProposalIdToOnlineMerchantRequest" data-api-name="setProposalIdToOnlineMerchantRequest">Set ProposalId</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>Set ProposalId ToManual TopupRequest(申请兑奖提案失败)</h3>
<div class="test-container">
    <div>
        <label>*Request Id
            <input name="requestId">
        </label>
    </div>
    <div>
        <label>*Proposal Id
            <input name="proposalId">
        </label>
    </div>
    <p>
        <button id="setProposalIdToManualTopupRequest" data-api-name="setProposalIdToManualTopupRequest">Set ProposalId</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>Request Repairing Online payment(在线支付补单申请)</h3>
<div class="test-container">
    <div>
        <label>*Request Id
            <input name="requestId">
        </label>
    </div>
    <div>
        <label>*Proposal Id
            <input name="proposalId">
        </label>
    </div>
    <p>
        <button id="requestRepairingOnlinePay" data-api-name="requestRepairingOnlinePay">Set ProposalId</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>Check expired manual top up (手工订单超时后的再次确认请求)</h3>
<div class="test-container">
    <div>
        <label>*Request Id
            <input name="requestId">
        </label>
    </div>
    <div>
        <label>Proposal Id
            <input name="proposalId">
        </label>
    </div>
    <p></p>
    <button data-api-name="checkExpiredManualTopup">Check</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>Cancel alipay topup (在线支付补单申请)</h3>
<div class="test-container">
    <div>
        <label>*Proposal Id
            <input name="proposalId">
        </label>
    </div>
    <p>
        <button id="requestCancellationPayOrder" data-api-name="requestCancellationPayOrder">Cancel</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<h3>Clear proposal limits (清除取消请求提案限制次数)</h3>
<div class="test-container">
    <div>
        <label>*User name
            <input name="username">
        </label>
    </div>
    <p>
        <button id="requestClearProposalLimits" data-api-name="requestClearProposalLimits">Cancel</button>
    <div>
        <textarea></textarea>
    </div>
</div>

<body>


<script>
    require(['services/pms/PaymentManagementServices', 'common/WebSocketClient', 'common/TestHelper', 'testAPI/pmsAPITest/PaymentAPITest', 'testAPI/pmsAPITest/ConnectionAPITest'],
            function (PaymentMgmtServices, WebSocketClient, TestHelper, PaymentAPITest, connectionAPITest) {
                var Client = function (url) {

                    WebSocketClient.call(this, url);

                    var paymentService = new PaymentMgmtServices.PaymentService();
                    this.addService(paymentService);

                    var connectionService = new PaymentMgmtServices.ConnectionService();
                    this.addService(connectionService);
                };

                var proto = Client.prototype = Object.create(WebSocketClient.prototype);
                proto.constructor = Client;

                $(document).ready(function () {
                    var client = new Client(TestHelper.pmsWSURL);
                    client.connect();

                    client.addEventListener("open", function () {
                        var paymentService = client.getService("payment");
                        var paymentAPITest = new PaymentAPITest(paymentService);

                        var connectionService = client.getService("connection");
                        console.log("connectionService....", connectionService);

                        var connAPITest = new connectionAPITest(connectionService);

                        connAPITest.login(function (data) {
                            console.log('login data.....', data);
                        }, {
                            name: "testApiUser",
                            password: "123"
                        });


                        TestHelper.setAPIName('PaymentMgmtServices.payment');
                        TestHelper.attachListeners(paymentAPITest);

                    });

                    TestHelper.addReconnectOnCloseListener(client);
                });
            }
    );

</script>
</body>
</html>