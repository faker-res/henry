<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>
    <title>Test Client Game API</title>
</head>
<body>
<h3>Add Player(给CP添加真实玩家)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>providerId
        <input name="providerId">
    </label>
    <p></p>
    <p>
    <div>
        <button data-api-name="addPlayer">addPlayer</button>
    </div>
    <textarea></textarea>
</div>

<h3>Add TestPlayer(给CP添加测试玩家)</h3>
<div class="test-container">
    <div>
        <label>username
            <input name="username">
        </label>
        <p></p>
        <label>platformId
            <input name="platformId">
        </label>
        <p></p>
        <label>providerId
            <input name="providerId">
        </label>
        <p></p>
    </div>
    <p>
    <div>
        <button data-api-name="addTestPlayer">addTestPlayer</button>
    </div>
    <textarea></textarea>
</div>

<h3>Get LoginURL (获取登录游戏的URL)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>providerId
        <input name="providerId">
    </label>
    <p></p>
    <label>gameId
        <input name="gameId">
    </label>
    <p></p>
    <label>clientDomainName
        <input name="clientDomainName">
    </label>
    <p></p>
    <label>IP
        <input name="ip">
    </label>
    <p></p>
    <label>lang(1：简体中文；2：English；3:한국의；4：ไทย)
        <input name="lang">
    </label>


    <div>
        <button data-api-name="getLoginURL">getLoginURL</button>
    </div>
    <textarea></textarea>
</div>

<h3>Get TestLoginURL (获取试玩游戏的URL)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>providerId
        <input name="providerId">
    </label>
    <p></p>

    <label>gameId
        <input name="gameId">
    </label>
    <p></p>
    <label>clientDomainName
        <input name="clientDomainName">
    </label>
    <p></p>
    <label>IP
        <input name="ip">
    </label>
    <p></p>
    <label>lang(1：简体中文；2：English；3:한국의；4：ไทย)
        <input name="lang">
    </label>
    <div>
        <button data-api-name="getTestLoginURL">getTestLoginURL</button>
    </div>
    <textarea></textarea>
</div>

<h3>Get ConsumptionRecords (获取玩家消费记录)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>providerId
        <input name="providerId">
    </label>
    <p></p>

    <label>gameId
        <input name="gameId">
    </label>
    <p></p>
    <label>dateStart
        <input name="dateStart">
    </label>
    <p></p>
    <label>dateEnd
        <input name="dateEnd">
    </label>
    <p></p>
    <label>drawNo
        <input name="drawNo">
    </label>
    <p></p>
    <label>pageNum
        <input name="pageNum">
    </label>
    <p></p>
    <label>pageSize
        <input name="pageSize">
    </label>
    <p>
    <div>
        <button data-api-name="getConsumptionRecords">getConsumptionRecords</button>
    </div>
    <textarea></textarea>
</div>

<h3>Get TransferRecords(获取玩家转入/转出记录)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>providerId
        <input name="providerId">
    </label>
    <p></p>
    <label>transferId
        <input name="transferId">
    </label>
    <p></p>
    <label>dateStart
        <input name="dateStart">
    </label>
    <p></p>
    <label>dateEnd
        <input name="dateEnd">
    </label>
    <p></p>
    <label>transferDirection
        <input name="transferDirection">
    </label>
    <p></p>
    <label>pageNum
        <input name="pageNum">
    </label>
    <p></p>
    <label>pageSize
        <input name="pageSize">
    </label>
    <div>
        <button data-api-name="getTransferRecords">getTransferRecords</button>
    </div>
    <textarea></textarea>
</div>

<h3>query Credit (查询玩家游戏额度)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>providerId
        <input name="providerId">
    </label>
    <p></p>
    <div>
        <button data-api-name="queryCredit">queryCredit</button>
    </div>

    <textarea></textarea>
</div>

<h3>query Credit By PlatformId(查询玩家游戏额度)</h3>
<div class="test-container">
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>Date
        <input name="date">
    </label>
    <p></p>
    <div>
        <button data-api-name="queryCreditByPlatformId">queryCredit</button>
    </div>

    <textarea></textarea>
</div>

<h3>Transfer In (玩家平台额度转入游戏)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>providerId
        <input name="providerId">
    </label>
    <p></p>
    <label>transferId
        <input name="transferId">
    </label>
    <p></p>
    <label>credit
        <input name="credit">
    </label>
    <p></p>
    <div>
        <button data-api-name="transferIn">transferIn</button>
    </div>

    <textarea></textarea>
</div>

<h3>Transfer Out (玩家游戏额度转回平台)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>providerId
        <input name="providerId">
    </label>
    <p></p>
    <label>transferId
        <input name="transferId">
    </label>
    <p></p>
    <label>credit
        <input name="credit">
    </label>
    <p></p>
    <div>
        <button data-api-name="transferOut">transferOut</button>
    </div>

    <textarea></textarea>
</div>

<h3>Check UserOnline (查询玩家是否游戏在线)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>providerId
        <input name="providerId">
    </label>
    <p></p>
    <div>
        <button data-api-name="checkUserOnline">checkUserOnline</button>
    </div>

    <textarea></textarea>
</div>

<h3>Get GameUserInfo (获取玩家游戏中的账户信息)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>providerId
        <input name="providerId">
    </label>
    <p></p>
    <div>
        <button data-api-name="getGameUserInfo">getGameUserInfo</button>
    </div>

    <textarea></textarea>
</div>

<h3>Modify GamePassword (修改玩家游戏账号的密码)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>Provider Id
        <input name="providerId">
    </label>
    <p></p>
    <label>Credit
        <input name="credit" type="number">
    </label>
    <p></p>
    <label>oldPassword
        <input name="oldPassword">
    </label>
    <p></p>
    <label>newPassword
        <input name="newPassword">
    </label>
    <p></p>
    <div>
        <button data-api-name="modifyGamePassword">modifyGamePassword</button>
    </div>
    <textarea></textarea>

</div>

<h3>Grab PlayerTransferRecords(请求立即收录玩家的消费记录)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>Provider Id
        <input name="providerId">
    </label>
    <p></p>

    <div>
        <button data-api-name="grabPlayerTransferRecords">grabPlayerTransferRecords</button>
    </div>
    <textarea></textarea>
</div>

<h3>syncPlatforms(同步平台列表)</h3>
<div class="test-container">
    <label>platforms
        <input name="platforms">
    </label>
    <p></p>
    <div>
        <button data-api-name="syncPlatforms">syncPlatforms</button>
    </div>
    <textarea></textarea>
</div>


<h3>Check Exist(检测用户名是否已经存在)</h3>
<div class="test-container">
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>Provider Id
        <input name="providerId">
    </label>
    <p></p>

    <div>
        <button data-api-name="checkExist">checkExist</button>
    </div>
    <textarea></textarea>
</div>


<h3>Get Test Login Url Without Login(试玩游戏——未登入)</h3>
<div class="test-container">
    <label>Game Id
        <input name="gameId">
    </label>
    <p></p>
    <label>username
        <input name="username">
    </label>
    <p></p>
    <label>platformId
        <input name="platformId">
    </label>
    <p></p>
    <label>Provider Id
        <input name="providerId">
    </label>
    <p></p>
    <label>Client Domain Name
        <input name="clientDomainName">
    </label>
    <p></p>
    <label>Language
        <input name="lang">
    </label>
    <p></p>
    <label>IP
        <input name="ip">
    </label>
    <p></p>
    <label>Client Type
        <input name="clientType">
    </label>
    <p></p>

    <div>
        <button data-api-name="getTestLoginURLWithOutUser">get</button>
    </div>
    <textarea></textarea>
</div>

<script>
    require(['services/cpms/cpmsServices', 'common/WebSocketClient', 'common/TestHelper', 'testAPI/cpmsAPITest/PlayerAPITest', 'testAPI/cpmsAPITest/ConnectionAPITest'],
            function (PlayerServices, WebSocketClient, TestHelper, PlayerAPITest, verificationAPITest) {
                var Client = function (url) {

                    WebSocketClient.call(this, url);

                    var playerService = new PlayerServices.PlayerService();
                    this.addService(playerService);

                    var conService = new PlayerServices.ConnectionService();
                    this.addService(conService);
                };

                var proto = Client.prototype = Object.create(WebSocketClient.prototype);
                proto.constructor = Client;

                $(document).ready(function () {
                    var client = new Client(TestHelper.cpmsWSURL);
                    client.connect();

                    client.addEventListener("open", function () {
                        var playerService = client.getService("player");
                        var clientPlayerAPITest = new PlayerAPITest(playerService);


                        var conService = client.getService("connection");
                        var conAPITest = new verificationAPITest(conService);
                        conAPITest.login(function (data) {
                            console.log("login success");
                        }, {
                                              userName: "admin",
                                              password: "cpmsmon"
                                          });

                        //TestHelper.loginCookiePlayer(client, PlayerAPITest);
                        TestHelper.setAPIName('PlayerServices.player');
                        TestHelper.attachListeners(clientPlayerAPITest);

                    });

                    TestHelper.addReconnectOnCloseListener(client);
                });
            }
    );
</script>
</body>
</html>
